<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Ethen çš„å®éªŒå®¤</title><link>https://ethen-cao.github.io/ethenslab/</link><description>Recent content on Ethen çš„å®éªŒå®¤</description><generator>Hugo -- 0.152.2</generator><language>en</language><lastBuildDate>Tue, 13 Jan 2026 10:00:00 +0800</lastBuildDate><atom:link href="https://ethen-cao.github.io/ethenslab/index.xml" rel="self" type="application/rss+xml"/><item><title>Android å›¾å½¢æ¸²æŸ“æ¶æ„è¯¦è§£ (Gunyah Hypervisor)</title><link>https://ethen-cao.github.io/ethenslab/gunyah/graphics/</link><pubDate>Tue, 13 Jan 2026 10:00:00 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/gunyah/graphics/</guid><description>&lt;h2 id="1-æ¦‚è¿°"&gt;1. æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†åœ¨åŸºäº &lt;strong&gt;Qualcomm SA8295/SA8255 (Gen5)&lt;/strong&gt; æ™ºèƒ½åº§èˆ±å¹³å°ä¸­ï¼ŒAndroid Guest VM çš„å›¾å½¢æ¸²æŸ“è½¯ä»¶æ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¯¥å¹³å°ä¸­ï¼ŒAndroid è¿è¡Œåœ¨ &lt;strong&gt;Gunyah Hypervisor&lt;/strong&gt; ä¹‹ä¸Šä½œä¸ºå®¢æˆ·æœºï¼ˆGuest VMï¼‰ã€‚å›¾å½¢ç³»ç»Ÿé‡‡ç”¨&lt;strong&gt;å‰åç«¯åˆ†ç¦»çš„è™šæ‹ŸåŒ–æ¶æ„ (Split-Rendering Architecture)&lt;/strong&gt;ã€‚Android ä¾§ï¼ˆGuestï¼‰è´Ÿè´£ç”Ÿæˆæ¸²æŸ“æŒ‡ä»¤ï¼Œé€šè¿‡ &lt;strong&gt;HGSL (Hypervisor Graphics Service Layer)&lt;/strong&gt; é©±åŠ¨æ ˆç©¿é€è™šæ‹Ÿæœºè¾¹ç•Œï¼Œæœ€ç»ˆç”± Host ç«¯çš„ç‰©ç†é©±åŠ¨æ“æ§ Adreno GPU ç¡¬ä»¶æ‰§è¡Œæ¸²æŸ“ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ¡£æ¶µç›–äº†ä»åº”ç”¨å±‚ View ç³»ç»Ÿã€Native æ¸²æŸ“ç®¡çº¿ã€åˆ°å†…æ ¸è™šæ‹ŸåŒ–é©±åŠ¨çš„å…¨é“¾è·¯æŠ€æœ¯ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id="2-æ•´ä½“æ¶æ„å›¾"&gt;2. æ•´ä½“æ¶æ„å›¾&lt;/h2&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†ä»åº”ç”¨å±‚ &lt;code&gt;ViewRootImpl&lt;/code&gt; åˆ°åº•å±‚å†…æ ¸é©±åŠ¨ &lt;code&gt;gh_dbl&lt;/code&gt; çš„å®Œæ•´è°ƒç”¨é“¾è·¯ã€‚æ¶æ„æ¸…æ™°åœ°å±•ç¤ºäº† &lt;strong&gt;BLASTBufferQueue&lt;/strong&gt; çš„å¼•å…¥ã€&lt;strong&gt;OpenGL ES / Vulkan&lt;/strong&gt; çš„åŒé“¾è·¯æ”¯æŒï¼Œä»¥åŠå†…æ ¸æ€çš„&lt;strong&gt;å¿«æ…¢é€šé“åˆ†ç¦»&lt;/strong&gt;è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/gunyah-graphics.png" alt="" /&gt;&lt;/p&gt;
&lt;h2 id="3-åº”ç”¨å±‚ä»-ui-åˆ°æ¸²æŸ“çº¿ç¨‹-application-ui-layer"&gt;3. åº”ç”¨å±‚ï¼šä» UI åˆ°æ¸²æŸ“çº¿ç¨‹ (Application UI Layer)&lt;/h2&gt;
&lt;p&gt;åœ¨ Android 16+ æ¶æ„ä¸­ï¼Œåº”ç”¨å±‚ä¸ä»…è´Ÿè´£ UI é€»è¾‘ï¼Œè¿˜ç›´æ¥å‚ä¸å›¾å½¢ç¼“å†²åŒºçš„ç®¡ç†ã€‚&lt;/p&gt;
&lt;h3 id="viewrootimpl--blastbufferqueue"&gt;&lt;strong&gt;ViewRootImpl &amp;amp; BLASTBufferQueue&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ViewRootImpl&lt;/strong&gt;ï¼šå®ƒæ˜¯ View æ ‘çš„ç®¡ç†è€…ã€‚åœ¨ç°ä»£æ¶æ„ä¸­ï¼Œå®ƒç›´æ¥æŒæœ‰å¹¶ç®¡ç† &lt;strong&gt;&lt;code&gt;BLASTBufferQueue&lt;/code&gt;&lt;/strong&gt; å®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BLASTBufferQueue (BBQ)&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è¿™æ˜¯ Android å›¾å½¢æ¶æ„çš„é‡å¤§å˜é©ã€‚BufferQueue çš„ç”Ÿäº§è€…é€»è¾‘ç°åœ¨è¿è¡Œåœ¨&lt;strong&gt;åº”ç”¨è¿›ç¨‹å†…éƒ¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒè´Ÿè´£å°†åº”ç”¨ç»˜åˆ¶çš„å†…å®¹ä¸çª—å£å±æ€§ï¼ˆä½ç½®ã€å¤§å°ï¼‰æ‰“åŒ…æˆåŸå­åŒ–çš„ &lt;strong&gt;Transaction&lt;/strong&gt; æäº¤ç»™ SurfaceFlingerï¼Œä»è€Œå½»åº•è§£å†³äº†ç”»é¢ä¸çª—å£ä¸åŒæ­¥ï¼ˆTearing/Desyncï¼‰çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ° Surface&lt;/strong&gt;ï¼šåº”ç”¨ä½¿ç”¨çš„ &lt;code&gt;ANativeWindow&lt;/code&gt; (Surface) ç›´æ¥è¿æ¥åˆ°è¿›ç¨‹å†…çš„ BBQï¼Œå› æ­¤ç”³è¯·ç¼“å†²åŒº (&lt;code&gt;dequeueBuffer&lt;/code&gt;) æ˜¯æå¿«çš„&lt;strong&gt;è¿›ç¨‹å†…æ“ä½œ&lt;/strong&gt;ï¼Œä¸å†é¢‘ç¹ä¾èµ– IPC è¯·æ±‚ SurfaceFlingerã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å½•åˆ¶ä¸åŒæ­¥-record--sync"&gt;&lt;strong&gt;å½•åˆ¶ä¸åŒæ­¥ (Record &amp;amp; Sync)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;View / Canvas (RecordingCanvas)&lt;/strong&gt;ï¼š&lt;/p&gt;</description></item><item><title>UMLä¸­packageå’Œcomponentå¯¹æ¯”</title><link>https://ethen-cao.github.io/ethenslab/others/plantuml-%E5%85%83%E7%B4%A0%E8%A7%84%E8%8C%83/</link><pubDate>Wed, 24 Dec 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/others/plantuml-%E5%85%83%E7%B4%A0%E8%A7%84%E8%8C%83/</guid><description>&lt;h1 id="plantuml-å…ƒç´ è§„èŒƒ-æ¶æ„åˆ†å±‚å›¾layer-viewä¸å­ç³»ç»Ÿè®¾è®¡å›¾subsystem-view"&gt;PlantUML å…ƒç´ è§„èŒƒ: æ¶æ„åˆ†å±‚å›¾ï¼ˆLayer Viewï¼‰ä¸å­ç³»ç»Ÿè®¾è®¡å›¾ï¼ˆSubsystem Viewï¼‰&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;ç‰ˆæœ¬&lt;/strong&gt;ï¼šv1.0
&lt;strong&gt;é€‚ç”¨èŒƒå›´&lt;/strong&gt;ï¼šæ™ºèƒ½åº§èˆ±ç³»ç»Ÿ / Android &amp;amp; Linux ç³»ç»Ÿæ¶æ„ / å¹³å°çº§è®¾è®¡æ–‡æ¡£
&lt;strong&gt;ç›®æ ‡&lt;/strong&gt;ï¼šç»Ÿä¸€ PlantUML å…ƒç´ è¯­ä¹‰ï¼Œé¿å…â€œå›¾çœ‹èµ·æ¥å¯¹ï¼Œä½†è¯­ä¹‰ä¸ä¸€è‡´â€çš„é—®é¢˜&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="1-è®¾è®¡åŸåˆ™å¿…é¡»å…ˆè¯»"&gt;1. è®¾è®¡åŸåˆ™ï¼ˆå¿…é¡»å…ˆè¯»ï¼‰&lt;/h2&gt;
&lt;h3 id="11-è¯­ä¹‰ä¼˜å…ˆä½†å…è®¸è§†å›¾é©±åŠ¨"&gt;1.1 è¯­ä¹‰ä¼˜å…ˆï¼Œä½†å…è®¸è§†å›¾é©±åŠ¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;PlantUML å…ƒç´ å…·å¤‡&lt;strong&gt;è¯­ä¹‰å€¾å‘&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ä¸åŒæ¶æ„è§†å›¾ï¼ˆViewï¼‰å…³æ³¨ç‚¹ä¸åŒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒä¸€å¯¹è±¡åœ¨ä¸åŒè§†å›¾ä¸­å…è®¸ä½¿ç”¨ä¸åŒå›¾å½¢&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ‘‰ è§†å›¾å†³å®šå›¾å½¢ï¼Œè€Œä¸æ˜¯å¯¹è±¡æœ¬èº«å†³å®šå›¾å½¢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="12-ä¸€ä¸ªè§†å›¾åªè§£å†³ä¸€ä¸ªé—®é¢˜"&gt;1.2 ä¸€ä¸ªè§†å›¾åªè§£å†³ä¸€ä¸ªé—®é¢˜&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ¶æ„åˆ†å±‚å›¾ï¼šå›ç­”ã€Œç³»ç»Ÿæ˜¯å¦‚ä½•åˆ†å±‚çš„ã€&lt;/li&gt;
&lt;li&gt;å­ç³»ç»Ÿè®¾è®¡å›¾ï¼šå›ç­”ã€Œç³»ç»Ÿç”±å“ªäº›å­ç³»ç»Ÿç»„æˆã€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¦æ­¢åœ¨ä¸€å¼ å›¾ä¸­æ··åˆå¤šç§å»ºæ¨¡ç›®æ ‡&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="2-æ¶æ„åˆ†å±‚å›¾layered-architecture-diagram"&gt;2. æ¶æ„åˆ†å±‚å›¾ï¼ˆLayered Architecture Diagramï¼‰&lt;/h2&gt;
&lt;h3 id="21-å®šä¹‰"&gt;2.1 å®šä¹‰&lt;/h3&gt;
&lt;p&gt;æ¶æ„åˆ†å±‚å›¾ç”¨äºè¡¨è¾¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç³»ç»Ÿçš„&lt;strong&gt;é€»è¾‘åˆ†å±‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ä¸Šä¸‹å±‚ä¾èµ–å…³ç³»&lt;/li&gt;
&lt;li&gt;è¿è¡Œç¯å¢ƒæˆ–éƒ¨ç½²è¾¹ç•Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸å…³å¿ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…·ä½“æ¨¡å—å®ç°&lt;/li&gt;
&lt;li&gt;å­ç³»ç»Ÿå†…éƒ¨ç»“æ„&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="22-å…ƒç´ ä½¿ç”¨è§„èŒƒå¼ºåˆ¶"&gt;2.2 å…ƒç´ ä½¿ç”¨è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰&lt;/h3&gt;
&lt;h4 id="221-ç»Ÿä¸€è§„åˆ™"&gt;2.2.1 ç»Ÿä¸€è§„åˆ™&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;åœ¨æ¶æ„åˆ†å±‚å›¾ä¸­ï¼Œæ‰€æœ‰â€œå±‚ï¼ˆLayerï¼‰â€å¿…é¡»ç»Ÿä¸€ä½¿ç”¨ &lt;code&gt;rectangle&lt;/code&gt; è¡¨ç¤º&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ— è®ºè¯¥å±‚å†…éƒ¨å®é™…æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‹¬ç«‹å­ç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;é€»è¾‘åˆ†ç»„&lt;/li&gt;
&lt;li&gt;æ··åˆå®ç°&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="222-å…ƒç´ æ˜ å°„è¡¨"&gt;2.2.2 å…ƒç´ æ˜ å°„è¡¨&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¶æ„å¯¹è±¡&lt;/th&gt;
&lt;th&gt;å›¾å½¢&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ç³»ç»Ÿæ•´ä½“èŒƒå›´&lt;/td&gt;
&lt;td&gt;&lt;code&gt;frame&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ï¼Œç”¨äºé™å®šè®¨è®ºèŒƒå›´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç‰©ç† SoC / MCU&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rectangle&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¡¬ä»¶æˆ–ç‰©ç†æ‰¿è½½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Hypervisor&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rectangle&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŸºç¡€è¿è¡Œç¯å¢ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;VMï¼ˆPVM / GVMï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rectangle&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;OS è¿è¡Œå®¹å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;App å±‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rectangle&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åº”ç”¨å±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Framework å±‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rectangle&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ¡†æ¶å±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SystemServer å±‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rectangle&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Native &amp;amp; HAL å±‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rectangle&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é€»è¾‘åˆ†å±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Kernel å±‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rectangle&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å†…æ ¸å±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="223-ç¤ºä¾‹android-gvm-åˆ†å±‚å›¾"&gt;2.2.3 ç¤ºä¾‹ï¼ˆAndroid GVM åˆ†å±‚å›¾ï¼‰&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
frame &amp;#34;Smart Cockpit System&amp;#34; {
rectangle &amp;#34;GVM (Android OS)&amp;#34; {
rectangle &amp;#34;App Layer&amp;#34;
rectangle &amp;#34;Android Framework API&amp;#34;
rectangle &amp;#34;System Server&amp;#34;
rectangle &amp;#34;Native &amp;amp; HAL&amp;#34;
rectangle &amp;#34;Linux Kernel&amp;#34;
}
}
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="224-ç¦æ­¢é¡¹æ¶æ„åˆ†å±‚å›¾ä¸­"&gt;2.2.4 ç¦æ­¢é¡¹ï¼ˆæ¶æ„åˆ†å±‚å›¾ä¸­ï¼‰&lt;/h3&gt;
&lt;p&gt;âŒ ä¸å¾—ä½¿ç”¨ &lt;code&gt;package&lt;/code&gt; è¡¨ç¤ºå±‚
âŒ ä¸å¾—å±•å¼€æ¨¡å—æˆ–ç±»
âŒ ä¸å¾—åŒºåˆ† HAL / Native çš„å†…éƒ¨ç»†èŠ‚&lt;/p&gt;</description></item><item><title>QNX-Android IVI æ¶æ„ä¸­çš„ virtio-net é€šä¿¡</title><link>https://ethen-cao.github.io/ethenslab/qnx/qnx_hypervisor_net/</link><pubDate>Sat, 15 Nov 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/qnx/qnx_hypervisor_net/</guid><description>&lt;p&gt;æœ¬æ–‡åŸºäºä¸€å¼  QNX Host + Android guest + Hypervisor + T-Box çš„ virtio-net æ¶æ„å›¾æ•´ç†è€Œæˆï¼Œå›¾ä¸­å±•ç¤ºäº†ä» Android App åˆ°è½¦å¤– T-Box çš„å®Œæ•´ç½‘ç»œè·¯å¾„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/virtio-net.drawio.png" alt="" /&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="1-æ¦‚è¿°"&gt;1. æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;åœ¨å…¸å‹çš„ QNX-Android è½¦æœºï¼ˆIVIï¼‰æ¶æ„ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Android guest&lt;/strong&gt; è´Ÿè´£ UIã€åº”ç”¨ã€è½¦è½½ Appï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;QNX Host&lt;/strong&gt; ä½œä¸ºå®¿ä¸» OSï¼Œè´Ÿè´£åº•å±‚é©±åŠ¨ã€ç½‘ç»œã€ç½‘å…³é€»è¾‘ç­‰ï¼›&lt;/li&gt;
&lt;li&gt;ä¸¤è€…ä¹‹é—´é€šè¿‡ &lt;strong&gt;QNX Hypervisor&lt;/strong&gt; å®ç°è™šæ‹ŸåŒ–éš”ç¦»ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;virtio-net&lt;/strong&gt; æä¾›äº†ä¸€æ¡é«˜æ€§èƒ½çš„â€œè™šæ‹Ÿç½‘çº¿â€ï¼ŒæŠŠ Android guest çš„ç½‘ç»œæ ˆæ¥å…¥ QNX Host çš„ç½‘ç»œæ ˆï¼Œå†é€šè¿‡ç‰©ç†ç½‘å¡è¿åˆ°è½¦å¤– &lt;strong&gt;T-Box / å¤–éƒ¨ç½‘ç»œ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="2-æ•´ä½“æ¶æ„æ€»è§ˆ"&gt;2. æ•´ä½“æ¶æ„æ€»è§ˆ&lt;/h2&gt;
&lt;p&gt;æŒ‰å›¾çš„å¸ƒå±€ï¼Œä»å³åˆ°å·¦æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Android guest&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hypervisorï¼ˆåœ¨åº•éƒ¨ï¼Œè´Ÿè´£è™šæ‹ŸåŒ–ï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;QNX Hostï¼ˆåŒ…å« io-pkt / qvm / é©±åŠ¨ç­‰ï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;T-Box / å¤–éƒ¨ç½‘ç»œ&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è‡ªé¡¶å‘ä¸‹çš„æ•°æ®è·¯å¾„ï¼ˆå•å‘å‘é€ï¼‰å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Android App
â†’ Java ç½‘ç»œåº“
â†’ libc
â†’ Linux ç½‘ç»œåè®®æ ˆ
â†’ virtio-net é©±åŠ¨
â†’ virtqueue / shared memory
â†’ qvm process ä¸­çš„ vdev-virtio-net
â†’ QNX Host io-pkt ä¸­çš„ vdevpeer
â†’ bridge / route / VLAN
â†’ ç‰©ç†ç½‘å¡é©±åŠ¨
â†’ T-Box / å¤–éƒ¨ç½‘ç»œ&lt;/p&gt;</description></item><item><title>ä½¿ç”¨ Visual Studio Code é«˜æ•ˆå¼€å‘ AOSP</title><link>https://ethen-cao.github.io/ethenslab/android-dev/debug/vscode-aosp/</link><pubDate>Wed, 01 Oct 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/debug/vscode-aosp/</guid><description>&lt;h2 id="æ¦‚è¿°"&gt;&lt;strong&gt;æ¦‚è¿°&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡æ¡£æ—¨åœ¨ä¸º AOSP å¼€å‘è€…æä¾›ä¸€ä»½è¯¦å°½çš„æŒ‡å—ï¼Œè¯´æ˜å¦‚ä½•å°† Visual Studio Code (VS Code) é…ç½®æˆä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€å“åº”è¿…é€Ÿçš„ C/C++/Java ä»£ç å¼€å‘ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;ä¼ ç»Ÿçš„ AOSP å¼€å‘å¯èƒ½ä¾èµ–äºåŠŸèƒ½å¼ºå¤§ä½†èµ„æºæ¶ˆè€—å·¨å¤§çš„ IDEï¼ˆå¦‚ Android Studio for platform a.k.a. IntelliJï¼‰ï¼Œæˆ–è€…çº¯æ–‡æœ¬ç¼–è¾‘å™¨æ­é…å‘½ä»¤è¡Œå·¥å…·ã€‚æœ¬æŒ‡å—é‡‡ç”¨ &lt;code&gt;VS Code&lt;/code&gt; + &lt;code&gt;clangd&lt;/code&gt; çš„ç»„åˆï¼Œæ—¨åœ¨è¾¾åˆ°ä¸¤è€…çš„å¹³è¡¡ï¼šæ—¢æ‹¥æœ‰ç°ä»£ IDE çš„å¼ºå¤§ä»£ç å¯¼èˆªå’Œæ™ºèƒ½æ„ŸçŸ¥èƒ½åŠ›ï¼Œåˆä¿æŒäº†è½»é‡çº§ç¼–è¾‘å™¨çš„æµç•…ä½“éªŒã€‚&lt;/p&gt;
&lt;h2 id="æ ¸å¿ƒä¼˜åŠ¿"&gt;&lt;strong&gt;æ ¸å¿ƒä¼˜åŠ¿&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æè‡´æ€§èƒ½&lt;/strong&gt;ï¼š&lt;code&gt;clangd&lt;/code&gt; æä¾›äº†æ¯”å…¶ä»–æ–¹æ¡ˆæ›´å¿«çš„ç´¢å¼•é€Ÿåº¦å’Œè¿‘ä¹ç¬æ—¶çš„ä»£ç è¡¥å…¨ã€è·³è½¬å“åº”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜åº¦ç²¾ç¡®&lt;/strong&gt;ï¼š&lt;code&gt;clangd&lt;/code&gt; ä¸ AOSP ä½¿ç”¨çš„ Clang ç¼–è¯‘å™¨åŒæºï¼Œå…¶ä»£ç åˆ†æã€é”™è¯¯å’Œè­¦å‘Šæç¤ºä¸å®é™…ç¼–è¯‘ç»“æœå‡ ä¹å®Œå…¨ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºå‹å¥½&lt;/strong&gt;ï¼šç›¸è¾ƒäºå¤§å‹ IDEï¼Œæ­¤æ–¹æ¡ˆåœ¨å¤„ç†åºå¤§çš„ AOSP ä»£ç åº“æ—¶ï¼Œå†…å­˜å’Œ CPU å ç”¨æ›´ä¼˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜åº¦å¯å®šåˆ¶&lt;/strong&gt;ï¼šå¯ä»¥æ ¹æ®ä¸ªäººä¹ æƒ¯ï¼Œé€šè¿‡ä¸°å¯Œçš„ VS Code æ‰©å±•ç”Ÿæ€æ‰“é€ ä¸“å±çš„å¼€å‘ç¯å¢ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å‰æœŸå‡†å¤‡-prerequisites"&gt;&lt;strong&gt;å‰æœŸå‡†å¤‡ (Prerequisites)&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨å¼€å§‹é…ç½® VS Code ä¹‹å‰ï¼Œè¯·ç¡®ä¿å®Œæˆä»¥ä¸‹å‡†å¤‡å·¥ä½œã€‚&lt;/p&gt;
&lt;h3 id="ç¡¬ä»¶å»ºè®®"&gt;&lt;strong&gt;ç¡¬ä»¶å»ºè®®&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;AOSP æ˜¯ä¸€ä¸ªå·¨å‹é¡¹ç›®ã€‚ä¸ºäº†è·å¾—æµç•…ä½“éªŒï¼Œå»ºè®®æ‚¨çš„å¼€å‘è®¾å¤‡æ»¡è¶³ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ (RAM)&lt;/strong&gt;: 32 GB æˆ–æ›´å¤šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨ (Storage)&lt;/strong&gt;: é«˜é€Ÿ SSDï¼Œå¹¶ç¡®ä¿æœ‰è‡³å°‘ 500 GB çš„å¯ç”¨ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CPU&lt;/strong&gt;: 8 æ ¸æˆ–æ›´å¤šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="aosp-æºç åŒæ­¥"&gt;&lt;strong&gt;AOSP æºç åŒæ­¥&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ç¡®ä¿æ‚¨å·²æˆåŠŸå°† AOSP æºç åŒæ­¥åˆ°æœ¬åœ°ã€‚æœ¬æ–‡æ¡£ä¸­çš„æ‰€æœ‰è·¯å¾„éƒ½å°†ä»¥ AOSP çš„æ ¹ç›®å½•ä½œä¸ºåŸºå‡†ã€‚&lt;/p&gt;</description></item><item><title>Android App Java Crash æ•æ‰æµç¨‹åˆ†æ</title><link>https://ethen-cao.github.io/ethenslab/android-dev/perf--stability/android-exception-handler/</link><pubDate>Mon, 29 Sep 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/perf--stability/android-exception-handler/</guid><description>&lt;p&gt;åœ¨ Android ç³»ç»Ÿä¸­ï¼ŒJava å±‚çš„å´©æºƒï¼ˆCrashï¼‰æ•æ‰å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„è¿›ç¨‹å†…è¡Œä¸ºï¼Œè€Œæ˜¯ä¸€å¥—ä» &lt;strong&gt;App è¿›ç¨‹&lt;/strong&gt; åˆ° &lt;strong&gt;System Server è¿›ç¨‹&lt;/strong&gt; è·¨è¿›ç¨‹åä½œçš„å¤æ‚æœºåˆ¶ã€‚ç†è§£è¿™ä¸€æµç¨‹å¯¹äºå®šä½ç¨³å®šæ€§é—®é¢˜è‡³å…³é‡è¦ï¼Œä¸‹é¢æ˜¯è¯¦ç»†çš„æ—¶åºå›¾ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
skinparam theme plain
skinparam shadowing false
skinparam DefaultFontName &amp;#34;SansSerif&amp;#34;
skinparam DefaultFontSize 12
skinparam ActivityIconSize 42
&amp;#39; å¼ºåˆ¶é»‘å­—ä»¥æé«˜å¯è§æ€§
skinparam sequence {
ParticipantPadding 30
MessageAlign center
ArrowColor #263238
ActorBorderColor #263238
LifeLineBorderColor #263238
ParticipantBorderColor #263238
ParticipantBackgroundColor #ECEFF1
ParticipantFontColor #000000
GroupBorderColor #263238
GroupFontColor #000000
}
participant &amp;#34;App Process\n(JVM)&amp;#34; as App
participant &amp;#34;RuntimeInit&amp;#34; as RI
participant &amp;#34;ActivityManagerService\n(AMS)&amp;#34; as AMS
participant &amp;#34;AppErrors&amp;#34; as AE
participant &amp;#34;DropBoxManagerService&amp;#34; as DBMS
participant &amp;#34;Statsd\n(Native Daemon)&amp;#34; as Statsd
== é˜¶æ®µ 1: å¼‚å¸¸æ•è·ä¸å †æ ˆæå– (App è¿›ç¨‹) ==
App -&amp;gt; App : æŠ›å‡º Exception
note right: JVM è‡ªåŠ¨å¡«å…… Throwable å¯¹è±¡çš„ backtrace (Native æ ˆå¸§)
App -&amp;gt; RI : dispatchUncaughtException(e)
activate RI
RI -&amp;gt; RI : LoggingHandler.uncaughtException(e)
RI -&amp;gt; RI : logUncaught(..., e)
note right: **é¦–æ¬¡æå–å †æ ˆ**ï¼šè°ƒç”¨ e.printStackTrace() \nå°†å†…å­˜å †æ ˆè½¬æ¢ä¸º String è¾“å‡ºè‡³ Logcat
RI -&amp;gt; RI : new ParcelableCrashInfo(e)
note right: **å †æ ˆå°è£…**ï¼šå°† Throwable åºåˆ—åŒ–ä¸º \nCrashInfo å­—ç¬¦ä¸²ï¼Œå‡†å¤‡è·¨è¿›ç¨‹ä¼ è¾“
RI -&amp;gt; AMS : handleApplicationCrash(token, crashInfo)
activate AMS
== é˜¶æ®µ 2: ç³»ç»Ÿçº§çŠ¶æ€è®°å½•ä¸ç»Ÿè®¡ (system_server) ==
AMS -&amp;gt; AMS : handleApplicationCrashInner()
group å¢é‡ç»Ÿè®¡ (Incremental Metrics)
AMS -&amp;gt; AMS : æ£€æŸ¥æ˜¯å¦ä¸º Incremental package
end
group ä¸ Statsd äº¤äº’ (FrameworkStatsLog)
AMS -&amp;gt; Statsd : FrameworkStatsLog.write(APP_CRASH_OCCURRED, ...)
note right: åŒ…å« crashInfo ä¸­çš„ Exception Name
end
group æŒä¹…åŒ–è®°å½• (DropBox)
AMS -&amp;gt; DBMS : addErrorToDropBox(..., crashInfo)
activate DBMS
DBMS -&amp;gt; DBMS : å¼‚æ­¥å¯åŠ¨ Worker Thread
DBMS -&amp;gt; DBMS : **å †æ ˆè½ç›˜**ï¼šå°† crashInfo.stackTrace \nä¸å…¶ä»– Header ä¿¡æ¯æ‹¼æ¥å¹¶å†™å…¥ \n/data/system/dropbox/ å‹ç¼©æ–‡ä»¶
DBMS --&amp;gt; AMS : è¿”å›
deactivate DBMS
end
== é˜¶æ®µ 3: ç­–ç•¥å†³ç­–ä¸ UI å¤„ç† (AppErrors) ==
AMS -&amp;gt; AE : crashApplication(r, crashInfo)
activate AE
AE -&amp;gt; AE : noteAppKill()
note right: å°†å †æ ˆæ‘˜è¦å­˜å…¥ AppExitInfoManager
AE -&amp;gt; AE : handleAppCrashLSPB()
alt è¾¾åˆ°å´©æºƒä¸Šé™ (Bad Process)
AE -&amp;gt; AE : markBadProcess(..., stackTrace)
note right: **æŒä¹…åŒ– Bad çŠ¶æ€**ï¼šå°†å †æ ˆå­˜å…¥ mBadProcesses å†…å­˜æ˜ å°„
AE -&amp;gt; AMS : removeProcessLocked()
else å…è®¸æ˜¾ç¤º UI
AE -&amp;gt; AMS : å‘é€ SHOW_ERROR_UI_MSG
AMS -&amp;gt; AE : AppErrorDialog.show(data)
note right: å¯¹è¯æ¡†ä¸­çš„â€œæ˜¾ç¤ºè¯¦æƒ…â€å³å±•ç¤º crashInfo.stackTrace
end
AE --&amp;gt; AMS : è¿”å›ç»“æœ
deactivate AE
== é˜¶æ®µ 4: æœ€ç»ˆæ¸…ç†ä¸è‡ªæ€ (App è¿›ç¨‹) ==
AMS --&amp;gt; RI : å¤„ç†å®Œæ¯• (Binder è¿”å›)
deactivate AMS
RI -&amp;gt; RI : Process.killProcess(myPid)
RI -&amp;gt; RI : System.exit(10)
deactivate RI
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h2 id="1-æµç¨‹æ¦‚è§ˆ"&gt;1. æµç¨‹æ¦‚è§ˆ&lt;/h2&gt;
&lt;p&gt;å½“ Java å¼‚å¸¸æœªè¢«æ•è·æ—¶ï¼Œè™šæ‹Ÿæœºå°†æ§åˆ¶æƒäº¤ç»™ &lt;code&gt;Thread.UncaughtExceptionHandler&lt;/code&gt;ã€‚Android é»˜è®¤é€šè¿‡ &lt;code&gt;RuntimeInit&lt;/code&gt; ç±»å®‰è£…äº†è‡ªå®šä¹‰å¤„ç†å™¨ï¼Œå¯åŠ¨å››ä¸ªé˜¶æ®µçš„å¤„ç†ï¼š&lt;/p&gt;</description></item><item><title>Android Binder Proxy é™åˆ¶æœºåˆ¶</title><link>https://ethen-cao.github.io/ethenslab/android-dev/perf--stability/android_binderproxy_detection/</link><pubDate>Mon, 29 Sep 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/perf--stability/android_binderproxy_detection/</guid><description>&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/binderproxy.drawio.png" alt="" /&gt;
æœ¬å›¾æè¿°äº† Android ç³»ç»Ÿä¸­ &lt;strong&gt;Binder Proxy æ•°é‡é™åˆ¶ï¼ˆBinderProxy Limitï¼‰&lt;/strong&gt; çš„å®ç°æµç¨‹ï¼Œæ¶‰åŠ &lt;code&gt;ActivityManagerService&lt;/code&gt;ã€&lt;code&gt;BinderInternal&lt;/code&gt;ã€JNI å±‚ã€&lt;code&gt;BpBinder&lt;/code&gt; ç­‰å…³é”®ç»„ä»¶ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="1-å…³é”®æ¨¡å—"&gt;1. å…³é”®æ¨¡å—&lt;/h2&gt;
&lt;h3 id="11-java-å±‚"&gt;1.1 Java å±‚&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ActivityManagerService (AMS)&lt;/strong&gt;
ç³»ç»ŸæœåŠ¡çš„æ ¸å¿ƒï¼Œè´Ÿè´£å¯ç”¨ Binder Proxy é™åˆ¶ï¼Œå¹¶è®¾ç½®å›è°ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;BinderInternal&lt;/strong&gt;
æ¡¥æ¥ AMS ä¸ Native å±‚çš„æ¥å£ç±»ï¼Œæä¾›&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nSetBinderProxyCountEnabled&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;setBinderProxyCountCallback&lt;/code&gt;
ç­‰æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;BinderProxyLimitListener / Delegate&lt;/strong&gt;
å½“è¾¾åˆ° Binder Proxy æ•°é‡ä¸Šé™æ—¶è¢«è§¦å‘ï¼Œæ‰§è¡Œå¯¹åº”çš„å›è°ƒé€»è¾‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="12-native-å±‚-jni"&gt;1.2 Native å±‚ (JNI)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;libandroid_runtime&lt;/strong&gt;
JNI æ¡¥æ¥åº“ï¼Œå®ç°äº† &lt;code&gt;android_os_BinderInternal_setBinderProxyCountEnabled&lt;/code&gt; ä¸å›è°ƒä»£ç† &lt;code&gt;android_os_BinderInternal_proxyLimitcallback&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;libbinder&lt;/strong&gt;
Binder å†…æ ¸é€šä¿¡åº“ï¼Œè´Ÿè´£ Binder ä»£ç†å¯¹è±¡çš„åˆ›å»ºä¸ç®¡ç†ã€‚
å…¶ä¸­ &lt;code&gt;BpBinder::create&lt;/code&gt; åœ¨ç”Ÿæˆ Binder ä»£ç†å¯¹è±¡æ—¶è¿›è¡Œè®¡æ•°ä¸èŠ‚æµã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="2-è°ƒç”¨æµç¨‹"&gt;2. è°ƒç”¨æµç¨‹&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;AMS å¯åŠ¨é™åˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ActivityManagerService&lt;/code&gt; è°ƒç”¨
&lt;code&gt;BinderInternal.nSetBinderProxyCountEnabled(true)&lt;/code&gt;
ä»¥å¯ç”¨ Binder Proxy é™åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¾ç½®å›è°ƒ&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>BinderCallsStatsService æŠ€æœ¯è¯¦è§£</title><link>https://ethen-cao.github.io/ethenslab/android-dev/perf--stability/bindercallsstatsservice/</link><pubDate>Mon, 29 Sep 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/perf--stability/bindercallsstatsservice/</guid><description>&lt;h2 id="1-ç®€ä»‹"&gt;1. ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;BinderCallsStatsService&lt;/code&gt; æ˜¯ Android System Server è¿›ç¨‹ä¸­çš„ä¸€ä¸ªç³»ç»ŸæœåŠ¡ï¼Œç”¨äºæ”¶é›†å’Œç»Ÿè®¡å‘å¾€ &lt;code&gt;system_server&lt;/code&gt; çš„ Binder è°ƒç”¨ä¿¡æ¯ã€‚å®ƒæ˜¯åˆ†æç³»ç»Ÿçº§å¡é¡¿ã€é«˜ CPU å ç”¨ä»¥åŠæ’æŸ¥ ANRï¼ˆApplication Not Respondingï¼‰é—®é¢˜çš„æ ¸å¿ƒå·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒèƒ½å¤Ÿå›ç­”ä»¥ä¸‹å…³é”®é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å“ªä¸ª App åœ¨ç–¯ç‹‚è°ƒç”¨ç³»ç»ŸæœåŠ¡ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å“ªä¸ªç³»ç»Ÿ APIï¼ˆå¦‚ &lt;code&gt;startActivity&lt;/code&gt;ï¼‰æ˜¯å½“å‰çš„æ€§èƒ½ç“¶é¢ˆï¼Ÿ&lt;/li&gt;
&lt;li&gt;ç³»ç»ŸæœåŠ¡çš„å¡é¡¿æ˜¯å› ä¸º CPU è€—æ—¶è¿‡é•¿ï¼Œè¿˜æ˜¯å› ä¸ºé”ç«äº‰å¯¼è‡´çš„æ’é˜Ÿï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="2-å®ç°åŸç†"&gt;2. å®ç°åŸç†&lt;/h2&gt;
&lt;h3 id="21-æ ¸å¿ƒæœºåˆ¶"&gt;2.1 æ ¸å¿ƒæœºåˆ¶&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;BinderCallsStatsService&lt;/code&gt; çš„å®ç°åŸºäº Android Binder æ¡†æ¶æä¾›çš„ &lt;strong&gt;Observerï¼ˆè§‚å¯Ÿè€…ï¼‰æ¨¡å¼&lt;/strong&gt;ã€‚å®ƒå¹¶ä¸ä¾èµ–åº•å±‚çš„ Linux Kernel Traceï¼Œè€Œæ˜¯é€šè¿‡ Hook Java å±‚çš„ Binder åˆ†å‘å…¥å£å®ç°çš„ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ³¨å…¥ (Injection)&lt;/strong&gt;: æœåŠ¡å¯åŠ¨æ—¶ï¼Œé€šè¿‡ &lt;code&gt;Binder.setObserver()&lt;/code&gt; å°†è‡ªèº«æ³¨å†Œä¸ºå…¨å±€ Binder ç›‘å¬å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‹¦æˆª (Interception)&lt;/strong&gt;: æ‰€æœ‰å‘å¾€å½“å‰è¿›ç¨‹ï¼ˆsystem_serverï¼‰çš„ Binder è¯·æ±‚ï¼Œåœ¨æ‰§è¡Œå…·ä½“çš„ Service æ–¹æ³•ï¼ˆå¦‚ &lt;code&gt;AMS.startActivity&lt;/code&gt;ï¼‰ä¹‹å‰ï¼Œéƒ½ä¼šå…ˆç»è¿‡ &lt;code&gt;Binder.execTransact&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»Ÿè®¡ (Measurement)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Call Started&lt;/strong&gt;: è®°å½•å¼€å§‹æ—¶çš„ CPU æ—¶é—´ï¼ˆThread Timeï¼‰å’Œå¢™ä¸Šæ—¶é—´ï¼ˆRealtimeï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Call Ended&lt;/strong&gt;: è®°å½•ç»“æŸæ—¶é—´ï¼Œè®¡ç®—å·®å€¼ï¼Œå¹¶ç»Ÿè®¡æ•°æ®åŒ…å¤§å°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èšåˆ (Aggregation)&lt;/strong&gt;: æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­çš„å“ˆå¸Œè¡¨ä¸­ï¼ŒæŒ‰ UID å’Œæ–¹æ³•åèšåˆï¼Œé¿å…æ— é™å¢é•¿ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="22-æ¶æ„æ—¶åºå›¾-plantuml"&gt;2.2 æ¶æ„æ—¶åºå›¾ (PlantUML)&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸‹å›¾è¡¨å±•ç¤ºäº† Binder è°ƒç”¨æ˜¯å¦‚ä½•è¢«æ‹¦æˆªå’Œç»Ÿè®¡çš„ï¼š&lt;/p&gt;</description></item><item><title> Android InputChannel åŸç†ä¸ç”Ÿå‘½å‘¨æœŸè¯¦è§£</title><link>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/inputchannel/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/inputchannel/</guid><description>&lt;h2 id="1-ä»€ä¹ˆæ˜¯-inputchannel"&gt;1. ä»€ä¹ˆæ˜¯ InputChannelï¼Ÿ&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;InputChannel&lt;/strong&gt; æ˜¯ Android è¾“å…¥ç³»ç»Ÿï¼ˆInput Systemï¼‰ä¸­ç”¨äºè·¨è¿›ç¨‹ä¼ è¾“è¾“å…¥äº‹ä»¶ï¼ˆå¦‚è§¦æ‘¸ã€æŒ‰é”®ï¼‰çš„æ ¸å¿ƒé€šä¿¡æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯è¿æ¥ &lt;strong&gt;SystemServer (InputDispatcher)&lt;/strong&gt; å’Œ &lt;strong&gt;åº”ç”¨ç¨‹åº (App Window)&lt;/strong&gt; ä¹‹é—´çš„ä¸€æ¡&lt;strong&gt;å…¨åŒå·¥ç®¡é“&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="æ ¸å¿ƒç‰¹æ€§"&gt;æ ¸å¿ƒç‰¹æ€§&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸºäº Socket Pair&lt;/strong&gt;ï¼šåº•å±‚é€šè¿‡ Linux çš„ &lt;code&gt;socketpair&lt;/code&gt; (AF_UNIX, SOCK_SEQPACKET) å®ç°ã€‚è¿™æ„å‘³ç€å®ƒä¸ä»…ä»…æ˜¯å•å‘é€šçŸ¥ï¼Œè¿˜æ”¯æŒåŒå‘é€šä¿¡ï¼ˆäº‹ä»¶å‘é€ -&amp;gt; å¤„ç†å®Œæˆ ACKï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨è¿›ç¨‹ä¼ è¾“&lt;/strong&gt;ï¼šé€šè¿‡ Binder å°† Client ç«¯çš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰ä¼ é€’ç»™åº”ç”¨è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— é”/é«˜æ€§èƒ½&lt;/strong&gt;ï¼šåˆ©ç”¨ Socket ç¼“å†²åŒºä¼ è¾“æ•°æ®ï¼Œç»“åˆ &lt;code&gt;epoll&lt;/code&gt; æœºåˆ¶ï¼Œä¸éœ€è¦å¤æ‚çš„ Binder è°ƒç”¨å³å¯å®Œæˆé«˜é¢‘çš„ MotionEvent ä¼ è¾“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2-inputchannel-çš„æ¶æ„æ¨¡å‹"&gt;2. InputChannel çš„æ¶æ„æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;æ¯ä¸ªèƒ½å¤Ÿæ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„çª—å£ï¼ˆWindowï¼‰ï¼Œåœ¨ SystemServer ç«¯éƒ½å¯¹åº”ä¸€ä¸ª &lt;code&gt;Connection&lt;/code&gt; å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æŒæœ‰ä¸€ä¸ª Server ç«¯çš„ &lt;code&gt;InputChannel&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Server ç«¯ (InputDispatcher)&lt;/strong&gt;: æŒæœ‰ Socket çš„ä¸€ç«¯ï¼ˆå†™ç«¯ï¼‰ï¼Œè´Ÿè´£å†™å…¥ InputEventã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Client ç«¯ (App Window)&lt;/strong&gt;: æŒæœ‰ Socket çš„å¦ä¸€ç«¯ï¼ˆè¯»ç«¯ï¼‰ï¼Œè´Ÿè´£è¯»å– InputEventï¼Œå¹¶å›å¤ Finished ä¿¡å·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="3-ç”Ÿå‘½å‘¨æœŸåˆ›å»º-creation"&gt;3. ç”Ÿå‘½å‘¨æœŸï¼šåˆ›å»º (Creation)&lt;/h2&gt;
&lt;p&gt;InputChannel çš„åˆ›å»ºä¼´éšç€çª—å£ï¼ˆWindowï¼‰çš„æ·»åŠ è¿‡ç¨‹ã€‚&lt;/p&gt;</description></item><item><title> Android InputMethod äº¤äº’æµç¨‹æŠ€æœ¯è¯´æ˜æ–‡æ¡£</title><link>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/inputmethodservice/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/inputmethodservice/</guid><description>&lt;h3 id="1-æµç¨‹è¯¦ç»†è§£æ"&gt;1. æµç¨‹è¯¦ç»†è§£æ&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme plain
autonumber
skinparam backgroundColor white
skinparam boxPadding 10
skinparam noteBackgroundColor #FFFFA0
skinparam noteBorderColor #808080
skinparam participantBackgroundColor white
actor &amp;#34;User&amp;#34; as User
box &amp;#34;æ–°åº”ç”¨è¿›ç¨‹ (New App - æŠ¢ç„¦è€…)&amp;#34; #Honeydew
participant &amp;#34;ViewRootImpl&amp;#34; as VRI
participant &amp;#34;ImeFocusController&amp;#34; as Controller
participant &amp;#34;InputMethodManager\n(IMM)&amp;#34; as IMM
participant &amp;#34;IInputMethodClient\n(Stub)&amp;#34; as ClientStub
participant &amp;#34;View (EditText)&amp;#34; as EditText
participant &amp;#34;InputConnection\n(Binder Stub)&amp;#34; as IC_Stub
end box
box &amp;#34;ç³»ç»ŸæœåŠ¡ (System Server)&amp;#34; #LightBlue
participant &amp;#34;WindowManagerService\n(WMS)&amp;#34; as WMS
participant &amp;#34;InputMethodManagerService\n(IMMS)&amp;#34; as IMMS
end box
box &amp;#34;è¾“å…¥æ³•è¿›ç¨‹ (IME Process)&amp;#34; #MistyRose
participant &amp;#34;InputMethodService\n(IME)&amp;#34; as IME
participant &amp;#34;IInputContext\n(Binder Proxy)&amp;#34; as IC_Proxy
end box
box &amp;#34;æ—§åº”ç”¨è¿›ç¨‹ (Old App - å—å®³è€…)&amp;#34; #LightGrey
participant &amp;#34;IInputMethodClient\n(Stub)&amp;#34; as Old_Stub
participant &amp;#34;InputMethodManager\n(IMM)&amp;#34; as Old_IMM
end box
== ç¬¬ä¸€é˜¶æ®µï¼šè¿æ¥å»ºç«‹ä¸åˆ‡æ¢ (Switch Client) ==
note right of WMS: App å¯åŠ¨ï¼Œçª—å£æ·»åŠ å®Œæˆ
WMS -&amp;gt; VRI: **windowFocusChanged**(true)
activate VRI
VRI -&amp;gt; VRI: handleWindowFocusChanged()
VRI -&amp;gt; Controller: **onPostWindowFocus**()
activate Controller
Controller -&amp;gt; Controller: check **mayUseInputMethod**
Controller -&amp;gt; IMM: **onPostWindowGainedFocus**()
activate IMM
IMM -&amp;gt; IMM: **startInputInner**()
group å…³é”®ï¼šåˆ›å»ºé€šä¿¡å¯¹è±¡
IMM -&amp;gt; EditText: **onCreateInputConnection**()
activate EditText
EditText --&amp;gt; IMM: return **InputConnection**
deactivate EditText
end
IMM -&amp;gt; IMMS: **startInputOrWindowGainedFocus**(client=Stub, inputContext=IC_Stub)
activate IMMS
note right of IMMS
**æœåŠ¡ç«¯é€»è¾‘ (Switch Client)ï¼š**
1. å‘ç°è¯·æ±‚è€…(New) != å½“å‰è®°å½•(Old)
2. **å¿…é¡»å…ˆæ¸…ç†æ—§çŠ¶æ€**
3. å†ç»‘å®šæ–°åº”ç”¨
end note
group [æ–°å¢] é€šçŸ¥æ—§åº”ç”¨æ–­å¼€è¿æ¥ (Unbind Sequence)
IMMS -&amp;gt; Old_Stub: **onUnbindMethod**(sequence, UNBIND_REASON_SWITCH_CLIENT)
activate Old_Stub
note right of Old_Stub
**åå‘æ§åˆ¶ç”Ÿæ•ˆï¼š**
ç³»ç»Ÿé€šçŸ¥æ—§åº”ç”¨ä¸‹çº¿
end note
Old_Stub -&amp;gt; Old_IMM: sendMessage(MSG_UNBIND)
activate Old_IMM
Old_IMM -&amp;gt; Old_IMM: **closeCurrentInput()**
note right of Old_IMM
1. é”€æ¯ InputChannel
2. æ–­å¼€ InputConnection
3. åœæ­¢å…‰æ ‡é—ªçƒ
end note
deactivate Old_IMM
deactivate Old_Stub
end
IMMS -&amp;gt; IME: **startInput**(inputContext=IC_Proxy)
activate IME
IME -&amp;gt; IME: ä¿å­˜ IC_Proxy (æŒæœ‰ New App çš„æ“ä½œå¥æŸ„)
deactivate IME
IMMS -&amp;gt; ClientStub: **onBindMethod**(res)
activate ClientStub
note right of ClientStub
**åå‘é“¾è·¯ç”Ÿæ•ˆï¼š**
ç³»ç»Ÿå›ä¼  InputChannel (Socket)
end note
ClientStub -&amp;gt; IMM: sendMessage(MSG_BIND)
deactivate ClientStub
IMMS --&amp;gt; IMM: Success
deactivate IMMS
IMM -&amp;gt; IMM: **handleMessage(MSG_BIND)**
note left of IMM
è¿æ¥å»ºç«‹å®Œæˆ
New App æŒæœ‰ IME Channel
IME æŒæœ‰ New App InputConnection
end note
deactivate IMM
deactivate Controller
deactivate VRI
== ç¬¬äºŒé˜¶æ®µï¼šæ˜¾ç¤ºæ§åˆ¶ (Touch -&amp;gt; Show) ==
User -&amp;gt; EditText: ç‚¹å‡»è¾“å…¥æ¡†
activate EditText
EditText -&amp;gt; IMM: **showSoftInput**(view)
activate IMM
IMM -&amp;gt; IMMS: **showSoftInput**(client)
activate IMMS
IMMS -&amp;gt; IME: **showSoftInput**()
activate IME
IME -&amp;gt; IME: **showWindow**(true)
note right of IME
è½¯é”®ç›˜ UI æ­¤æ—¶å¯¹ç”¨æˆ·å¯è§
end note
deactivate IME
deactivate IMMS
deactivate IMM
deactivate EditText
== ç¬¬ä¸‰é˜¶æ®µï¼šæ–‡æœ¬åˆ†å‘ (Typing -&amp;gt; Commit) ==
User -&amp;gt; IME: ç‚¹å‡»è™šæ‹Ÿé”®ç›˜ &amp;#34;A&amp;#34;
activate IME
IME -&amp;gt; IME: onCodeInput(&amp;#34;A&amp;#34;)
note right of IME
**æ ¸å¿ƒäº¤äº’ï¼š**
IME ä½¿ç”¨ä¹‹å‰ä¿å­˜çš„ Proxy
ç›´æ¥æ“ä½œ App å†…éƒ¨çŠ¶æ€
end note
IME -&amp;gt; IC_Proxy: **commitText**(&amp;#34;A&amp;#34;, 1)
activate IC_Proxy
IC_Proxy -&amp;gt; IC_Stub: **IPC: Transmit Text**
deactivate IC_Proxy
activate IC_Stub
note left of IC_Stub
**App è¿›ç¨‹å“åº”ï¼š**
Binder çº¿ç¨‹æ”¶åˆ°æ•°æ®
ä¿®æ”¹ Editable Buffer
end note
IC_Stub -&amp;gt; EditText: **Editable.replace**(...)
EditText -&amp;gt; VRI: invalidate() -&amp;gt; onDraw()
deactivate IC_Stub
VRI -&amp;gt; User: å±å¹•æ˜¾ç¤ºå­—ç¬¦ &amp;#34;A&amp;#34;
deactivate IME
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ¬èŠ‚å¯¹åº”æ—¶åºå›¾ä¸­çš„ä¸‰ä¸ªæ ¸å¿ƒé˜¶æ®µï¼Œæè¿°ä»£ç å±‚é¢çš„æ‰§è¡Œé€»è¾‘ã€‚&lt;/p&gt;</description></item><item><title> Android çª—å£ç„¦ç‚¹æŠ¢å ä¸è¾“å…¥æ³•è¿æ¥æ–­å¼€æŠ€æœ¯æ—¶åºåˆ†æ</title><link>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/inputmethod/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/inputmethod/</guid><description>&lt;h3 id="1-æ¦‚è¿°"&gt;1. æ¦‚è¿°&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme plain
autonumber
skinparam backgroundColor white
skinparam participantBackgroundColor white
skinparam boxPadding 10
skinparam noteBackgroundColor #FFFFA0
skinparam noteBorderColor #808080
actor &amp;#34;User&amp;#34; as User
box &amp;#34;åº”ç”¨è¿›ç¨‹ A (Overlay - å½“å‰ç„¦ç‚¹æŒæœ‰è€…)&amp;#34; #MistyRose
participant &amp;#34;ViewRootImpl&amp;#34; as Overlay_VRI
participant &amp;#34;ImeFocusController&amp;#34; as Overlay_Ctrl
participant &amp;#34;InputMethodManager\n(IMM)&amp;#34; as Overlay_IMM
end box
box &amp;#34;ç³»ç»ŸæœåŠ¡ (System Server)&amp;#34; #LightBlue
participant &amp;#34;InputDispatcher&amp;#34; as InputDispatcher
participant &amp;#34;WindowManagerService\n(WMS)&amp;#34; as WMS
participant &amp;#34;DisplayContent\n(DC)&amp;#34; as DC
participant &amp;#34;InputMethodManagerService\n(IMMS)&amp;#34; as IMMS
end box
box &amp;#34;åº”ç”¨è¿›ç¨‹ B (Browser - è§¦æ‘¸äº‹ä»¶æ¥æ”¶è€…)&amp;#34; #Honeydew
participant &amp;#34;ViewRootImpl&amp;#34; as Browser_VRI
participant &amp;#34;Browser\nActivity&amp;#34; as Browser
participant &amp;#34;InputMethodManager\n(IMM)&amp;#34; as Browser_IMM
end box
== ç¬¬ä¸€é˜¶æ®µï¼šOverlay çª—å£æ·»åŠ ä¸ç„¦ç‚¹è®¡ç®— ==
Overlay_VRI -&amp;gt; WMS: &amp;lt;color:red&amp;gt;**addWindow**(TYPE_APPLICATION_OVERLAY)Flags ä¸­**æœªåŒ…å«** FLAG_NOT_FOCUSABLE
activate WMS
WMS -&amp;gt; WMS: **addWindowInner**() -&amp;gt; **updateFocusedWindowLocked**()
group WMS ç„¦ç‚¹æ›´æ–°é€»è¾‘
WMS -&amp;gt; DC: **findFocusedWindowIfNeeded**()
activate DC
DC -&amp;gt; DC: éå†çª—å£åˆ—è¡¨ (Z-Order Top-Down)
DC -&amp;gt; DC: æ£€æŸ¥ Overlay WindowState
DC -&amp;gt; DC: **mayUseInputMethod**(flags)
note right of DC
**åˆ¤å®šé€»è¾‘ï¼š**
return (flags &amp;amp; FLAG_NOT_FOCUSABLE) == 0;
**ç»“æœï¼šTRUE**
(ç³»ç»Ÿåˆ¤å®šè¯¥çª—å£å…·å¤‡å¤„ç† IME è¾“å…¥çš„èƒ½åŠ›)
end note
DC --&amp;gt; WMS: è¿”å› **newFocus = Overlay**
deactivate DC
end
WMS -&amp;gt; WMS: **mCurrentFocus = Overlay**
par å¹¶å‘é€šçŸ¥ç„¦ç‚¹å˜æ›´
WMS -&amp;gt; Overlay_VRI: **windowFocusChanged**(hasWindowFocus=true)
WMS -&amp;gt; Browser_VRI: **windowFocusChanged**(hasWindowFocus=false)
end
deactivate WMS
== ç¬¬äºŒé˜¶æ®µï¼šOverlay å»ºç«‹è¾“å…¥æ³•è¿æ¥ ==
activate Overlay_VRI
note right of Overlay_VRI
è§¦å‘æ¡ä»¶ï¼š
1. æ”¶åˆ° windowFocusChanged å›è°ƒ
2. æˆ–æ‰§è¡Œ performTraversals å¸ƒå±€éå†
end note
Overlay_VRI -&amp;gt; Overlay_Ctrl: **onPostWindowFocus**() / **onTraversal**()
activate Overlay_Ctrl
Overlay_Ctrl -&amp;gt; Overlay_Ctrl: check **mayUseInputMethod**() == true
Overlay_Ctrl -&amp;gt; Overlay_IMM: **onPostWindowGainedFocus**()
activate Overlay_IMM
note right of Overlay_IMM
**IPC è¯·æ±‚ï¼š**
è¯·æ±‚å»ºç«‹è¾“å…¥è¿æ¥
end note
Overlay_IMM -&amp;gt; IMMS: **startInputOrWindowGainedFocus**(\n reason=WINDOW_FOCUS_GAIN,\n client=Overlay,\n windowToken=OverlayToken)
activate IMMS
== ç¬¬ä¸‰é˜¶æ®µï¼šIMMS æ‰§è¡Œå®¢æˆ·ç«¯åˆ‡æ¢ä¸è§£ç»‘ ==
group IMMS æœåŠ¡ç«¯å¤„ç†
IMMS -&amp;gt; IMMS: **startInputOrWindowGainedFocusInternalLocked**()
IMMS -&amp;gt; IMMS: check **mCurClient (Browser) != newClient (Overlay)**
IMMS -&amp;gt; IMMS: **prepareClientSwitchLocked**()
IMMS -&amp;gt; IMMS: **unbindCurrentClientLocked**(SWITCH_CLIENT)
activate IMMS #FFBBBB
note right of IMMS
**çŠ¶æ€æ¸…ç†ï¼š**
1. userData.mCurClient.mClient.setActive(false)
-&amp;gt; é€šçŸ¥ Browser åœæ­¢è¾“å…¥æ´»åŠ¨
2. finishSessionLocked(session)
-&amp;gt; é”€æ¯ Browser çš„ InputChannel
3. **mCurClient = null**
end note
deactivate IMMS
IMMS -&amp;gt; IMMS: **mCurClient = Overlay**
note right of IMMS
**å½“å‰çŠ¶æ€ï¼š**
IMMS æœåŠ¡ç«¯è®°å½•çš„ Client å·²å˜æ›´ä¸º Overlay
end note
end
IMMS --&amp;gt; Overlay_IMM: return InputBindResult (SUCCESS)
deactivate IMMS
deactivate Overlay_IMM
deactivate Overlay_Ctrl
deactivate Overlay_VRI
== ç¬¬å››é˜¶æ®µï¼šè§¦æ‘¸äº‹ä»¶æ´¾å‘ (Touch Dispatch) ==
User -&amp;gt; InputDispatcher: ç‚¹å‡»å±å¹• (Touch Down)
activate InputDispatcher
note right of InputDispatcher
**äº‹ä»¶æ´¾å‘é€»è¾‘ï¼š**
è™½ç„¶ Overlay Z-Order æœ€é«˜ï¼Œä½†è®¾ç½®äº†
FLAG_NOT_TOUCH_MODAL (æˆ–ç‚¹å‡»åŒºåŸŸåœ¨ Overlay èŒƒå›´å¤–)
äº‹ä»¶å‘ä¸‹ç©¿é€
end note
InputDispatcher -&amp;gt; Browser_VRI: **InputEvent (ACTION_DOWN)**
deactivate InputDispatcher
activate Browser_VRI
Browser_VRI -&amp;gt; Browser: **dispatchTouchEvent**()
Browser -&amp;gt; Browser: View.onTouchEvent() -&amp;gt; performClick()
note right of Browser
Browser èƒ½å¤Ÿæ¥æ”¶ç‚¹å‡»äº‹ä»¶
ä½†æ­¤æ—¶ Window ç„¦ç‚¹å·²ä¸¢å¤± (HasFocus=false)
end note
== ç¬¬äº”é˜¶æ®µï¼šè¯·æ±‚è¾“å…¥æ³•å¤±è´¥ ==
Browser -&amp;gt; Browser_IMM: **showSoftInput**(view)
activate Browser_IMM
group IMM å®¢æˆ·ç«¯è‡ªæ£€
Browser_IMM -&amp;gt; Browser_IMM: **checkFocus**()
Browser_IMM -&amp;gt; Browser_IMM: **hasServedByInputMethodLocked**()
note left
**å¤±è´¥ç‚¹ A (å®¢æˆ·ç«¯æ‹¦æˆª)ï¼š**
ç”±äºä¹‹å‰æ”¶åˆ° windowFocusChanged(false)
ViewRootImpl åˆ¤å®šå½“å‰çª—å£æ— ç„¦ç‚¹
mServedView å¯èƒ½ä¸º null æˆ–ä¸åŒ¹é…
**Result: return false** (Log: &amp;#34;Ignoring... is not served&amp;#34;)
end note
end
alt å‡è®¾ç»•è¿‡å®¢æˆ·ç«¯æ£€æŸ¥ (å¼ºåˆ¶è¯·æ±‚æœåŠ¡ç«¯)
Browser_IMM -&amp;gt; IMMS: **showSoftInput**(client=Browser)
activate IMMS
IMMS -&amp;gt; IMMS: check **mCurClient (Overlay) == client (Browser)**
note left of IMMS #FFAAAA
**å¤±è´¥ç‚¹ B (æœåŠ¡ç«¯æ‹’ç»)ï¼š**
Validation Failed.
è¯·æ±‚è€… Browser ä¸å½“å‰è®°å½•çš„ mCurClient (Overlay) ä¸ä¸€è‡´ã€‚
end note
IMMS --&amp;gt;&amp;gt; Browser_IMM: return false
deactivate IMMS
end
Browser_IMM --&amp;gt;&amp;gt; Browser: return false
deactivate Browser_IMM
deactivate Browser_VRI
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ¬æ—¶åºå›¾å±•ç¤ºäº†ä¸€ä¸ªé…ç½®ä¸º &lt;code&gt;TYPE_APPLICATION_OVERLAY&lt;/code&gt; ä½†ç¼ºå¤± &lt;code&gt;FLAG_NOT_FOCUSABLE&lt;/code&gt; å±æ€§çš„æ‚¬æµ®çª—å£ï¼ˆOverlayï¼‰ï¼Œå¦‚ä½•åœ¨ç³»ç»Ÿå±‚ï¼ˆWMSï¼‰å’Œè¾“å…¥æ³•æœåŠ¡å±‚ï¼ˆIMMSï¼‰é€šè¿‡æ ‡å‡†ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œå¼ºåˆ¶å‰¥å¤ºåº•å±‚åº”ç”¨ï¼ˆBrowserï¼‰çš„è¾“å…¥æ³•è¿æ¥æƒï¼ˆInput Connectionï¼‰ï¼Œå¯¼è‡´åº•å±‚åº”ç”¨è™½ç„¶èƒ½å“åº”ç‚¹å‡»ä½†æ— æ³•å¼¹å‡ºè½¯é”®ç›˜çš„å¼‚å¸¸æµç¨‹ã€‚&lt;/p&gt;</description></item><item><title>Activity è·¨å±å¹•è¿ç§»</title><link>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/activity-reparent/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/activity-reparent/</guid><description>&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/activity-reparent.png" alt="" /&gt;&lt;/p&gt;
&lt;h2 id="åˆ†æ­¥è¯´æ˜ä¸ç”Ÿå‘½å‘¨æœŸæ˜ å°„"&gt;åˆ†æ­¥è¯´æ˜ï¼ˆä¸ç”Ÿå‘½å‘¨æœŸæ˜ å°„ï¼‰&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Launcher å‘èµ·&lt;/strong&gt;ï¼šç”¨æˆ·ç‚¹å‡» â†’ Launcher æ„é€  &lt;code&gt;Intent&lt;/code&gt;ï¼ˆå¸¦ &lt;code&gt;launchDisplayId=2&lt;/code&gt;ï¼‰å¹¶è°ƒç”¨ &lt;code&gt;startActivity()&lt;/code&gt; åˆ° ATMSã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ATMS å†³ç­–&lt;/strong&gt;ï¼šATMS åœ¨ system_server å†…éƒ¨æŸ¥çœ‹ &lt;code&gt;ActivityRecord/TaskRecord&lt;/code&gt;ï¼Œå†³å®šæŠŠæŸä¸ª Task ä» Display1 ç§»åˆ° Display2ï¼ˆä¿®æ”¹ parentï¼š&lt;code&gt;TaskDisplayArea&lt;/code&gt;ï¼‰ã€‚è¿™ä¸€æ­¥åªæ˜¯æœåŠ¡ç«¯çš„æ•°æ®ç»“æ„å˜åŒ–ï¼Œä¸ä¼šç›´æ¥è°ƒç”¨åº”ç”¨å¯¹è±¡çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åè°ƒ WMS&lt;/strong&gt;ï¼šATMS é€šçŸ¥ WMS å‡†å¤‡çª—å£åˆ‡æ¢ï¼ˆåº”ç”¨ transitionï¼‰ï¼Œä»¥ä¾¿åœ¨ surface å±‚é¢ä¸Šèƒ½åšå¹³æ»‘è¿ç§»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æš‚åœç›®æ ‡ Display ä¸Šçš„å½“å‰å‰å°&lt;/strong&gt;ï¼ˆActivityBï¼‰ï¼šä¸ºäº†ä¿è¯ç›®æ ‡ Display ä¸Šåªä¼šæœ‰ä¸€ä¸ª resumed Activityï¼ŒATMS å…ˆå¯¹ Display2 ä¸Šå½“å‰çš„å‰å° Activityï¼ˆActivityBï¼‰å‘ &lt;code&gt;IApplicationThread.schedulePauseActivity&lt;/code&gt;ï¼Œç­‰å¾…åº”ç”¨è¿›ç¨‹å› ACKï¼ˆpauseFinishedï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æš‚åœå°†è¦è¢«ç§»åŠ¨çš„ ActivityAï¼ˆæº Display1ï¼‰&lt;/strong&gt;ï¼šATMS å¯¹ ActivityA å‘ &lt;code&gt;schedulePauseActivity&lt;/code&gt;ï¼Œåº”ç”¨è¿›ç¨‹è¿›å…¥ &lt;code&gt;onPause()&lt;/code&gt;ï¼Œå¹¶å› ACKã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿™ä¸€æ­¥éå¸¸é‡è¦ï¼šæŠŠè¦ç§»åŠ¨çš„ Activity ä¿æŒåœ¨é-resumed çŠ¶æ€ï¼Œä¾¿äºæ”¹å˜å®ƒçš„çª—å£æ‰€å± Display/Surfaceã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;WMS åš Window/Surface reparent&lt;/strong&gt;ï¼šATMS è¯·æ±‚ WMS å°†å¯¹åº”çš„ &lt;code&gt;WindowContainer&lt;/code&gt;/task çª—å£æ ‘ä» Display1 ç§»åˆ° Display2ï¼›WMS åœ¨ SurfaceControl å±‚ï¼ˆé€šè¿‡ SurfaceFlingerï¼‰æŠŠ layer é‡æ–° attach åˆ°ç›®æ ‡ Display çš„ layer stackã€‚&lt;/p&gt;</description></item><item><title>Android SurfaceFlinger RenderEngine æ·±åº¦è¯¦è§£</title><link>https://ethen-cao.github.io/ethenslab/android-dev/display/renderengine/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/display/renderengine/</guid><description>&lt;p&gt;RenderEngine æ˜¯ SurfaceFlinger çš„æ¸²æŸ“åç«¯æ ¸å¿ƒï¼Œè´Ÿè´£å°†å„ä¸ªå›¾å±‚ï¼ˆLayerï¼‰çš„å†…å®¹åˆ©ç”¨ GPU åˆæˆåˆ°ä¸€å¸§ç¼“å†²åŒºä¸­ã€‚åœ¨ç°ä»£ Android ç‰ˆæœ¬ä¸­ï¼Œå®ƒåŸºäº &lt;strong&gt;Skia&lt;/strong&gt; å›¾å½¢åº“æ„å»ºï¼Œå®ç°äº†é«˜åº¦çš„æ¨¡å—åŒ–ã€å¤šåç«¯æ”¯æŒï¼ˆGLES/Vulkanï¼‰ä»¥åŠå¼‚æ­¥å¤šçº¿ç¨‹æ¸²æŸ“ã€‚&lt;/p&gt;
&lt;h2 id="1-æ¶æ„æ¦‚è§ˆ-architecture-overview"&gt;1. æ¶æ„æ¦‚è§ˆ (Architecture Overview)&lt;/h2&gt;
&lt;p&gt;RenderEngine é‡‡ç”¨äº† &lt;strong&gt;åˆ†å±‚æ¶æ„&lt;/strong&gt; ä¸ &lt;strong&gt;è£…é¥°å™¨æ¨¡å¼&lt;/strong&gt; çš„è®¾è®¡ã€‚&lt;/p&gt;
&lt;h3 id="11-æ ¸å¿ƒç»„ä»¶æ¶æ„å›¾"&gt;1.1 æ ¸å¿ƒç»„ä»¶æ¶æ„å›¾&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme cerulean
hide empty members
skinparam linetype ortho
skinparam nodesep 60
skinparam ranksep 60
&amp;#39; ==========================================
&amp;#39; 1. æ¥å£ä¸è£…é¥°å™¨å±‚
&amp;#39; ==========================================
package &amp;#34;Interface &amp;amp; Decorator&amp;#34; {
abstract class RenderEngine {
+ {static} create() : unique_ptr&amp;lt;RenderEngine&amp;gt;
+ {abstract} drawLayers()
+ {abstract} mapExternalTextureBuffer()
}
class RenderEngineThreaded {
- mRenderEngine : unique_ptr&amp;lt;RenderEngine&amp;gt;
- mThread : std::thread
- mFunctionCalls : queue&amp;lt;function&amp;gt;
+ drawLayers() : &amp;#34;éé˜»å¡æäº¤&amp;#34;
}
note right of RenderEngineThreaded
&amp;lt;b&amp;gt;çº¿ç¨‹è£…é¥°å™¨&amp;lt;/b&amp;gt;
å°†æ¸²æŸ“è°ƒç”¨è·¨çº¿ç¨‹
åˆ†å‘åˆ°åå°å·¥ä½œçº¿ç¨‹
end note
}
&amp;#39; ==========================================
&amp;#39; 2. æ ¸å¿ƒé€»è¾‘å±‚ (Skia Implementation)
&amp;#39; ==========================================
package &amp;#34;Core Implementation (Skia)&amp;#34; {
abstract class SkiaRenderEngine {
# mTextureCache : TextureCache
# mCaptureCache : CaptureCache
+ drawLayers() : &amp;#34;é€šç”¨ Skia ç»˜åˆ¶é€»è¾‘&amp;#34;
# drawLayersInternal()
}
note right of SkiaRenderEngine
&amp;lt;b&amp;gt;ä¸šåŠ¡é€»è¾‘æ ¸å¿ƒ&amp;lt;/b&amp;gt;
è´Ÿè´£å°† LayerSettings
ç¿»è¯‘ä¸º Skia Canvas æŒ‡ä»¤
end note
}
&amp;#39; ==========================================
&amp;#39; 3. åç«¯é©±åŠ¨å±‚ (Backends)
&amp;#39; ==========================================
package &amp;#34;Backend Drivers&amp;#34; {
class SkiaGLRenderEngine {
- mEGLDisplay : EGLDisplay
- mEGLContext : EGLContext
+ create()
--
(Ganesh GL Backend)
}
class GaneshVkRenderEngine {
- mInstance : VkInstance
- mDevice : VkDevice
+ create()
--
(Ganesh Vulkan Backend)
}
class GraphiteVkRenderEngine {
--
(Graphite Vulkan Backend)
}
}
&amp;#39; å…³ç³»è¿çº¿
RenderEngine &amp;lt;|-- RenderEngineThreaded
RenderEngine &amp;lt;|-- SkiaRenderEngine
SkiaRenderEngine &amp;lt;|-- SkiaGLRenderEngine
SkiaRenderEngine &amp;lt;|-- GaneshVkRenderEngine
SkiaRenderEngine &amp;lt;|-- GraphiteVkRenderEngine
RenderEngineThreaded o-- RenderEngine : åŒ…è£…å®é™…å®ç° (Impl)
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="12-å…³é”®ç»„ä»¶å·¥ä½œæœºåˆ¶"&gt;1.2 å…³é”®ç»„ä»¶å·¥ä½œæœºåˆ¶&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;RenderEngine&lt;/code&gt; (Interface)&lt;/strong&gt;:&lt;/p&gt;</description></item><item><title>Android SurfaceFlinger æ·±åº¦è§£æ</title><link>https://ethen-cao.github.io/ethenslab/android-dev/display/surfaceflinger_composition/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/display/surfaceflinger_composition/</guid><description>&lt;p&gt;SurfaceFlinger æ˜¯ Android å›¾å½¢æ ˆçš„æ ¸å¿ƒç³»ç»ŸæœåŠ¡ï¼Œè´Ÿè´£å…¨ç³»ç»Ÿçš„å›¾å½¢åˆæˆä¸æ˜¾ç¤ºç®¡ç†ã€‚æœ¬æ–‡åŸºäº Android æºç ï¼Œæ·±å…¥å‰–æå…¶ä» Display åˆ›å»ºã€Layer çŠ¶æ€ç®¡ç†ã€åˆæˆç­–ç•¥å†³ç­–åˆ° RenderEngine æ¸²æŸ“æ‰§è¡ŒåŠ HWC æäº¤çš„å®Œæ•´æŠ€æœ¯é“¾è·¯ã€‚&lt;/p&gt;
&lt;h2 id="1-display-åˆ›å»ºè¿‡ç¨‹"&gt;1. Display åˆ›å»ºè¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;åœ¨ SurfaceFlinger ä¸­ï¼Œ&lt;code&gt;Display&lt;/code&gt; æ˜¯ç‰©ç†å±å¹•ï¼ˆç”± HWC ç®¡ç†ï¼‰æˆ–è™šæ‹Ÿå±å¹•ï¼ˆç”±ç³»ç»ŸæœåŠ¡è¯·æ±‚åˆ›å»ºï¼‰çš„æŠ½è±¡å®ä½“ã€‚Display çš„åˆ›å»ºæ˜¯ä¸€ä¸ªå¼‚æ­¥ä¸”å¤šé˜¶æ®µçš„è¿‡ç¨‹ï¼Œæ¶‰åŠå†…æ ¸äº‹ä»¶å“åº”ã€çŠ¶æ€æœºæ›´æ–°åŠæ¸²æŸ“èµ„æºçš„åˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;h3 id="11-æ ¸å¿ƒæµç¨‹æ—¶åºè§£æ"&gt;1.1 æ ¸å¿ƒæµç¨‹æ—¶åºè§£æ&lt;/h3&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†ä»è§¦å‘æºï¼ˆç¡¬ä»¶çƒ­æ’æ‹”æˆ–æœåŠ¡è¯·æ±‚ï¼‰åˆ° SurfaceFlinger å†…éƒ¨å¯¹è±¡åˆå§‹åŒ–çš„å®Œæ•´è°ƒç”¨æ—¶åºã€‚&lt;/p&gt;
&lt;div class="mermaid"&gt;sequenceDiagram
autonumber
%% å®šä¹‰å‚ä¸è€…
participant HWC as HWC/Kernel
participant DisplayManagerService as DisplayManagerService
participant SF as SurfaceFlinger(MainThread)
participant CE as CompositionEngine
participant BQ as BufferQueue
participant VDS as VirtualDisplaySurface
participant FBS as FramebufferSurface
participant DD as DisplayDevice
participant Scheduler as Scheduler
box "è§¦å‘æº (Triggers)" #f9f9f9
participant HWC
participant DisplayManagerService
end
box "SurfaceFlinger" #e1f5fe
participant SF
participant Scheduler
participant DD
participant CE
participant BQ
participant VDS
participant FBS
end
%% === ç¬¬ä¸€é˜¶æ®µï¼šè§¦å‘ ===
rect rgb(255, 240, 240)
note right of SF: é˜¶æ®µ 1: è§¦å‘åˆ›å»º (ç‰©ç† vs è™šæ‹Ÿ)
alt ç‰©ç†å±å¹•æ’å…¥ (Hotplug)
HWC -&gt;&gt; SF: onHotplugReceived(displayId, connected=true)
SF -&gt;&gt; SF: update mCurrentState (add Display)
SF -&gt;&gt; SF: setTransactionFlags(eDisplayTransactionNeeded)
else è™šæ‹Ÿå±å¹•è¯·æ±‚ (Virtual)
DisplayManagerService -&gt;&gt; SF: createDisplay(name, secure)
SF -&gt;&gt; SF: update mCurrentState (add Display)
SF -&gt;&gt; SF: setTransactionFlags(eDisplayTransactionNeeded)
end
end
%% === ç¬¬äºŒé˜¶æ®µï¼šä¸»å¾ªç¯å¤„ç† ===
SF -&gt;&gt; SF: onMessageInvalidate() -&gt; handleMessageTransaction()
SF -&gt;&gt; SF: processDisplayChangesLocked()
note right of SF: å‘ç° mCurrentState æœ‰æ–° token&lt;br/&gt;è€Œ mDrawingState æ²¡æœ‰
%% === ç¬¬ä¸‰é˜¶æ®µï¼šæ ¸å¿ƒå·¥å‚æ–¹æ³• ===
rect rgb(255, 250, 230)
note right of SF: é˜¶æ®µ 2: æ ¸å¿ƒå·¥å‚ (processDisplayAdded)
SF -&gt;&gt; SF: processDisplayAdded(token, state)
%% 1. åˆ›å»º CE Display
SF -&gt;&gt; CE: createDisplay(args)
activate CE
CE --&gt;&gt; SF: return compositionDisplay
deactivate CE
%% 2. åˆ›å»º Buffer ç®¡é“
SF -&gt;&gt; BQ: createBufferQueue()
BQ --&gt;&gt; SF: return (producer, consumer)
%% 3. åˆ›å»º Surface (åˆ†å‰é€»è¾‘)
note right of SF: é˜¶æ®µ 3: æ³¨å†Œä¸æ¿€æ´»
alt ç‰©ç†å±å¹•
SF -&gt;&gt; Scheduler: registerDisplay(physicalId, refreshRateSelector)
end
SF -&gt;&gt; SF: mDisplays.add(token, displayDevice)
opt å¦‚æœæ˜¯ç‰©ç†å±å¹•
SF -&gt;&gt; HWC: setPowerMode(ON)
SF -&gt;&gt; SF: onActiveDisplayChangedLocked (å¦‚æœæ˜¯ä¸»å±)
end
end
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æŠ€æœ¯å®ç°ç»†èŠ‚ï¼š&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>DisplayManagerServiceè®¾è®¡</title><link>https://ethen-cao.github.io/ethenslab/android-dev/display/displaymanagerservice/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/display/displaymanagerservice/</guid><description>&lt;h2 id="logicaldisplayçš„åˆ›å»ºè¿‡ç¨‹"&gt;LogicalDisplayçš„åˆ›å»ºè¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªæ—¶åºå›¾å±•ç¤ºäº†ä»åº•å±‚ç‰©ç†å±å¹•å‘ç°åˆ°ä¸Šå±‚çª—å£ç®¡ç†å®¹å™¨åˆ›å»ºçš„å®Œæ•´é“¾è·¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/android-13-LogicalDisplay-creating-sequence.png" alt="" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆå§‹åŒ–é˜¶æ®µ&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;DisplayManagerService&lt;/code&gt; å¯åŠ¨ï¼Œåœ¨ &lt;code&gt;onStart&lt;/code&gt; æ–¹æ³•ä¸­å‘é€ &lt;code&gt;MSG_REGISTER_DEFAULT_DISPLAY_ADAPTERS&lt;/code&gt; æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DisplayManagerService&lt;/code&gt; çš„ Handler å¤„ç†è¯¥æ¶ˆæ¯ï¼Œè°ƒç”¨ &lt;code&gt;registerDefaultDisplayAdapters&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;registerDefaultDisplayAdapters&lt;/code&gt; ä¸­ï¼Œåˆ›å»º &lt;code&gt;LocalDisplayAdapter&lt;/code&gt; å®ä¾‹å¹¶æ³¨å†Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;LocalDisplayAdapter å‘ç°è®¾å¤‡&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;LocalDisplayAdapter&lt;/code&gt; åˆå§‹åŒ–æ—¶ä¼šä» &lt;code&gt;SurfaceControl&lt;/code&gt; è·å–ç‰©ç†å±å¹•ä¿¡æ¯ï¼ˆé€šè¿‡ &lt;code&gt;SurfaceControlProxy&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å‘ç°ç‰©ç†å±å¹•åï¼Œåˆ›å»º &lt;code&gt;LocalDisplayDevice&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ &lt;code&gt;sendDisplayDeviceEventLocked&lt;/code&gt; å‘é€ &lt;code&gt;DISPLAY_DEVICE_EVENT_ADDED&lt;/code&gt; äº‹ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;DisplayDeviceRepository å¤„ç†äº‹ä»¶&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;DisplayAdapter&lt;/code&gt; å°†äº‹ä»¶å‘é€ç»™ &lt;code&gt;DisplayDeviceRepository&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DisplayDeviceRepository&lt;/code&gt; å°† &lt;code&gt;LocalDisplayDevice&lt;/code&gt; æ·»åŠ åˆ°åˆ—è¡¨ï¼Œå¹¶é€šçŸ¥ç›‘å¬è€…ï¼Œå³ &lt;code&gt;LogicalDisplayMapper&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;LogicalDisplayMapper åˆ›å»º LogicalDisplay&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;LogicalDisplayMapper&lt;/code&gt; æ”¶åˆ° &lt;code&gt;DISPLAY_DEVICE_EVENT_ADDED&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯é»˜è®¤å±å¹•ï¼Œå…ˆè¿›è¡Œåˆå§‹åŒ–é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ &lt;code&gt;createNewLogicalDisplayLocked&lt;/code&gt; åˆ›å»º &lt;code&gt;LogicalDisplay&lt;/code&gt; å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ &lt;code&gt;applyLayoutLocked&lt;/code&gt; æ¥æ ¹æ®è®¾å¤‡çŠ¶æ€é…ç½®å¸ƒå±€ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åè°ƒç”¨ &lt;code&gt;updateLogicalDisplaysLocked&lt;/code&gt; æ¥æ›´æ–°æ•´ä¸ªç³»ç»Ÿçš„æ˜¾ç¤ºçŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€šçŸ¥ç³»ç»Ÿå’Œ WMS&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;updateLogicalDisplaysLocked&lt;/code&gt; ä¸­ï¼Œ&lt;code&gt;LogicalDisplayMapper&lt;/code&gt; é€šçŸ¥ &lt;code&gt;DisplayManagerService&lt;/code&gt; (é€šè¿‡ &lt;code&gt;Listener&lt;/code&gt;) &lt;code&gt;LOGICAL_DISPLAY_EVENT_ADDED&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DisplayManagerService&lt;/code&gt; æ”¶åˆ°äº‹ä»¶ï¼Œè°ƒç”¨ &lt;code&gt;handleLogicalDisplayAddedLocked&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DisplayManagerService&lt;/code&gt; å‘é€ &lt;code&gt;DisplayManagerGlobal.EVENT_DISPLAY_ADDED&lt;/code&gt; åˆ° Handlerã€‚&lt;/li&gt;
&lt;li&gt;Handler å¤„ç†æ¶ˆæ¯ï¼Œè°ƒç”¨ &lt;code&gt;deliverDisplayEvent&lt;/code&gt; é€šçŸ¥æ‰€æœ‰æ³¨å†Œçš„ &lt;code&gt;IDisplayManagerCallback&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;: &lt;code&gt;WindowManagerService&lt;/code&gt; åœ¨åˆå§‹åŒ–æ—¶é€šè¿‡ &lt;code&gt;DisplayManagerInternal&lt;/code&gt; è·å–äº† &lt;code&gt;DisplayManager&lt;/code&gt; çš„å›è°ƒæˆ–ç›´æ¥ç›‘å¬ã€‚ä½†åœ¨ä»£ç ä¸­ï¼ŒWMS å®é™…ä¸Šæ˜¯é€šè¿‡ &lt;code&gt;DisplayManagerInternal.registerDisplayTransactionListener&lt;/code&gt; æˆ–ç›´æ¥è½®è¯¢/ç›‘å¬æ¥æ„ŸçŸ¥çš„ã€‚&lt;/li&gt;
&lt;li&gt;æ›´å…·ä½“çš„è·¯å¾„æ˜¯ï¼š&lt;code&gt;DisplayManagerService&lt;/code&gt; åœ¨ &lt;code&gt;handleLogicalDisplayAddedLocked&lt;/code&gt; ä¸­ä¼šé…ç½®æ˜¾ç¤ºå±æ€§ï¼Œå¹¶æœ€ç»ˆè§¦å‘ &lt;code&gt;DisplayTransactionListener&lt;/code&gt; æˆ–å‘é€å¹¿æ’­ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;WindowManagerService&lt;/code&gt; ä¸­ï¼Œé€šå¸¸é€šè¿‡ &lt;code&gt;DisplayManager&lt;/code&gt; çš„å›è°ƒ &lt;code&gt;onDisplayAdded&lt;/code&gt; æ„ŸçŸ¥ï¼Œç„¶åè°ƒç”¨ &lt;code&gt;mRoot.createDisplayContent&lt;/code&gt;ã€‚åœ¨æä¾›çš„ä»£ç ä¸­ï¼Œ&lt;code&gt;DisplayManagerService&lt;/code&gt; æ‹¥æœ‰ &lt;code&gt;mDisplayTransactionListeners&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DisplayManagerService&lt;/code&gt; çš„ &lt;code&gt;handleLogicalDisplayAddedLocked&lt;/code&gt; ä¼šè°ƒç”¨ &lt;code&gt;sendDisplayEventLocked&lt;/code&gt;ï¼Œè¿›è€Œè§¦å‘å›è°ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;è¡¥å……ï¼š&lt;code&gt;WindowManagerService&lt;/code&gt; å¦‚ä½•åˆ›å»º &lt;code&gt;DisplayContent&lt;/code&gt;&lt;/em&gt;&lt;/p&gt;</description></item><item><title>HWCç®€ä»‹</title><link>https://ethen-cao.github.io/ethenslab/android-dev/display/composor/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/display/composor/</guid><description>&lt;p&gt;HWC æœåŠ¡å¯åŠ¨åˆ°åº•å±‚ Display å¯¹è±¡åˆ›å»ºå®Œæˆçš„å®Œæ•´æ—¶åº,è¿™ä¸ªè¿‡ç¨‹ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å¯åŠ¨ä¸ä¾èµ–æ³¨å…¥&lt;/strong&gt;ï¼š&lt;code&gt;service.cpp&lt;/code&gt; å¯åŠ¨è¿›ç¨‹ï¼Œåˆ›å»º AIDL æœåŠ¡å®ä½“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SDM ç¯å¢ƒåˆå§‹åŒ–&lt;/strong&gt;ï¼š&lt;code&gt;ConcurrencyMgr&lt;/code&gt; åˆå§‹åŒ–ï¼ŒåŠ è½½ Core å±‚å’Œç¡¬ä»¶ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Display å¯¹è±¡æ„å»º&lt;/strong&gt;ï¼š&lt;code&gt;DisplayBuilder&lt;/code&gt; æ ¹æ®ç¡¬ä»¶ä¿¡æ¯åˆ›å»ºå…·ä½“çš„ &lt;code&gt;DisplayBuiltIn&lt;/code&gt; å’Œ &lt;code&gt;HWPeripheralDRM&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="qualcomm-hwc-å¯åŠ¨ä¸-display-åˆ›å»ºå…¨æµç¨‹"&gt;Qualcomm HWC å¯åŠ¨ä¸ Display åˆ›å»ºå…¨æµç¨‹&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme plain
skinparam MaxMessageSize 200
skinparam participantPadding 10
skinparam boxPadding 10
skinparam defaultFontName Monospaced
autonumber &amp;#34;&amp;lt;b&amp;gt;[Boot-0]&amp;lt;/b&amp;gt;&amp;#34;
title HWC Service Startup &amp;amp; Display Creation Sequence (Final Fix)
box &amp;#34;Service Process Entry&amp;#34; #White
participant &amp;#34;Main (service.cpp)&amp;#34; as Main
participant &amp;#34;AidlComposer\n(BnComposer)&amp;#34; as AC
end box
box &amp;#34;SDM Client Layer&amp;#34; #LightYellow
participant &amp;#34;SDMInterfaceFactory&amp;#34; as Factory
participant &amp;#34;ConcurrencyMgr&amp;#34; as CM
participant &amp;#34;SDMDisplayBuilder&amp;#34; as Builder
end box
box &amp;#34;SDM Core Layer&amp;#34; #LightGreen
participant &amp;#34;CoreInterface&amp;#34; as CoreStatic
participant &amp;#34;CoreImpl&amp;#34; as Core
participant &amp;#34;DisplayBuiltIn&amp;#34; as DBI
participant &amp;#34;DPUMultiCore\n(Mux)&amp;#34; as Mux
end box
box &amp;#34;Device Abstraction Layer (DAL)&amp;#34; #LightGray
participant &amp;#34;HWInfoInterface&amp;#34; as HWInfo
participant &amp;#34;HWInterface\n(Factory)&amp;#34; as HWFactory
participant &amp;#34;HWPeripheralDRM&amp;#34; as HW
end box
== é˜¶æ®µ 1: æœåŠ¡å¯åŠ¨ä¸æ¥å£ç»‘å®š ==
Main -&amp;gt; Main: setpriority / sched_setscheduler
create AC
Main -&amp;gt; AC: **new AidlComposer()**
activate AC
&amp;#39; 1.1 åˆ›å»ºæ ¸å¿ƒç®¡ç†å¯¹è±¡ ConcurrencyMgr
AC -&amp;gt; Factory: CreateLifeCycleIntf() / CreateSettingsIntf() ...
activate Factory
Factory -&amp;gt; CM: **GetInstance()** (Singleton)
activate CM
CM --&amp;gt; Factory: instance
deactivate CM
Factory --&amp;gt; AC: shared_ptr&amp;lt;ConcurrencyMgr&amp;gt;
deactivate Factory
&amp;#39; 1.2 åˆå§‹åŒ– ConcurrencyMgr
AC -&amp;gt; CM: **Init(buffer_allocator, ...)**
activate CM
== é˜¶æ®µ 2: SDM æ ¸å¿ƒç¯å¢ƒåˆå§‹åŒ– ==
CM -&amp;gt; CM: InitSubModules()
&amp;#39; 2.1 åˆ›å»º CoreImpl
CM -&amp;gt; CoreStatic: **CreateCore(...)**
activate CoreStatic
create Core
CoreStatic -&amp;gt; Core: new CoreImpl(...)
Core -&amp;gt; Core: Init()
&amp;#39; 2.2 åŠ è½½ç¡¬ä»¶ä¿¡æ¯ (DRM Capability)
Core -&amp;gt; HWInfo: Create(&amp;amp;hw_info_intf)
activate HWInfo
HWInfo -&amp;gt; HWInfo: Open DRM / Get Caps
HWInfo --&amp;gt; Core: Success
deactivate HWInfo
Core --&amp;gt; CoreStatic: Success
CoreStatic --&amp;gt; CM: core_intf_
deactivate CoreStatic
&amp;#39; 2.3 åˆ›å»º Builder
create Builder
CM -&amp;gt; Builder: new SDMDisplayBuilder(core_intf_, ...)
CM -&amp;gt; Builder: Init()
== é˜¶æ®µ 3: åˆ›å»ºä¸»æ˜¾ç¤ºè®¾å¤‡ (Primary Display) ==
CM -&amp;gt; CM: CreatePrimaryDisplay()
CM -&amp;gt; Builder: **CreatePrimaryDisplay()**
activate Builder
&amp;#39; 3.1 æŸ¥è¯¢è¿æ¥çŠ¶æ€
Builder -&amp;gt; Core: GetDisplaysStatus()
Core -&amp;gt; HWInfo: GetDisplaysStatus()
HWInfo --&amp;gt; Core: HWDisplaysInfo (is_connected=true, type=BuiltIn)
Core --&amp;gt; Builder: HWDisplaysInfo
&amp;#39; 3.2 å‘ç° Primary BuiltIn Displayï¼Œå¼€å§‹æ„å»º
create DBI
Builder -&amp;gt; DBI: **Create(...)**
activate DBI
DBI -&amp;gt; DBI: Init()
&amp;#39; 3.3 åˆ›å»º DPU Mux (å¤„ç†å¤šæ ¸/Split)
&amp;#39; [ä¿®å¤ç‚¹] create Mux å¿…é¡»ç´§é‚»å‘é€ç»™ Mux çš„æ¶ˆæ¯
create Mux
DBI -&amp;gt; Mux: **DPUCoreFactory::Create(...)**
activate Mux
Mux -&amp;gt; Mux: Init()
&amp;#39; 3.4 åˆ›å»ºåº•å±‚ HW Interface
loop For Each DPU Core
Mux -&amp;gt; HWFactory: **HWInterface::Create(type=kBuiltIn)**
activate HWFactory
create HW
HWFactory -&amp;gt; HW: **new HWPeripheralDRM(...)**
activate HW
HWFactory -&amp;gt; HW: Init()
&amp;#39; 3.5 HW åˆå§‹åŒ– (DRM Session)
HW -&amp;gt; HW: HWDeviceDRM::Init() (Register Display)
HW -&amp;gt; HW: PopulateHWPanelInfo() (Read Max Brightness)
HW --&amp;gt; HWFactory: Success
deactivate HW
HWFactory --&amp;gt; Mux: HWInterface*
deactivate HWFactory
end
Mux --&amp;gt; DBI: Success
deactivate Mux
DBI --&amp;gt; Builder: Display*
deactivate DBI
&amp;#39; 3.6 æ³¨å†Œå› ConcurrencyMgr
Builder -&amp;gt; CM: SetDisplayByClientId(Primary, DBI*)
note right of CM: sdm_display_[0] = DBI
Builder --&amp;gt; CM: Success
deactivate Builder
CM --&amp;gt; AC: Success
deactivate CM
AC --&amp;gt; Main: Created
deactivate AC
Main -&amp;gt; Main: AServiceManager_addService(AidlComposer)
note right of Main: æœåŠ¡å°±ç»ªï¼Œç­‰å¾… SurfaceFlinger è¿æ¥
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="å…³é”®æ­¥éª¤è§£æ"&gt;å…³é”®æ­¥éª¤è§£æ&lt;/h3&gt;
&lt;h4 id="1-å”¯ä¸€å…¥å£servicecpp"&gt;1. å”¯ä¸€å…¥å£ï¼š&lt;code&gt;service.cpp&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;è¿™æ˜¯ HWC è¿›ç¨‹çš„èµ·ç‚¹ã€‚å®ƒå¹¶æ²¡æœ‰ç›´æ¥å»æ“ä½œç¡¬ä»¶ï¼Œè€Œæ˜¯å…ˆåˆ›å»ºäº† &lt;code&gt;AidlComposer&lt;/code&gt;ã€‚è¿™ç¬¦åˆ Android VINTF æ¶æ„ï¼Œå°† AIDL æ¥å£ä½œä¸ºæœåŠ¡çš„é—¨é¢ã€‚&lt;/p&gt;</description></item><item><title>Insets animation flow</title><link>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/insets_animation_flow/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/insets_animation_flow/</guid><description>&lt;p&gt;Insets åŠ¨ç”» API çš„æ ¸å¿ƒä»·å€¼åœ¨äº&lt;strong&gt;æ¶ˆé™¤ç³»ç»Ÿ UI åŠ¨ç”»å’Œåº”ç”¨ UI åŠ¨ç”»ä¹‹é—´çš„â€œå‰²è£‚æ„Ÿâ€&lt;/strong&gt;ï¼Œå°†ä¸¤è€…èåˆæˆä¸€ä¸ªå¹³æ»‘ã€æ— ç¼çš„æ•´ä½“ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€äº›å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼Œä»æœ€å¸¸è§åˆ°æ›´é«˜çº§çš„äº¤äº’ï¼š&lt;/p&gt;
&lt;h3 id="1-æ ¸å¿ƒåœºæ™¯é”®ç›˜çš„æ˜¾ç¤ºä¸éšè—-messaging--input"&gt;1. æ ¸å¿ƒåœºæ™¯ï¼šé”®ç›˜çš„æ˜¾ç¤ºä¸éšè— (Messaging &amp;amp; Input)&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯æœ€ç»å…¸ã€æœ€èƒ½ä½“ç°å…¶ä»·å€¼çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼ ç»Ÿä½“éªŒ (é—®é¢˜æ‰€åœ¨):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ä¸€ä¸ªèŠå¤©åº”ç”¨é‡Œï¼Œä½ ç‚¹å‡»åº•éƒ¨çš„è¾“å…¥æ¡†ã€‚&lt;/li&gt;
&lt;li&gt;é”®ç›˜ä»åº•éƒ¨æ»‘å‡ºï¼Œè¿™ä¸ªåŠ¨ç”»æ˜¯ç³»ç»Ÿè´Ÿè´£çš„ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨é”®ç›˜åŠ¨ç”»çš„åŒæ—¶ï¼Œåº”ç”¨æ”¶åˆ°ä¸€ä¸ªâ€œå¯ç”¨ç©ºé—´å˜å°äº†â€çš„é€šçŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨ä¸ºäº†é˜²æ­¢è¾“å…¥æ¡†è¢«é”®ç›˜é®æŒ¡ï¼Œåªèƒ½&lt;strong&gt;è·³å˜å¼åœ°&lt;/strong&gt;å°†æ•´ä¸ªèŠå¤©åˆ—è¡¨å’Œè¾“å…¥æ¡†å‘ä¸Šç§»åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœï¼š&lt;/strong&gt; ç”¨æˆ·ä¼šæ„Ÿè§‰é”®ç›˜å’ŒèŠå¤©ç•Œé¢æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä¸œè¥¿åœ¨åŠ¨ï¼Œä½“éªŒå¾ˆç”Ÿç¡¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ Insets åŠ¨ç”» (è§£å†³æ–¹æ¡ˆ):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‚¹å‡»è¾“å…¥æ¡†ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨æ¥ç®¡é”®ç›˜çš„åŠ¨ç”»æ§åˆ¶æƒã€‚&lt;/li&gt;
&lt;li&gt;åœ¨é”®ç›˜ä»åº•éƒ¨å‘ä¸Šæ»‘å‡ºçš„æ¯ä¸€å¸§ï¼Œåº”ç”¨éƒ½ç²¾ç¡®åœ°è®¡ç®—å‡ºé”®ç›˜çš„å½“å‰é«˜åº¦ï¼Œå¹¶&lt;strong&gt;åŒæ­¥åœ°ã€ç­‰é€Ÿåœ°&lt;/strong&gt;å°†è‡ªå·±çš„èŠå¤©åˆ—è¡¨å’Œè¾“å…¥æ¡†ä¹Ÿå‘ä¸Šæ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœï¼š&lt;/strong&gt; åœ¨ç”¨æˆ·çœ‹æ¥ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸€ä¸ªè¿è´¯çš„åŠ¨ç”»ï¼š&lt;strong&gt;ä»¿ä½›æ˜¯é”®ç›˜â€œæ¨â€ç€èŠå¤©å†…å®¹å‘ä¸Šç§»åŠ¨&lt;/strong&gt;ï¼Œéå¸¸è‡ªç„¶ã€æµç•…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;åœºæ™¯&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜&lt;/th&gt;
&lt;th style="text-align: left"&gt;Insets åŠ¨ç”»çš„æ•ˆæœ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;èŠå¤©åº”ç”¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;é”®ç›˜åŠ¨ç”»ä¸å†…å®¹ç§»åŠ¨åˆ†ç¦»ï¼Œå†…å®¹&lt;strong&gt;è·³å˜&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;é”®ç›˜&lt;strong&gt;å¹³æ»‘æ¨èµ·&lt;/strong&gt;å†…å®¹ï¼ŒåŠ¨ç”»æ— ç¼è¡”æ¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="2-æ²‰æµ¸å¼æ¨¡å¼çš„è¿‡æ¸¡-video--photo-apps"&gt;2. æ²‰æµ¸å¼æ¨¡å¼çš„è¿‡æ¸¡ (Video &amp;amp; Photo Apps)&lt;/h3&gt;
&lt;p&gt;å½“åº”ç”¨è¿›å…¥æˆ–é€€å‡ºå…¨å±ï¼ˆæ²‰æµ¸å¼ï¼‰æ¨¡å¼æ—¶ï¼ŒçŠ¶æ€æ å’Œå¯¼èˆªæ ä¼šæ˜¾ç¤ºæˆ–éšè—ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼ ç»Ÿä½“éªŒ (é—®é¢˜æ‰€åœ¨):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½ åœ¨ä¸€ä¸ªç›¸å†Œåº”ç”¨ä¸­å…¨å±æŸ¥çœ‹ä¸€å¼ å›¾ç‰‡ã€‚ä½ ç‚¹å‡»å±å¹•ï¼Œå¸Œæœ›é€€å‡ºå…¨å±ã€‚&lt;/li&gt;
&lt;li&gt;ç³»ç»ŸçŠ¶æ€æ å’Œå¯¼èˆªæ &lt;strong&gt;çªç„¶å‡ºç°&lt;/strong&gt;æˆ–&lt;strong&gt;æ·¡å…¥&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨å†…å®¹åŒºåŸŸï¼ˆå›¾ç‰‡ï¼‰ä¸ºäº†é€‚åº”å˜å°çš„ç©ºé—´ï¼Œ&lt;strong&gt;çªç„¶ç¼©æ”¾æˆ–ç§»åŠ¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœï¼š&lt;/strong&gt; åŠ¨ç”»ä¸åè°ƒï¼Œæ„Ÿè§‰åƒæ˜¯ç³»ç»Ÿ UI ç²—æš´åœ°â€œè¦†ç›–â€åœ¨äº†å†…å®¹ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ Insets åŠ¨ç”» (è§£å†³æ–¹æ¡ˆ):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‚¹å‡»å±å¹•ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨æ¥ç®¡çŠ¶æ€æ å’Œå¯¼èˆªæ çš„åŠ¨ç”»ã€‚&lt;/li&gt;
&lt;li&gt;å½“çŠ¶æ€æ ä»é¡¶éƒ¨æ»‘å…¥ã€å¯¼èˆªæ ä»åº•éƒ¨æ»‘å…¥çš„æ¯ä¸€å¸§ï¼Œåº”ç”¨éƒ½&lt;strong&gt;åŒæ­¥åœ°ã€å¹³æ»‘åœ°&lt;/strong&gt;å°†å›¾ç‰‡è¿›è¡Œç¼©æ”¾å’Œå¹³ç§»ï¼Œä½¿å…¶æ­£å¥½å¡«å……åœ¨ä¸¤ä¸ªç³»ç»Ÿæ ä¹‹é—´çš„æ–°ç©ºé—´é‡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœï¼š&lt;/strong&gt; æ•´ä¸ªè¿‡æ¸¡éå¸¸ä¼˜é›…ï¼Œæ„Ÿè§‰åƒæ˜¯&lt;strong&gt;ç”»é¢å’Œç³»ç»Ÿæ ä¸€èµ·æ„æˆäº†ä¸€åœºç²¾å¿ƒç¼–æ’çš„è½¬åœºåŠ¨ç”»&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-é«˜çº§äº¤äº’åœºæ™¯æ‰‹åŠ¿æ§åˆ¶åŠ¨ç”»"&gt;3. é«˜çº§äº¤äº’åœºæ™¯ï¼šæ‰‹åŠ¿æ§åˆ¶åŠ¨ç”»&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯ Insets åŠ¨ç”» API å¼ºå¤§çµæ´»æ€§çš„ä½“ç°ï¼Œå…è®¸å¼€å‘è€…åˆ›é€ æ›´ä¸°å¯Œçš„äº¤äº’ã€‚&lt;/p&gt;</description></item><item><title>SplitScreenController flow</title><link>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/splitscreen-wmshell/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/splitscreen-wmshell/</guid><description>&lt;h2 id="æ—¶åºå›¾"&gt;æ—¶åºå›¾&lt;/h2&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/splitscreen_wmshell.png" alt="" /&gt;&lt;/p&gt;
&lt;h2 id="debug"&gt;Debug&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ‰“å°åˆ†å±åŒºåŸŸ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;adb shell dumpsys activity service SystemUIService WMShell
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;dump SystemUI&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ adb shell dumpsys activity service SystemUIService
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Enable protolog&lt;/p&gt;
&lt;p&gt;å‚è€ƒ &lt;code&gt;frameworks/base/libs/WindowManager/Shell/src/com/android/wm/shell/ProtoLogController.java&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;helpå‘½ä»¤ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ adb shell dumpsys activity service SystemUIService WMShell help
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æŸ¥çœ‹protolog statusï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $ adb shell dumpsys activity service SystemUIService WMShell protolog status
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; SERVICE com.android.systemui/.SystemUIService e73cb38 pid&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;4871&lt;/span&gt; user&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Client:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; com.android.systemui.wmshell.WMShell:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ----------------------------------------------------------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ProtoLog status: Disabled
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Enabled log groups:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Proto: TEST_GROUP WM_DEBUG_ADD_REMOVE WM_DEBUG_ANIM WM_DEBUG_APP_TRANSITIONS WM_DEBUG_APP_TRANSITIONS_ANIM WM_DEBUG_BACK_PREVIEW WM_DEBUG_BOOT WM_DEBUG_CONFIGURATION WM_DEBUG_CONTAINERS WM_DEBUG_CONTENT_RECORDING WM_DEBUG_DRAW WM_DEBUG_DREAM WM_DEBUG_FOCUS WM_DEBUG_FOCUS_LIGHT WM_DEBUG_IME WM_DEBUG_IMMERSIVE WM_DEBUG_KEEP_SCREEN_ON WM_DEBUG_LOCKTASK WM_DEBUG_ORIENTATION WM_DEBUG_RECENTS_ANIMATIONS WM_DEBUG_REMOTE_ANIMATIONS WM_DEBUG_RESIZE WM_DEBUG_SCREEN_ON WM_DEBUG_STARTING_WINDOW WM_DEBUG_STATES WM_DEBUG_SWITCH WM_DEBUG_SYNC_ENGINE WM_DEBUG_TASKS WM_DEBUG_WALLPAPER WM_DEBUG_WINDOW_INSETS WM_DEBUG_WINDOW_MOVEMENT WM_DEBUG_WINDOW_ORGANIZER WM_DEBUG_WINDOW_TRANSITIONS WM_DEBUG_WINDOW_TRANSITIONS_MIN WM_ERROR WM_SHELL_BACK_PREVIEW WM_SHELL_DESKTOP_MODE WM_SHELL_DRAG_AND_DROP WM_SHELL_FLOATING_APPS WM_SHELL_FOLDABLE WM_SHELL_INIT WM_SHELL_PICTURE_IN_PICTURE WM_SHELL_RECENTS_TRANSITION WM_SHELL_RECENT_TASKS WM_SHELL_SPLIT_SCREEN WM_SHELL_STARTING_WINDOW WM_SHELL_SYSUI_EVENTS WM_SHELL_TASK_ORG WM_SHELL_TRANSITIONS WM_SHOW_SURFACE_ALLOC WM_SHOW_TRANSACTIONS
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Logcat: WM_DEBUG_BACK_PREVIEW WM_DEBUG_CONTENT_RECORDING WM_DEBUG_DREAM WM_DEBUG_WINDOW_TRANSITIONS_MIN WM_ERROR WM_SHELL_BACK_PREVIEW WM_SHELL_DRAG_AND_DROP WM_SHELL_INIT WM_SHELL_PICTURE_IN_PICTURE WM_SHELL_RECENTS_TRANSITION WM_SHELL_SPLIT_SCREEN WM_SHELL_TRANSITIONS
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Logging definitions loaded: &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Dump took 2ms
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;enable protologï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ adb shell dumpsys activity service SystemUIService WMShell protolog enable WM_SHELL_TRANSITIONS WM_SHELL_DRAG_AND_DROP WM_SHELL_SPLIT_SCREEN
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ adb shell dumpsys activity service SystemUIService WMShell protolog start
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>WindowInfos Update Flow</title><link>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/windowinfo-update-flow/</link><pubDate>Mon, 29 Sep 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/windowinfo-update-flow/</guid><description>&lt;h2 id="1-æ¦‚è¿°-overview"&gt;1. æ¦‚è¿° (Overview)&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;WindowInfos Update Flow&lt;/strong&gt; æ˜¯ Android å›¾å½¢ä¸è¾“å…¥ç³»ç»ŸååŒå·¥ä½œçš„æ ¸å¿ƒæœºåˆ¶ã€‚å®ƒè´Ÿè´£å°† SurfaceFlinger (SF) åˆæˆè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æœ€æ–°çª—å£å±æ€§ï¼ˆWindowInfoï¼Œå¦‚å‡ ä½•ä½ç½®ã€Z-Orderã€é€æ˜åº¦ã€è§¦æ‘¸åŒºåŸŸã€ç„¦ç‚¹åŠå…¶å˜æ¢çŸ©é˜µï¼‰å®æ—¶åŒæ­¥ç»™ SystemServer è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦æ¶ˆè´¹è€…åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;InputDispatcher (Native)&lt;/strong&gt;: è´Ÿè´£æ ¹æ®çª—å£ä¿¡æ¯è®¡ç®—è§¦æ‘¸äº‹ä»¶çš„ç›®æ ‡çª—å£ï¼ˆHit Testingï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AccessibilityWindowsPopulator (Java)&lt;/strong&gt;: è´Ÿè´£ä¸ºæ— éšœç¢æœåŠ¡ï¼ˆA11yï¼‰æ„å»ºå±å¹•å†…å®¹çš„çª—å£èŠ‚ç‚¹æ ‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯¥æœºåˆ¶çš„é«˜æ•ˆæ€§ç›´æ¥å†³å®šäº†è§¦æ‘¸å“åº”çš„å»¶è¿Ÿå’Œçª—å£ç„¦ç‚¹çš„å‡†ç¡®æ€§ã€‚ç”±äºæ¶‰åŠé«˜é¢‘è·¨è¿›ç¨‹é€šä¿¡ï¼ˆIPCï¼‰å’Œå¤§æ•°æ®é‡ä¼ è¾“ï¼Œå®ƒæ˜¯ç³»ç»Ÿç¨³å®šæ€§é—®é¢˜ï¼ˆå¦‚ &lt;code&gt;DeadSystemException&lt;/code&gt;ã€Binder ç¼“å†²åŒºè€—å°½ï¼‰çš„é«˜å‘åŒºã€‚&lt;/p&gt;
&lt;h2 id="2-æ ¸å¿ƒæ¶æ„ä¸ç»„ä»¶-architecture"&gt;2. æ ¸å¿ƒæ¶æ„ä¸ç»„ä»¶ (Architecture)&lt;/h2&gt;
&lt;p&gt;æ•°æ®æµå‘éµå¾ª &lt;strong&gt;Producer-Consumer&lt;/strong&gt; æ¨¡å‹ï¼Œå¹¶é€šè¿‡ &lt;strong&gt;WindowInfosListenerReporter&lt;/strong&gt; å®ç°å¤šè·¯å¤ç”¨ã€‚&lt;/p&gt;
&lt;h3 id="21-å‘é€ç«¯-producer-surfaceflinger"&gt;2.1 å‘é€ç«¯ (Producer: SurfaceFlinger)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§¦å‘æº&lt;/strong&gt;: æ¯ä¸€å¸§åˆæˆï¼ˆVsyncï¼‰åï¼Œè‹¥æ£€æµ‹åˆ°å›¾å±‚å±æ€§å˜åŒ– (&lt;code&gt;mVisibleRegionsDirty&lt;/code&gt; æˆ– &lt;code&gt;mInputInfoChanged&lt;/code&gt;)ï¼Œè§¦å‘æ›´æ–°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ­¥å‘é€&lt;/strong&gt;: é€šè¿‡ &lt;code&gt;BackgroundExecutor&lt;/code&gt; çº¿ç¨‹å‘é€ï¼Œé¿å…é˜»å¡ä¸»æ¸²æŸ“çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šä¿¡æ¥å£&lt;/strong&gt;: &lt;code&gt;IWindowInfosListener.onWindowInfosChanged&lt;/code&gt; (AIDL)ï¼Œå®šä¹‰ä¸º &lt;code&gt;oneway&lt;/code&gt;ï¼ˆéé˜»å¡ï¼‰ï¼Œå…è®¸æé«˜çš„å‘é€é¢‘ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="22-ä¸­è½¬ä¸åˆ†å‘-transport--dispatch-systemserver"&gt;2.2 ä¸­è½¬ä¸åˆ†å‘ (Transport &amp;amp; Dispatch: SystemServer)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;WindowInfosListenerReporter (Native)&lt;/strong&gt;:&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§’è‰²&lt;/strong&gt;: SystemServer è¿›ç¨‹å†…çš„å•ä¾‹ Binder Stub (&lt;code&gt;BnWindowInfosListener&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;: å®ƒæ˜¯ SystemServer ä¸ SurfaceFlinger ä¹‹é—´&lt;strong&gt;å”¯ä¸€&lt;/strong&gt;çš„ Binder é€šé“ã€‚è´Ÿè´£æ¥æ”¶è·¨è¿›ç¨‹æ•°æ®ï¼Œå¹¶&lt;strong&gt;åŒæ­¥&lt;/strong&gt;åˆ†å‘ç»™è¿›ç¨‹å†…æ³¨å†Œçš„æ‰€æœ‰ç›‘å¬å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="23-æ¥æ”¶ç«¯-consumers"&gt;2.3 æ¥æ”¶ç«¯ (Consumers)&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;InputDispatcher (Native)&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡Œä¸º&lt;/strong&gt;: &lt;strong&gt;åŒæ­¥é˜»å¡&lt;/strong&gt;ã€‚åœ¨å›è°ƒä¸­å¿…é¡»è·å–å…¨å±€é” &lt;code&gt;mLock&lt;/code&gt; ä»¥æ›´æ–°çª—å£çŠ¶æ€ã€‚è¿™æ˜¯æ€§èƒ½ç“¶é¢ˆæ‰€åœ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;AccessibilityWindowsPopulator (Java)&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡Œä¸º&lt;/strong&gt;: &lt;strong&gt;å¼‚æ­¥éé˜»å¡&lt;/strong&gt;ã€‚é€šè¿‡ JNI æ¥æ”¶å›è°ƒåï¼Œç«‹å³é€šè¿‡ &lt;code&gt;Handler.post&lt;/code&gt; å°†ç¹é‡é€»è¾‘è½¬ç§»è‡³ WMS çº¿ç¨‹ï¼Œä¸å ç”¨ Binder çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="3-è¯¦ç»†æ—¶åºæµç¨‹-sequence-diagram"&gt;3. è¯¦ç»†æ—¶åºæµç¨‹ (Sequence Diagram)&lt;/h2&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†ä» InputDispatcher æ³¨å†Œç›‘å¬ï¼Œåˆ° SurfaceFlinger åˆ†å‘æ•°æ®ï¼Œå†åˆ°ä¸åŒæ¶ˆè´¹è€…å¤„ç†æ•°æ®çš„å®Œæ•´æ—¶åºã€‚&lt;/p&gt;</description></item><item><title>Binder spam detectionåŸç†</title><link>https://ethen-cao.github.io/ethenslab/android-dev/perf--stability/spamming-oneway/</link><pubDate>Sun, 28 Sep 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/perf--stability/spamming-oneway/</guid><description>&lt;h2 id="binder-spam-detectionåŸç†"&gt;Binder spam detectionåŸç†&lt;/h2&gt;
&lt;p&gt;å½“Binderå¼‚æ­¥é€šä¿¡æ¶ˆè€—äº†è¿‡å¤šçš„binder bufferçš„æ—¶å€™ï¼Œä¼šæ‰“å°å‡ºå¦‚ä¸‹log:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;IPCThreadState: Process seems to be sending too many oneway calls.
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="æ ¸å¿ƒåŸå› "&gt;æ ¸å¿ƒåŸå› &lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªæ—¥å¿—çš„æ ¹æœ¬åŸå› åœ¨äº &lt;strong&gt;Kernel å±‚çš„ Binder é©±åŠ¨ç¨‹åº&lt;/strong&gt; æ£€æµ‹åˆ°æŸä¸ªè¿›ç¨‹å‘é€äº†è¿‡å¤šçš„ onewayï¼ˆå¼‚æ­¥ï¼‰è°ƒç”¨ï¼Œå¯¼è‡´ä¸º oneway è°ƒç”¨é¢„ç•™çš„ &lt;strong&gt;å¼‚æ­¥ç¼“å†²åŒºç©ºé—´ (async space) ä¸¥é‡ä¸è¶³&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œæ—¨åœ¨é˜²æ­¢æŸä¸ªè¿›ç¨‹å› æ»¥å‘ oneway è°ƒç”¨è€Œè€—å°½ Binder èµ„æºï¼Œå½±å“ç³»ç»Ÿå…¶ä»–è¿›ç¨‹çš„æ­£å¸¸é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªæ£€æµ‹å’Œé€šçŸ¥æµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯å‘èµ· Oneway è°ƒç”¨&lt;/strong&gt;ï¼šè¿›ç¨‹é€šè¿‡ &lt;code&gt;transact()&lt;/code&gt; å‘èµ·ä¸€ä¸ªå¸¦æœ‰ &lt;code&gt;TF_ONE_WAY&lt;/code&gt; æ ‡å¿—çš„ Binder è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸åˆ†é…ç¼“å†²åŒº&lt;/strong&gt;ï¼šBinder é©±åŠ¨åœ¨å†…æ ¸ç©ºé—´ä¸ºè¿™ä¸ª oneway äº‹åŠ¡åˆ†é…å†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸è¿›è¡Œåƒåœ¾é‚®ä»¶æ£€æµ‹ (Spam Detection)&lt;/strong&gt;ï¼šåœ¨åˆ†é…å†…å­˜æ—¶ï¼Œå†…æ ¸ä¼šæ£€æŸ¥å‰©ä½™çš„&lt;strong&gt;å¼‚æ­¥ç¼“å†²åŒºç©ºé—´&lt;/strong&gt;ã€‚å¦‚æœç©ºé—´ä½äºæŸä¸ªé˜ˆå€¼ï¼ˆæ€»ç©ºé—´çš„ 10%ï¼‰ï¼Œé©±åŠ¨å°±ä¼šå¼€å§‹æ€€ç–‘æœ‰è¿›ç¨‹åœ¨â€œæ»¥å‘â€ oneway è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ‡è®°å¯ç–‘äº‹åŠ¡&lt;/strong&gt;ï¼šå¦‚æœå¼‚æ­¥ç©ºé—´è¿‡ä½ï¼Œé©±åŠ¨ä¼šè¿›ä¸€æ­¥æ£€æŸ¥å½“å‰å‘èµ·è°ƒç”¨çš„è¿™ä¸ªè¿›ç¨‹ï¼Œæ˜¯å¦å ç”¨äº†è¿‡å¤šçš„ oneway ç¼“å†²åŒºï¼ˆä¾‹å¦‚ï¼Œè¶…è¿‡ 50 ä¸ªç¼“å†²åŒºæˆ–æ€»å¤§å°è¶…è¿‡æ€»ç©ºé—´çš„ 25%ï¼‰ã€‚å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œå†…æ ¸å°±ä¼šç»™è¿™ä¸ªäº‹åŠ¡çš„ç¼“å†²åŒºæ‰“ä¸Š &lt;code&gt;oneway_spam_suspect&lt;/code&gt; çš„æ ‡è®°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸è¿”å›ç‰¹æ®ŠæŒ‡ä»¤&lt;/strong&gt;ï¼šå¯¹äºä¸€ä¸ª oneway è°ƒç”¨ï¼Œå†…æ ¸éœ€è¦ç«‹å³ç»™å®¢æˆ·ç«¯ä¸€ä¸ªâ€œå®Œæˆâ€å›æ‰§ã€‚æ­¤æ—¶ï¼Œå¦‚æœå‘ç°äº‹åŠ¡ç¼“å†²åŒºæœ‰ &lt;code&gt;oneway_spam_suspect&lt;/code&gt; æ ‡è®°ï¼Œå†…æ ¸å°±ä¸ä¼šè¿”å›å¸¸è§„çš„ &lt;code&gt;BR_TRANSACTION_COMPLETE&lt;/code&gt;ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„ &lt;code&gt;BR_ONEWAY_SPAM_SUSPECT&lt;/code&gt; æŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·ç©ºé—´æ‰“å°æ—¥å¿—&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯çš„ &lt;code&gt;IPCThreadState&lt;/code&gt; åœ¨ &lt;code&gt;waitForResponse()&lt;/code&gt; ä¸­æ¥æ”¶å¹¶è§£ææ¥è‡ªå†…æ ¸çš„æŒ‡ä»¤ã€‚å½“å®ƒæ”¶åˆ° &lt;code&gt;BR_ONEWAY_SPAM_SUSPECT&lt;/code&gt; æ—¶ï¼Œå°±ä¼šæ‰“å°å‡ºè¿™æ¡æˆ‘ä»¬çœ‹åˆ°çš„é”™è¯¯æ—¥å¿—ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ä»£ç åˆ†æ"&gt;ä»£ç åˆ†æ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·ç©ºé—´æ—¥å¿—æ‰“å°ç‚¹ (IPCThreadState.cpp)&lt;/strong&gt;
åœ¨ &lt;code&gt;IPCThreadState::waitForResponse&lt;/code&gt; å‡½æ•°ä¸­ï¼Œå®ƒå¤„ç†ä» Binder é©±åŠ¨è¿”å›çš„å„ç§æŒ‡ä»¤ (&lt;code&gt;BR_*&lt;/code&gt;)ã€‚å…¶ä¸­å°±åŒ…æ‹¬ &lt;code&gt;BR_ONEWAY_SPAM_SUSPECT&lt;/code&gt;ã€‚&lt;/p&gt;</description></item><item><title>repoåŸºç¡€çŸ¥è¯†</title><link>https://ethen-cao.github.io/ethenslab/others/repo-%E5%9F%BA%E7%A1%80/</link><pubDate>Sat, 27 Sep 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/others/repo-%E5%9F%BA%E7%A1%80/</guid><description>&lt;h2 id="åŸºç¡€æ¦‚å¿µ"&gt;åŸºç¡€æ¦‚å¿µ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Manifestï¼šåœ¨ AOSP æˆ–ä½¿ç”¨ repo å·¥å…·ç®¡ç†çš„å¤šä»“åº“é¡¹ç›®ä¸­ï¼ŒManifest æ˜¯ä¸€ä¸ª XML æ–‡ä»¶ï¼ˆé€šå¸¸åä¸º manifest.xmlï¼‰ï¼Œç”± repo å·¥å…·ä½¿ç”¨ï¼Œå®šä¹‰äº†é¡¹ç›®çš„å¤šä¸ª Git ä»“åº“çš„åœ°å€ã€åˆ†æ”¯ã€ç‰ˆæœ¬ï¼ˆcommit æˆ– tagï¼‰ç­‰ä¿¡æ¯ã€‚å®ƒå°±åƒä¸€ä¸ªâ€œè“å›¾â€ï¼Œå‘Šè¯‰ repo éœ€è¦ä»å“ªäº›ä»“åº“æ‹‰å–å“ªäº›ä»£ç ã€‚å¼€å‘è€…è¿è¡Œ repo sync æ—¶ï¼Œrepo å·¥å…·ä¼šè¯»å– Manifest æ–‡ä»¶ï¼ˆé€šå¸¸ä» &lt;strong&gt;Manifest ä»“åº“&lt;/strong&gt;è·å–ï¼‰ï¼Œæ ¹æ®å…¶ä¸­çš„é…ç½®ï¼ˆå¦‚ä»“åº“ URLã€åˆ†æ”¯ã€ç‰ˆæœ¬ï¼‰å†³å®šéœ€è¦æ‹‰å–å“ªäº› Git ä»“åº“çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Gerritï¼šGerrit æ˜¯ä¸€ä¸ªä»£ç å®¡æ ¸æœåŠ¡å™¨ï¼Œé€šå¸¸ä½œä¸º Git ä»“åº“çš„ä»£ç†å±‚ï¼ˆproxyï¼‰ã€‚å®ƒä¸ä»…æ‰˜ç®¡ä»£ç ä»“åº“ï¼Œè¿˜æä¾›ä»£ç å®¡æ ¸åŠŸèƒ½ï¼ˆå¦‚ Code Reviewã€Verified åˆ†æ•°ï¼‰ã€‚åœ¨å®é™…æ“ä½œä¸­ï¼Œå¼€å‘è€…çš„ repo sync è¯·æ±‚ä¼šé€šè¿‡ Gerrit è·å–ä»£ç ï¼Œè€Œä¸æ˜¯ç›´æ¥è®¿é—®åŸå§‹ Git ä»“åº“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;repoå‘½ä»¤çš„å«ä¹‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;repo init -u ssh://h-caoquanli@10.82.64.202:8787/8397/DLS-Qualcomm-U/manifest -b dev_rc16_3.1_20250730 -m qssi.xml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™è¡Œå‘½ä»¤æ˜¯ä½¿ç”¨ &lt;code&gt;repo&lt;/code&gt; å·¥å…·æ¥åˆå§‹åŒ–ä¸€ä¸ªä»£ç ä»“åº“çš„æœ¬åœ°å·¥ä½œåŒºã€‚&lt;code&gt;repo&lt;/code&gt; æ˜¯ä¸€ä¸ªåŸºäº Git çš„ä»“åº“ç®¡ç†å·¥å…·ï¼Œé€šå¸¸ç”¨äºç®¡ç†åŒ…å«å¤šä¸ª Git ä»“åº“çš„å¤§å‹é¡¹ç›®ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ Android å¼€æºé¡¹ç›® (AOSP)ã€‚
ç®€å•æ¥è¯´ï¼Œè¿™æ¡å‘½ä»¤çš„æ„æ€æ˜¯ï¼š&lt;strong&gt;å‡†å¤‡ä»ä¸€ä¸ªå†…éƒ¨æœåŠ¡å™¨ä¸Šï¼Œä¸‹è½½ä¸€ä¸ªåä¸º â€œDLS-Qualcomm-Uâ€ çš„é«˜é€šå¹³å°é¡¹ç›®ï¼Œå¹¶æŒ‡å®šå…¶ç‰ˆæœ¬ä¸º &lt;code&gt;dev_rc16_3.1_20250730&lt;/code&gt;ï¼ŒåŒæ—¶ä½¿ç”¨ &lt;code&gt;qssi.xml&lt;/code&gt; è¿™ä¸ªé…ç½®æ–‡ä»¶æ¥å†³å®šå…·ä½“ä¸‹è½½å“ªäº›ä»£ç æ¨¡å—ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥é€æ®µåˆ†è§£è¿™ä¸ªå‘½ä»¤ï¼š&lt;/p&gt;</description></item><item><title>build.py æŠ€æœ¯åŸç†è¯¦è§£</title><link>https://ethen-cao.github.io/ethenslab/qnx/qualcomm_build.py/</link><pubDate>Mon, 22 Sep 2025 12:11:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/qnx/qualcomm_build.py/</guid><description>&lt;h2 id="buildpy-æŠ€æœ¯åŸç†è¯¦è§£"&gt;&lt;code&gt;build.py&lt;/code&gt; æŠ€æœ¯åŸç†è¯¦è§£&lt;/h2&gt;
&lt;h3 id="æ ¸å¿ƒå®šä½å£°æ˜å¼æ„å»ºçš„æ‰§è¡Œå¼•æ“"&gt;æ ¸å¿ƒå®šä½ï¼šå£°æ˜å¼æ„å»ºçš„æ‰§è¡Œå¼•æ“&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;build.py&lt;/code&gt; è„šæœ¬æ˜¯é«˜é€šå¹³å° Meta-Build ç³»ç»Ÿçš„æ ¸å¿ƒ&lt;strong&gt;è‡ªåŠ¨åŒ–æ‰§è¡Œå¼•æ“&lt;/strong&gt;ã€‚å®ƒæœ¬èº«ä¸åŒ…å«å…·ä½“çš„æ„å»ºé€»è¾‘ï¼ˆå¦‚ç¼–è¯‘å“ªä¸ªæ–‡ä»¶ã€æ‰“åŒ…å“ªäº›å›ºä»¶ï¼‰ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªé€šç”¨çš„&lt;strong&gt;ä»»åŠ¡è°ƒåº¦å™¨å’Œæ‰§è¡Œå™¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒçš„æ ¸å¿ƒè®¾è®¡å“²å­¦æ˜¯&lt;strong&gt;å£°æ˜å¼é©±åŠ¨&lt;/strong&gt;ï¼šå¼€å‘è€…åœ¨ &lt;code&gt;contents.xml&lt;/code&gt; æ–‡ä»¶ä¸­ä»¥å£°æ˜çš„æ–¹å¼ï¼ˆâ€œæˆ‘éœ€è¦ä»€ä¹ˆâ€ï¼‰å®šä¹‰å¥½æ‰€æœ‰çš„æ„å»ºéœ€æ±‚ï¼Œè€Œ &lt;code&gt;build.py&lt;/code&gt; è„šæœ¬åˆ™è´Ÿè´£è¯»å–è¿™ä»½â€œè“å›¾â€ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºä¸€ç³»åˆ—å®é™…çš„æ–‡ä»¶æ“ä½œå’Œå‘½ä»¤æ‰§è¡Œï¼Œæœ€ç»ˆå®Œæˆå¤æ‚çš„æ‰“åŒ…ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="1-è¾“å…¥-inputs"&gt;1. è¾“å…¥ (Inputs)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;build.py&lt;/code&gt; çš„æ­£å¸¸è¿è¡Œä¾èµ–äºä»¥ä¸‹å‡ ç±»è¾“å…¥ï¼š&lt;/p&gt;
&lt;h4 id="ä¸»è¦è¾“å…¥"&gt;&lt;strong&gt;ä¸»è¦è¾“å…¥&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;contents.xml&lt;/code&gt;&lt;/strong&gt;: è¿™æ˜¯æœ€æ ¸å¿ƒçš„è¾“å…¥ï¼Œæ˜¯æ•´ä¸ªæ„å»ºè¿‡ç¨‹çš„&lt;strong&gt;é…ç½®æ¸…å•å’ŒæŒ‡ä»¤é›†&lt;/strong&gt;ã€‚&lt;code&gt;build.py&lt;/code&gt; çš„æ‰€æœ‰è¡Œä¸ºéƒ½ç”±è¯¥æ–‡ä»¶é©±åŠ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ¬¡è¦è¾“å…¥"&gt;&lt;strong&gt;æ¬¡è¦è¾“å…¥&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‘½ä»¤è¡Œå‚æ•°&lt;/strong&gt;: ç”¨æˆ·åœ¨æ‰§è¡Œè„šæœ¬æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œç”¨äºæ§åˆ¶è„šæœ¬çš„è¡Œä¸ºæ¨¡å¼ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--nonhlos&lt;/code&gt;, &lt;code&gt;--hlos&lt;/code&gt;: è¿‡æ»¤å™¨ï¼Œè®©è„šæœ¬åªæ‰§è¡Œä¸ NON-HLOS æˆ– HLOS ç›¸å…³çš„ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--wflow_filter=&amp;lt;filter_name&amp;gt;&lt;/code&gt;: æ›´ç²¾ç»†çš„è¿‡æ»¤å™¨ï¼Œè®©è„šæœ¬åªæ‰§è¡Œ &lt;code&gt;&amp;lt;workflow&amp;gt;&lt;/code&gt; ä¸­å…·æœ‰ç‰¹å®š &lt;code&gt;filter&lt;/code&gt; å±æ€§çš„æ­¥éª¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--clean&lt;/code&gt;: æ¨¡å¼åˆ‡æ¢ï¼Œè®©è„šæœ¬æ‰§è¡Œæ¸…ç†ä»»åŠ¡è€Œéæ„å»ºä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--imf&lt;/code&gt;: æ¨¡å¼åˆ‡æ¢ï¼Œå¿½ç•¥æ–‡ä»¶è·¯å¾„éªŒè¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="éšå¼è¾“å…¥"&gt;&lt;strong&gt;éšå¼è¾“å…¥&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å„ç»„ä»¶çš„ç¼–è¯‘äº§ç‰©&lt;/strong&gt;: è„šæœ¬è¿è¡Œå‰ï¼Œå„ä¸ªç‹¬ç«‹çš„è½¯ä»¶æ¨¡å—ï¼ˆå¦‚ &lt;code&gt;boot_images&lt;/code&gt;, &lt;code&gt;tz_images&lt;/code&gt;, &lt;code&gt;mpss&lt;/code&gt;, &lt;code&gt;apps&lt;/code&gt; ç­‰ï¼‰å¿…é¡»å·²ç»å®Œæˆå„è‡ªçš„ç¼–è¯‘ï¼Œå¹¶å°†å…¶äº§ç‰©æ”¾ç½®åœ¨ &lt;code&gt;contents.xml&lt;/code&gt; ä¸­æŒ‡å®šçš„è·¯å¾„ä¸‹ã€‚&lt;code&gt;build.py&lt;/code&gt; ä¼šå»æ¶ˆè´¹è¿™äº›äº§ç‰©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®æ–‡ä»¶&lt;/strong&gt;: å¦‚ &lt;code&gt;partition_la.xml&lt;/code&gt;ï¼Œå®ƒå®šä¹‰äº†åˆ†åŒºå¸ƒå±€ï¼Œæ˜¯ç”Ÿæˆ &lt;code&gt;gpt_*.bin&lt;/code&gt; å’Œ &lt;code&gt;rawprogram.xml&lt;/code&gt; çš„è¾“å…¥æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="2-è¾“å‡º-outputs"&gt;2. è¾“å‡º (Outputs)&lt;/h3&gt;
&lt;p&gt;è„šæœ¬æˆåŠŸæ‰§è¡Œåï¼Œä¼šç”Ÿæˆä¸€ä¸ªç»“æ„åŒ–ã€å¯ç›´æ¥ç”¨äºåˆ·æœºçš„è½¯ä»¶åŒ…ã€‚&lt;/p&gt;
&lt;h4 id="æ ¸å¿ƒäº§ç‰©"&gt;&lt;strong&gt;æ ¸å¿ƒäº§ç‰©&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ª&lt;strong&gt;å®Œæ•´çš„ã€æŒ‰äº§å“é£å‘³ï¼ˆFlavorï¼‰å’Œå­˜å‚¨ç±»å‹ï¼ˆStorage Typeï¼‰ç»„ç»‡çš„åˆ·æœºåŒ…&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å…·ä½“æ–‡ä»¶æ¸…å•"&gt;&lt;strong&gt;å…·ä½“æ–‡ä»¶æ¸…å•&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ·æœºæŒ‡ä»¤æ–‡ä»¶&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rawprogram*.xml&lt;/code&gt;: æ ¸å¿ƒçš„ EDL åˆ·æœºè„šæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;patch*.xml&lt;/code&gt;: åŠ¨æ€ä¿®è¡¥è„šæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºè¡¨æ–‡ä»¶&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;gpt_*.bin&lt;/code&gt;: äºŒè¿›åˆ¶çš„ GUID åˆ†åŒºè¡¨æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤åˆå›ºä»¶é•œåƒ&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NON-HLOS.bin&lt;/code&gt;: åŒ…å« Modem, aDSP, CDSP, WLAN ç­‰å›ºä»¶çš„ FAT æ ¼å¼é•œåƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BTFM.bin&lt;/code&gt;: è“ç‰™å›ºä»¶é•œåƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dspso.bin&lt;/code&gt;: DSP åŠ¨æ€åº“é•œåƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç­¾åä¸åˆ†å‰²å›ºä»¶&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;multi_image.mbn&lt;/code&gt;: ç»è¿‡å®‰å…¨ç­¾åçš„å¤åˆé•œåƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pil_split_bins/&lt;/code&gt; ç›®å½•: è¢« &lt;code&gt;pil-splitter.py&lt;/code&gt; åˆ†å‰²åçš„å›ºä»¶ï¼Œç”¨äºè¿è¡Œæ—¶åŠ è½½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾…åŠ©ä¸è°ƒè¯•æ–‡ä»¶&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Ver_Info.txt&lt;/code&gt;: JSON æ ¼å¼çš„ç‰ˆæœ¬ä¿¡æ¯æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gen_buildflavor.cmm&lt;/code&gt;: Trace32 è°ƒè¯•å™¨ä½¿ç”¨çš„è„šæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="3-ä¾èµ–-dependencies"&gt;3. ä¾èµ– (Dependencies)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;build.py&lt;/code&gt; çš„ä¾èµ–å¯ä»¥åˆ†ä¸ºå››ç±»ï¼š&lt;/p&gt;</description></item><item><title>contents.xml å±æ€§ä¸å­—æ®µè¯´æ˜æ–‡æ¡£</title><link>https://ethen-cao.github.io/ethenslab/qnx/qualcomm_contents/</link><pubDate>Mon, 22 Sep 2025 12:11:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/qnx/qualcomm_contents/</guid><description>&lt;h2 id="contentsxml-å±æ€§ä¸å­—æ®µè¯´æ˜æ–‡æ¡£"&gt;&lt;code&gt;contents.xml&lt;/code&gt; å±æ€§ä¸å­—æ®µè¯´æ˜æ–‡æ¡£&lt;/h2&gt;
&lt;h3 id="1-æ–‡æ¡£å¼•è¨€"&gt;1. æ–‡æ¡£å¼•è¨€&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;contents.xml&lt;/code&gt; æ–‡ä»¶æ˜¯é«˜é€šï¼ˆQualcommï¼‰å¹³å° Meta-Build ç³»ç»Ÿçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ã€‚å®ƒä½œä¸ºä¸€ä¸ª&lt;strong&gt;å…ƒæ„å»ºæ¸…å• (Meta-Build Manifest)&lt;/strong&gt;ï¼Œä»¥å£°æ˜å¼ XML çš„æ ¼å¼ï¼Œç²¾ç¡®å®šä¹‰äº†ä¸€ä¸ªå®Œæ•´è½¯ä»¶åŒ…ä»æºä»£ç åˆ°æœ€ç»ˆåˆ·æœºåŒ…çš„&lt;strong&gt;æ‰€æœ‰ç¯èŠ‚&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬è¯´æ˜æ–‡æ¡£æ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä¸€ä»½è¯¦å°½çš„å‚è€ƒï¼Œè§£é‡Š &lt;code&gt;contents.xml&lt;/code&gt; æ–‡ä»¶ä¸­å„ä¸ª XML æ ‡ç­¾ã€å±æ€§åŠå­—æ®µçš„å«ä¹‰ï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£ã€è°ƒè¯•å’Œå®šåˆ¶å¤æ‚çš„æ„å»ºæµç¨‹ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="2-é¡¶å±‚ç»“æ„æ ‡ç­¾"&gt;2. é¡¶å±‚ç»“æ„æ ‡ç­¾&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;contents.xml&lt;/code&gt; ç”±å¤šä¸ªé¡¶å±‚æ ‡ç­¾æ„æˆï¼Œæ¯ä¸ªæ ‡ç­¾è´Ÿè´£ä¸€éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;æ ‡ç­¾&lt;/th&gt;
&lt;th style="text-align: left"&gt;å«ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;&amp;lt;product_flavors&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®šä¹‰äº§å“çš„ä¸åŒâ€œé£å‘³â€æˆ–å˜ç§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;&amp;lt;product_info&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æä¾›å…³äºäº§å“çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;&amp;lt;partition_info&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®šä¹‰ä¸åˆ†åŒºæ“ä½œç›¸å…³çš„ä¿¡æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;&amp;lt;builds_flat&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æ ¸å¿ƒéƒ¨åˆ†&lt;/strong&gt;ï¼Œå®šä¹‰æ‰€æœ‰ç‹¬ç«‹è½¯ä»¶ç»„ä»¶çš„æ„å»ºä¿¡æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;&amp;lt;build_tools&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ï¼ˆå¯é€‰ï¼‰å®šä¹‰æ„å»ºç³»ç»Ÿå†…éƒ¨ä½¿ç”¨çš„å·¥å…·ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;&amp;lt;external_tools&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å£°æ˜æ„å»ºæˆ–è°ƒè¯•è¿‡ç¨‹ä¸­ä¾èµ–çš„å¤–éƒ¨å·¥å…·ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;&amp;lt;workflow&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®šä¹‰æ„å»ºå®Œæˆåçš„è‡ªåŠ¨åŒ–å¤„ç†ä¸æ‰“åŒ…æµç¨‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="3-æ ‡ç­¾ä¸å±æ€§è¯¦è§£"&gt;3. æ ‡ç­¾ä¸å±æ€§è¯¦è§£&lt;/h3&gt;
&lt;h4 id="31"&gt;&lt;strong&gt;3.1 &lt;code&gt;&amp;lt;product_flavors&amp;gt;&lt;/code&gt; åŒºåŸŸ&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;æ­¤åŒºåŸŸç”¨äºå®šä¹‰ä¸åŒçš„äº§å“å½¢æ€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;product_flavors cmm_pf_var=&amp;quot;...&amp;quot;&amp;gt;&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å±æ€§&lt;/strong&gt;: &lt;code&gt;cmm_pf_var&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;: å®šä¹‰ä¸€ä¸ªå˜é‡åï¼Œè¯¥å˜é‡ç”¨äºåœ¨ CMM (å¸¸ç”¨äº Trace32 è°ƒè¯•å™¨) è„šæœ¬ä¸­å­˜å‚¨å½“å‰é€‰æ‹©çš„äº§å“é£å‘³ï¼ˆProduct Flavorï¼‰ã€‚æ„å»ºç³»ç»Ÿä¼šæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„é£å‘³ï¼ˆå¦‚ &lt;code&gt;8155_la&lt;/code&gt;ï¼‰ä¸ºè¿™ä¸ªå˜é‡èµ‹å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="32"&gt;&lt;strong&gt;3.2 &lt;code&gt;&amp;lt;product_info&amp;gt;&lt;/code&gt; åŒºåŸŸ&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;æ­¤åŒºåŸŸæä¾›æ„å»ºçš„å…ƒæ•°æ®ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;chipid flavor=&amp;quot;...&amp;quot; cmm_var=&amp;quot;...&amp;quot;&amp;gt;&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å±æ€§&lt;/strong&gt;: &lt;code&gt;flavor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;: å»ºç«‹äº§å“é£å‘³ä¸ç‰¹å®šèŠ¯ç‰‡ ID ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚è¿™ä½¿å¾—æ„å»ºç³»ç»ŸçŸ¥é“ &lt;code&gt;8155_la&lt;/code&gt; é£å‘³å¯¹åº”çš„æ˜¯ &lt;code&gt;SDM855&lt;/code&gt; èŠ¯ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±æ€§&lt;/strong&gt;: &lt;code&gt;cmm_var&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;: å®šä¹‰ä¸€ä¸ª CMM è„šæœ¬å˜é‡åã€‚æ„å»ºç³»ç»Ÿä¼šå°†è¯¥æ ‡ç­¾çš„å€¼èµ‹ç»™è¿™ä¸ªå˜é‡ï¼Œä¾›å¤–éƒ¨å·¥å…·ï¼ˆå°¤å…¶æ˜¯ Trace32ï¼‰ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="33"&gt;&lt;strong&gt;3.3 &lt;code&gt;&amp;lt;partition_info&amp;gt;&lt;/code&gt; åŒºåŸŸ&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;æ­¤åŒºåŸŸå®šä¹‰ä¸åˆ†åŒºæ“ä½œç›¸å…³çš„ä¿¡æ¯ã€‚&lt;/p&gt;</description></item><item><title>æ·±å…¥è§£æ Android ProtoLogï¼šé«˜æ€§èƒ½ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ</title><link>https://ethen-cao.github.io/ethenslab/android-dev/debug/protolog/</link><pubDate>Thu, 28 Aug 2025 19:54:57 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/debug/protolog/</guid><description>&lt;p&gt;åœ¨ Android ç³»ç»Ÿå¼€å‘å’Œæ€§èƒ½ä¼˜åŒ–ä¸­ï¼Œæ—¥å¿—è®°å½•æ˜¯ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚ç„¶è€Œï¼Œä¼ ç»Ÿçš„å­—ç¬¦ä¸²æ—¥å¿—ï¼ˆå¦‚ Log.d, Log.eï¼‰åœ¨é«˜é¢‘æˆ–æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸‹ä¼šå¸¦æ¥æ˜¾è‘—çš„å¼€é”€ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒAndroid å›¢é˜Ÿå¼•å…¥äº†ä¸€å¥—åä¸º &lt;strong&gt;ProtoLog&lt;/strong&gt; çš„é«˜æ€§èƒ½æ—¥å¿—ç³»ç»Ÿã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ ProtoLog çš„è®¾è®¡ç†å¿µã€å·¥ä½œæœºåˆ¶ã€ä½¿ç”¨åœºæ™¯ä»¥åŠå¦‚ä½•ä¸º ROM å¼€å‘è¿›è¡Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;h2 id="1-ç®€ä»‹protolog-æ˜¯ä»€ä¹ˆ"&gt;&lt;strong&gt;1. ç®€ä»‹ï¼šProtoLog æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ProtoLog&lt;/strong&gt; æ˜¯ä¸€å¥—é«˜æ€§èƒ½ã€ä½å¼€é”€çš„æ—¥å¿—è®°å½•æ¡†æ¶ï¼Œæ·±åº¦é›†æˆåœ¨ Android å¼€æºé¡¹ç›® (AOSP) ä¸­ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†æ—¥å¿—è®°å½•å¯¹è¿è¡Œæ—¶æ€§èƒ½çš„å½±å“é™åˆ°æœ€ä½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ä¼ ç»Ÿçš„ android.util.Log ä¸åŒï¼ŒProtoLog &lt;strong&gt;ä¸ä¼šåœ¨è®¾å¤‡è¿è¡Œæ—¶å¤„ç†å’Œæ‹¼æ¥æ—¥å¿—å­—ç¬¦ä¸²&lt;/strong&gt;ã€‚ç›¸åï¼Œå®ƒé€šè¿‡ä¸€ä¸ªç²¾å·§çš„&lt;strong&gt;ç¼–è¯‘æ—¶è½¬æ¢&lt;/strong&gt;æœºåˆ¶ï¼Œå°†æ—¥å¿—è°ƒç”¨æ›¿æ¢ä¸ºå†™å…¥ç´§å‡‘äºŒè¿›åˆ¶æ•°æ®çš„æŒ‡ä»¤ã€‚è¿™ä½¿å¾—å³ä½¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¼€å¯å¤§é‡æ—¥å¿—ï¼Œä¹Ÿä¸ä¼šå¯¹è®¾å¤‡æ€§èƒ½é€ æˆæ˜æ˜¾å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒä¼˜åŠ¿ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æè‡´æ€§èƒ½&lt;/strong&gt;ï¼šé¿å…äº†è¿è¡Œæ—¶çš„å­—ç¬¦ä¸²æ“ä½œã€æ ¼å¼åŒ–å’Œå†…å­˜åˆ†é…ï¼ŒCPU å’Œå†…å­˜å¼€é”€æä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äºŒè¿›åˆ¶æ ¼å¼&lt;/strong&gt;ï¼šæ—¥å¿—ä»¥é«˜æ•ˆçš„ Protocol Buffers (Protobuf) æ ¼å¼å†™å…¥æµä¸­ï¼Œä½“ç§¯å°ï¼Œä¾¿äºæœºå™¨è§£æã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–è¯‘æ—¶å¤„ç†&lt;/strong&gt;ï¼šå¤§éƒ¨åˆ†å·¥ä½œï¼ˆå¦‚è§£ææ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼‰åœ¨ç¼–è¯‘ä»£ç æ—¶å®Œæˆï¼Œè€Œéåœ¨è®¾å¤‡ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€æ§åˆ¶&lt;/strong&gt;ï¼šå¯ä»¥é€šè¿‡ adb å‘½ä»¤åŠ¨æ€å¼€å¯æˆ–å…³é—­ä¸åŒçš„æ—¥å¿—ç»„ï¼Œæ— éœ€é‡æ–°ç¼–è¯‘æˆ–é‡å¯è®¾å¤‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2-æ¶æ„ä¸å·¥ä½œæœºåˆ¶"&gt;&lt;strong&gt;2. æ¶æ„ä¸å·¥ä½œæœºåˆ¶&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;ProtoLog çš„é­”åŠ›åœ¨äºå…¶ç‹¬ç‰¹çš„ç¼–è¯‘æ—¶å¤„ç†æµç¨‹ã€‚å®ƒä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ProtoLog API&lt;/strong&gt;ï¼šä¾›å¼€å‘è€…è°ƒç”¨çš„æ—¥å¿—æ¥å£ï¼Œå¦‚ ProtoLog.d(GROUP, &amp;ldquo;format string %d&amp;rdquo;, value)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Javac ç¼–è¯‘å™¨æ’ä»¶&lt;/strong&gt;ï¼šè¿™æ˜¯ ProtoLog çš„æ ¸å¿ƒã€‚åœ¨ Java ä»£ç ç¼–è¯‘æœŸé—´ï¼Œè¯¥æ’ä»¶ä¼šæ‰«ææ‰€æœ‰ ProtoLog API è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äºŒè¿›åˆ¶æ—¥å¿—æµ&lt;/strong&gt;ï¼šè®¾å¤‡ä¸Šå®é™…è®°å½•çš„æ•°æ®æ ¼å¼ï¼Œå®ƒä¸åŒ…å«åŸå§‹çš„å­—ç¬¦ä¸²ï¼Œå¹¶è¢«å†™å…¥ä¸€ä¸ªä¸“ç”¨çš„ protolog æ—¥å¿—ç¼“å†²åŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Viewer (æŸ¥çœ‹å™¨) å·¥å…·&lt;/strong&gt;ï¼šç”¨äºå°†è®¾å¤‡ä¸Šæ•è·çš„äºŒè¿›åˆ¶æ—¥å¿—æµè½¬æ¢å›äººç±»å¯è¯»çš„æ–‡æœ¬æ ¼å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å·¥ä½œæµç¨‹è¯¦è§£"&gt;&lt;strong&gt;å·¥ä½œæµç¨‹è¯¦è§£&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£å…¶å®Œæ•´çš„å·¥ä½œæµç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç¼–å†™ä»£ç &lt;br&gt;
å¼€å‘è€…åœ¨ä»£ç ä¸­å†™å…¥ä¸€æ¡ ProtoLog æ—¥å¿—ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;import&lt;/span&gt; com.android.server.wm.ProtoLogGroup;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;import&lt;/span&gt; com.android.internal.protolog.common.ProtoLog;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// ... &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ProtoLog.&lt;span style="color:#a6e22e"&gt;v&lt;/span&gt;(ProtoLogGroup.&lt;span style="color:#a6e22e"&gt;WM_DEBUG_ORIENTATION&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;Setting orientation to %d&amp;#34;&lt;/span&gt;, newOrientation);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼–è¯‘æ—¶è½¬æ¢ (å…³é”®æ­¥éª¤)&lt;br&gt;
å½“ç¼–è¯‘å™¨ï¼ˆJavacï¼‰å¤„ç†è¿™æ®µä»£ç æ—¶ï¼ŒProtoLog çš„ç¼–è¯‘å™¨æ’ä»¶ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/p&gt;</description></item><item><title>æ™ºèƒ½åº§èˆ±éœ€æ±‚åˆ†æä¸æŠ€æœ¯åˆ†ææ¨¡æ¿</title><link>https://ethen-cao.github.io/ethenslab/ivi-solution/solution-template/requirements-analysis/</link><pubDate>Thu, 28 Aug 2025 16:25:03 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/ivi-solution/solution-template/requirements-analysis/</guid><description>&lt;h2 id="æ™ºèƒ½åº§èˆ±éœ€æ±‚åˆ†æä¸æŠ€æœ¯åˆ†ææ¨¡æ¿"&gt;&lt;strong&gt;æ™ºèƒ½åº§èˆ±éœ€æ±‚åˆ†æä¸æŠ€æœ¯åˆ†ææ¨¡æ¿&amp;rsquo; / Intelligent Cockpit Requirement Analysis &amp;amp; Technical Review Template&lt;/strong&gt;&lt;/h2&gt;
&lt;h2 id="1-éœ€æ±‚èƒŒæ™¯-requirement-background"&gt;&lt;strong&gt;1. éœ€æ±‚èƒŒæ™¯ (Requirement Background)&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id="11-éœ€æ±‚æ¥æº-requirement-source"&gt;&lt;strong&gt;1.1 éœ€æ±‚æ¥æº (Requirement Source)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input disabled="" type="checkbox"&gt; OEM&lt;/li&gt;
&lt;li&gt;&lt;input disabled="" type="checkbox"&gt; Tier1&lt;/li&gt;
&lt;li&gt;&lt;input disabled="" type="checkbox"&gt; å†…éƒ¨ä¸šåŠ¡/äº§å“éƒ¨é—¨ (Internal Business/Product Dept.)&lt;/li&gt;
&lt;li&gt;&lt;input disabled="" type="checkbox"&gt; åˆä½œä¼™ä¼´ (Partners)&lt;/li&gt;
&lt;li&gt;&lt;input disabled="" type="checkbox"&gt; ç«å“åˆ†æ (Competitive Analysis)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="12-ä¸šåŠ¡ç›®æ ‡-business-objectives"&gt;&lt;strong&gt;1.2 ä¸šåŠ¡ç›®æ ‡ (Business Objectives)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³çš„æ ¸å¿ƒé—®é¢˜ (Core Problem to Solve):&lt;/strong&gt; &lt;code&gt;[æè¿°ç”¨æˆ·ç—›ç‚¹æˆ–æŠ€æœ¯ç“¶é¢ˆ / Describe user pain points or technical bottlenecks]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æ’‘çš„ä¸šåŠ¡ç›®æ ‡ (Supporting Business Objectives):&lt;/strong&gt; &lt;code&gt;[æå‡ç”¨æˆ·ä½“éªŒã€é™ä½æˆæœ¬ã€æ»¡è¶³æ³•è§„ã€å®ç°æŠ€æœ¯é¢†å…ˆç­‰ / Enhance UX, reduce cost, meet regulations, achieve technical leadership, etc.]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="13-ç”¨æˆ·åœºæ™¯ä¸ä¸­å¿ƒè®¾è®¡-user-scenarios--centered-design"&gt;&lt;strong&gt;1.3 ç”¨æˆ·åœºæ™¯ä¸ä¸­å¿ƒè®¾è®¡ (User Scenarios &amp;amp; Centered Design)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹ç”¨æˆ· (Typical Users):&lt;/strong&gt; &lt;code&gt;[é©¾é©¶å‘˜ / ä¹˜å®¢ / ç»´ä¿®äººå‘˜ / äº‘ç«¯å¹³å°ç­‰ï¼›åŒ…æ‹¬è¾¹ç¼˜ç”¨æˆ·å¦‚è€äººã€å„¿ç«¥æˆ–æ®‹éšœäººå£« / Driver / Passenger / Technician / Cloud Platform, etc.; include edge users like elderly, children, or people with disabilities]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯æè¿° (User Story):&lt;/strong&gt; &lt;code&gt;[ä»¥æ•…äº‹å½¢å¼æè¿°ç”¨æˆ·ä½¿ç”¨åœºæ™¯åŠæ•ˆæœ / Describe user scenarios and outcomes in a story format]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·æ—…ç¨‹åœ°å›¾ (User Journey Map):&lt;/strong&gt; &lt;code&gt;[æè¿°ç”¨æˆ·ä»æ¥è§¦åˆ°å®Œæˆäº¤äº’çš„å®Œæ•´è·¯å¾„ï¼ŒåŒ…æ‹¬ç—›ç‚¹å’Œæœºä¼šç‚¹ï¼›å¯é€‰é™„å›¾å ä½ç¬¦ / Describe the user's complete path from initial contact to interaction completion, including pain points and opportunities; optional placeholder for a diagram]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·éªŒè¯æœºåˆ¶ (User Validation Mechanism):&lt;/strong&gt; &lt;code&gt;[A/Bæµ‹è¯•ã€åŸå‹åé¦ˆã€ç”¨æˆ·è°ƒç ”æ–¹æ³•ç­‰ï¼Œç¡®ä¿éœ€æ±‚æºäºçœŸå®æ´å¯Ÿ / A/B testing, prototype feedback, user research methods, etc., to ensure requirements are based on real insights]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="14-ç«å“å¯¹æ¯”-competitive-analysis-å¯é€‰optional"&gt;&lt;strong&gt;1.4 ç«å“å¯¹æ¯” (Competitive Analysis) (å¯é€‰/Optional)&lt;/strong&gt;&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç«å“ (Competitor)&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½ (Feature)&lt;/th&gt;
&lt;th&gt;å®ç°æŠ€æœ¯ (Technology)&lt;/th&gt;
&lt;th&gt;ç”¨æˆ·è¯„åˆ†/å¸‚åœºä»½é¢ (Rating/Market Share)&lt;/th&gt;
&lt;th&gt;ä¼˜ç¼ºç‚¹ (SWOT Analysis)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Tesla&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[ç¤ºä¾‹ / Example]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[ç¤ºä¾‹ / Example]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[ç¤ºä¾‹ / Example]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[Strengths/Weaknesses/Opportunities/Threats]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Xpeng&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Nio&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="2-éœ€æ±‚æè¿°-requirement-specification"&gt;&lt;strong&gt;2. éœ€æ±‚æè¿° (Requirement Specification)&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id="21-åŠŸèƒ½éœ€æ±‚-functional-requirements"&gt;&lt;strong&gt;2.1 åŠŸèƒ½éœ€æ±‚ (Functional Requirements)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;FR-001:&lt;/strong&gt; &lt;code&gt;[æ¡ç›®åŒ–åˆ—å‡ºåŠŸèƒ½ç‚¹ / List functional items]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;FR-002:&lt;/strong&gt; &lt;code&gt;...&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AI/MLéœ€æ±‚ (AI/ML Requirements):&lt;/strong&gt; &lt;code&gt;[æ˜ç¡®AIåŠŸèƒ½ï¼Œå¦‚èˆ±å†…ç›‘æµ‹ã€æƒ…æ„Ÿè¯†åˆ«ã€é¢„æµ‹æ€§ç»´æŠ¤ï¼›åŒ…æ‹¬å¤šæ¨¡æ€äº¤äº’å¦‚è¯­éŸ³/æ‰‹åŠ¿ / Specify AI functions, e.g., in-cabin monitoring, emotion recognition, predictive maintenance; include multi-modal interactions like voice/gesture]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="22-éåŠŸèƒ½éœ€æ±‚-non-functional-requirements-nfrs"&gt;&lt;strong&gt;2.2 éåŠŸèƒ½éœ€æ±‚ (Non-Functional Requirements, NFRs)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ (Performance):&lt;/strong&gt; &lt;code&gt;[å¯åŠ¨æ—¶é—´ &amp;lt; 500ms, å¸§ç‡ &amp;gt; 60fps, APIå“åº” &amp;lt; 100ms / Boot time &amp;lt; 500ms, Frame rate &amp;gt; 60fps, API response &amp;lt; 100ms]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸè€— (Power Consumption):&lt;/strong&gt; &lt;code&gt;[å¾…æœº/ä¼‘çœ åŠŸè€— &amp;lt; 10mA, å³°å€¼å¢é‡ &amp;lt; 5W / Standby/sleep power &amp;lt; 10mA, Peak increase &amp;lt; 5W]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¨³å®šæ€§ (Stability):&lt;/strong&gt; &lt;code&gt;[å¯ç”¨æ€§ &amp;gt; 99.99%, Crashç‡ &amp;lt; 0.01%, 7x24hç¨³å®šè¿è¡Œ / Availability &amp;gt; 99.99%, Crash rate &amp;lt; 0.01%, Stable for 7x24h operation]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨ (Security):&lt;/strong&gt; &lt;code&gt;[æ•°æ®åŠ å¯†ã€è®¿é—®æ§åˆ¶ã€å®‰å…¨å¯åŠ¨ç­‰ / Data encryption, access control, secure boot, etc.]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·ä½“éªŒ (User Experience):&lt;/strong&gt; &lt;code&gt;[æµç•…åº¦ã€ä¸€è‡´æ€§ã€æ˜“ç”¨æ€§ã€æƒ…æ„ŸåŒ–äº¤äº’ / Smoothness, consistency, usability, emotional interaction]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯æŒç»­æ€§ (Sustainability):&lt;/strong&gt; &lt;code&gt;[ç¢³è¶³è¿¹ä¼˜åŒ–ã€èƒ½æºæ•ˆç‡æŒ‡æ ‡ï¼Œå¦‚æ”¯æŒç”µåŠ¨è½¦ç»­èˆªçš„åŠŸè€—ç®¡ç† / Carbon footprint optimization, energy efficiency metrics, e.g., power management to support EV range]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="23-æ¥å£ä¸ä¾èµ–éœ€æ±‚-interface--dependency-requirements"&gt;&lt;strong&gt;2.3 æ¥å£ä¸ä¾èµ–éœ€æ±‚ (Interface &amp;amp; Dependency Requirements)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹å†…æ¥å£ (Internal Interfaces):&lt;/strong&gt; &lt;code&gt;[CANæ€»çº¿ã€éŸ³è§†é¢‘æœåŠ¡ã€å¯¼èˆªå¼•æ“APIç­‰ / CAN bus, A/V services, navigation engine APIs, etc.]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹å¤–æ¥å£ (External Interfaces):&lt;/strong&gt; &lt;code&gt;[äº‘ç«¯TSPå¹³å°ã€æ‰‹æœºAPPã€ç¬¬ä¸‰æ–¹åº”ç”¨æ¥å£ / Cloud TSP platform, mobile app, 3rd-party application APIs]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶ä¾èµ– (Hardware Dependencies):&lt;/strong&gt; &lt;code&gt;[NPU/GPU/Sensor/æ˜¾ç¤ºå±è§„æ ¼ç­‰ / NPU/GPU/Sensor/Display specifications, etc.]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OS/ä¸­é—´ä»¶ä¾èµ– (OS/Middleware Dependencies):&lt;/strong&gt; &lt;code&gt;[Android/QNX/Hypervisor/Service Mesh/é€šä¿¡åè®®æ ˆï¼›åŒ…æ‹¬è½¯ä»¶å®šä¹‰è½¦è¾†ï¼ˆSDVï¼‰å¦‚è¾¹ç¼˜è®¡ç®—ã€5G/V2X / Android/QNX/Hypervisor/Service Mesh/Protocol stacks; include SDV concepts like Edge Computing, 5G/V2X]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸‰æ–¹åº“/æœåŠ¡ä¾èµ– (3rd-Party Library/Service Dependencies):&lt;/strong&gt; &lt;code&gt;[åœ°å›¾SDKã€è¯­éŸ³å¼•æ“ã€åº”ç”¨å•†åº—ç­‰ / Map SDK, speech engine, app store, etc.]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="24-ä¼˜å…ˆçº§è¯„ä¼°-priority-assessment"&gt;&lt;strong&gt;2.4 ä¼˜å…ˆçº§è¯„ä¼° (Priority Assessment)&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨MoSCoWæ–¹æ³• (Using MoSCoW Method).&lt;/p&gt;</description></item><item><title>Android Binder é€šä¿¡æ¨¡å‹ä¸å†…å­˜ç®¡ç†æœºåˆ¶è¯¦è§£</title><link>https://ethen-cao.github.io/ethenslab/android-dev/basic-communication-mechanism/binder/</link><pubDate>Thu, 28 Aug 2025 14:30:02 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/basic-communication-mechanism/binder/</guid><description>&lt;p&gt;Binder æ˜¯ Android ç³»ç»Ÿä¸­è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰çš„åŸºçŸ³ã€‚ä¸åŒäº Linux ä¼ ç»Ÿçš„ç®¡é“ã€Socket æˆ–å…±äº«å†…å­˜ï¼ŒBinder æä¾›äº†ä¸€ç§åŸºäº C/S æ¶æ„ã€æ”¯æŒå¯¹è±¡ä¼ è¾“ä¸”å†…å­˜é«˜æ•ˆçš„é€šä¿¡æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ¡£å°†æ·±å…¥å‰–æ Binder çš„åŒæ­¥/å¼‚æ­¥é€šä¿¡æ¨¡å‹ã€çº¿ç¨‹è°ƒåº¦ç­–ç•¥ä»¥åŠå†…æ ¸å±‚çš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id="1-é€šä¿¡æ¨¡å‹æ¦‚è¿°"&gt;1. é€šä¿¡æ¨¡å‹æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;Binder é©±åŠ¨é€šè¿‡ &lt;code&gt;ioctl&lt;/code&gt; ç³»ç»Ÿè°ƒç”¨ä¸ç”¨æˆ·ç©ºé—´äº¤äº’ã€‚æ ¹æ®äº‹åŠ¡æ ‡å¿—ä½ï¼ˆFlagsï¼‰ï¼Œé€šä¿¡æ¨¡å¼ä¸»è¦åˆ†ä¸ºä¸¤ç±»ã€‚&lt;/p&gt;
&lt;h3 id="11-åŒæ­¥é€šä¿¡-synchronous"&gt;1.1 åŒæ­¥é€šä¿¡ (Synchronous)&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯ Binder çš„é»˜è®¤é€šä¿¡æ¨¡å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æµç¨‹&lt;/strong&gt;ï¼šClient å‘èµ·è°ƒç”¨åï¼Œå…¶çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ˆBlockedï¼‰ï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚Binder é©±åŠ¨å”¤é†’ Server ç«¯çº¿ç¨‹å¤„ç†è¯·æ±‚ã€‚Server å¤„ç†å®Œæ¯•å¹¶å°†ç»“æœå†™å…¥é©±åŠ¨åï¼Œé©±åŠ¨å”¤é†’ Client çº¿ç¨‹ï¼ŒClient è·å–è¿”å›å€¼ç»§ç»­æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹æ€§&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼ºä¸€è‡´æ€§&lt;/strong&gt;ï¼šClient ç¡®åˆ‡çŸ¥é“ Server ä½•æ—¶å¤„ç†å®Œæ¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆçº§ç»§æ‰¿&lt;/strong&gt;ï¼šä¸ºé˜²æ­¢ä¼˜å…ˆçº§åè½¬ï¼Œé©±åŠ¨ä¼šå°† Client çº¿ç¨‹çš„ä¼˜å…ˆçº§ä¸´æ—¶â€œå€Ÿâ€ç»™ Server çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºé™åˆ¶&lt;/strong&gt;ï¼šå—é™äºè°ƒç”¨æ ˆæ·±åº¦å’Œçº¿ç¨‹æ± å¤§å°ï¼Œè¿‡å¤šçš„åŒæ­¥é“¾è°ƒç”¨å¯èƒ½å¯¼è‡´æ­»é”æˆ– watchdog è¶…æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="åŒæ­¥é€šä¿¡çº¿ç¨‹è°ƒåº¦ä¸ä¼˜å…ˆçº§ç»§æ‰¿"&gt;åŒæ­¥é€šä¿¡çº¿ç¨‹è°ƒåº¦ä¸ä¼˜å…ˆçº§ç»§æ‰¿&lt;/h4&gt;
&lt;p&gt;åœ¨åŒæ­¥é€šä¿¡ï¼ˆSynchronous IPCï¼‰ä¸­ï¼ŒClient ç«¯å‘èµ·è¯·æ±‚åä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼ˆBlockedï¼‰ï¼Œç›´åˆ° Server ç«¯è¿”å›ç»“æœã€‚Binder é©±åŠ¨åœ¨æ­¤è¿‡ç¨‹ä¸­æ‰®æ¼”äº†â€œè°ƒåº¦å‘˜â€çš„è§’è‰²ï¼Œä¸ä»…è´Ÿè´£æ•°æ®çš„ä¼ é€’ï¼Œè¿˜è´Ÿè´£åè°ƒåŒæ–¹çº¿ç¨‹çš„æ‰§è¡ŒçŠ¶æ€å’Œä¼˜å…ˆçº§ã€‚&lt;/p&gt;
&lt;h5 id="æ ¸å¿ƒæœºåˆ¶"&gt;æ ¸å¿ƒæœºåˆ¶&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é˜»å¡ç­‰å¾…&lt;/strong&gt;ï¼šClient çº¿ç¨‹è°ƒç”¨ &lt;code&gt;ioctl&lt;/code&gt; å‘é€äº‹åŠ¡åï¼Œä¼šåœ¨å†…æ ¸ä¸­ä¼‘çœ ï¼Œç­‰å¾… Server çš„å›å¤ï¼ˆReplyï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆçº§ç»§æ‰¿&lt;/strong&gt;ï¼šå¦‚æœ Client çš„ä¼˜å…ˆçº§é«˜äº Server çº¿ç¨‹ï¼ŒBinder é©±åŠ¨ä¼šå°† Server çº¿ç¨‹çš„ä¼˜å…ˆçº§ä¸´æ—¶æå‡è‡³ä¸ Client ä¸€è‡´ï¼Œä»¥é¿å…â€œä¼˜å…ˆçº§åè½¬â€é—®é¢˜ã€‚å½“ Server å¤„ç†å®Œè¯·æ±‚åï¼Œæ¢å¤åŸä¼˜å…ˆçº§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹æ ˆç®¡ç†&lt;/strong&gt;ï¼šBinder é©±åŠ¨ç»´æŠ¤äº† &lt;code&gt;transaction_stack&lt;/code&gt;ï¼Œç”¨äºè¿½è¸ªè·¨è¿›ç¨‹è°ƒç”¨çš„åµŒå¥—å…³ç³»ï¼ˆå¦‚ A-&amp;gt;B-&amp;gt;Cï¼‰ï¼Œç¡®ä¿å›å¤èƒ½æ­£ç¡®å±‚å±‚è¿”å›ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id="åŒæ­¥é€šä¿¡æ—¶åºå›¾"&gt;åŒæ­¥é€šä¿¡æ—¶åºå›¾&lt;/h5&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªå®Œæ•´çš„åŒæ­¥è°ƒç”¨é—­ç¯ï¼šClient å‘é€è¯·æ±‚ -&amp;gt; Server è¢«å”¤é†’å¤„ç† -&amp;gt; Server è¿”å›ç»“æœ -&amp;gt; Client è¢«å”¤é†’ã€‚&lt;/p&gt;</description></item><item><title>Netflix DRM æµç¨‹ä¸ç™½åå•éªŒè¯</title><link>https://ethen-cao.github.io/ethenslab/explore-ai/netflix-verification/</link><pubDate>Wed, 27 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/netflix-verification/</guid><description>&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/netflix-verification.png" alt="" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·æ“ä½œ&lt;/strong&gt;ï¼šç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ Netflix å¹¶ç‚¹å‡»æ’­æ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯·æ±‚æ¸…å•&lt;/strong&gt;ï¼šæµè§ˆå™¨å‘ Netflix æœåŠ¡å™¨è¯·æ±‚è§†é¢‘çš„å…ƒæ•°æ®ï¼ˆManifest æ–‡ä»¶ï¼Œå¦‚ MPDï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–åˆå§‹åŒ–æ•°æ®&lt;/strong&gt;ï¼šNetflix æœåŠ¡å™¨è¿”å› Manifest æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†è§†é¢‘çš„åŠ å¯†ä¿¡æ¯å’Œåˆå§‹åŒ–æ•°æ®ï¼ˆPSSHï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆè®¸å¯è¯è¯·æ±‚&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æµè§ˆå™¨é€šè¿‡ EME API å°† PSSH æ•°æ®ä¼ é€’ç»™ CDMã€‚&lt;/li&gt;
&lt;li&gt;CDM æ ¹æ®è¿™äº›æ•°æ®ç”Ÿæˆä¸€ä¸ªåŠ å¯†çš„â€œè®¸å¯è¯è¯·æ±‚ (License Request)â€ã€‚&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶ï¼Œæµè§ˆå™¨å·²ç»å¯ä»¥æŸ¥è¯¢åˆ° CDM çš„å®‰å…¨çº§åˆ«æ˜¯ L1 è¿˜æ˜¯ L3ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘é€è¯·æ±‚è‡³æœåŠ¡å™¨&lt;/strong&gt;ï¼šæµè§ˆå™¨å°†è¿™ä¸ªâ€œè®¸å¯è¯è¯·æ±‚â€è¿åŒè‡ªèº«çš„ User-Agent ç­‰ä¿¡æ¯ï¼Œä¸€èµ·å‘é€ç»™ Netflix çš„è®¸å¯è¯æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨ç«¯æ ¸å¿ƒéªŒè¯&lt;/strong&gt;ï¼š&lt;strong&gt;è¿™æ˜¯ç™½åå•éªŒè¯å‘ç”Ÿçš„åœ°æ–¹&lt;/strong&gt;ã€‚Netflix æœåŠ¡å™¨ä¼šå¯¹æ”¶åˆ°çš„æ‰€æœ‰ä¿¡æ¯è¿›è¡Œä¸¥æ ¼æ ¡éªŒï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¾å¤‡ä¿¡æ¯&lt;/strong&gt;ï¼šæµè§ˆå™¨ç±»å‹ã€ç‰ˆæœ¬ï¼Œæ“ä½œç³»ç»Ÿï¼ŒCDM æ¨¡å—ç‰ˆæœ¬æ˜¯å¦åœ¨å…è®¸çš„ç»„åˆï¼ˆç™½åå•ï¼‰å†…ï¼Ÿ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨çº§åˆ«&lt;/strong&gt;ï¼šCDM æ˜¯å¦ä¸º L1ï¼ˆç¡¬ä»¶çº§è§£å¯†ï¼Œå¯æ’­æ”¾é«˜æ¸…ï¼‰ï¼Ÿ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´¦æˆ·çŠ¶æ€&lt;/strong&gt;ï¼šç”¨æˆ·è´¦æˆ·æ˜¯å¦æœ‰æ•ˆï¼Ÿè®¢é˜…å¥—é¤æ˜¯å¦æ”¯æŒé«˜æ¸…/4Kï¼Ÿåœ°ç†ä½ç½®æ˜¯å¦åœ¨æœåŠ¡åŒºå†…ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸‹å‘è®¸å¯è¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éªŒè¯é€šè¿‡&lt;/strong&gt;ï¼šå¦‚æœä¸€åˆ‡ç¬¦åˆè¦æ±‚ï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«è§£å¯†å¯†é’¥çš„â€œè®¸å¯è¯ (License)â€ï¼Œå¹¶å°†å…¶å‘é€å›æµè§ˆå™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éªŒè¯å¤±è´¥æˆ–é™çº§&lt;/strong&gt;ï¼šå¦‚æœè®¾å¤‡ä¸åœ¨ç™½åå•ï¼Œæˆ–è€… CDM ä»…ä¸º L3ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šåªå‘æ”¾ä¸€ä¸ªå…è®¸æ’­æ”¾æ ‡æ¸… (SD) å†…å®¹çš„è®¸å¯è¯ï¼Œæˆ–è€…ç›´æ¥æ‹’ç»è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å¯†ä¸æ’­æ”¾&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æµè§ˆå™¨é€šè¿‡ EME API å°†æ”¶åˆ°çš„â€œè®¸å¯è¯â€äº¤ç»™ CDMã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº L1 çº§åˆ«ï¼ŒCDM ä¼šåœ¨ç¡¬ä»¶å®‰å…¨åŒºï¼ˆTEE - Trusted Execution Environmentï¼‰å†…å¤„ç†è®¸å¯è¯ï¼Œè·å–å†…å®¹å¯†é’¥ï¼Œå¹¶è§£å¯†è§†é¢‘æµã€‚&lt;/li&gt;
&lt;li&gt;è§£å¯†åçš„è§†é¢‘å¸§è¢«å®‰å…¨åœ°æ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>QNN HTP (ONNX Runtime) æ¶æ„åŸç†ä¸å…¨é“¾è·¯è°ƒç”¨è¯¦è§£</title><link>https://ethen-cao.github.io/ethenslab/explore-ai/onnx-runtime/</link><pubDate>Wed, 27 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/onnx-runtime/</guid><description>&lt;h2 id="1-æ¶æ„å…¨æ™¯å›¾"&gt;1. æ¶æ„å…¨æ™¯å›¾&lt;/h2&gt;
&lt;p&gt;æœ¬æ¶æ„å›¾å±•ç¤ºäº†ä» Android åº”ç”¨å±‚ï¼ˆCPUï¼‰åˆ°é«˜é€š Hexagon DSPï¼ˆNPUï¼‰å±‚çš„å®Œæ•´è°ƒç”¨é“¾è·¯ã€‚&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒè®¾è®¡ç†å¿µåœ¨äº &lt;strong&gt;æ§åˆ¶ä¸æ•°æ®åˆ†ç¦»&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶æµ&lt;/strong&gt;ï¼šåˆ©ç”¨ &lt;strong&gt;FastRPC&lt;/strong&gt; è·¨è¶Šå¤„ç†å™¨è¾¹ç•Œï¼Œå°†å­˜å‚¨åœ¨ CPU æ–‡ä»¶ç³»ç»Ÿä¸­çš„ NPU é©±åŠ¨ä»£ç ï¼ˆSkelï¼‰åŠ¨æ€â€œä¾§è½½â€ (Side-load) åˆ° DSP ä¸­è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æµ&lt;/strong&gt;ï¼šåˆ©ç”¨ &lt;strong&gt;ION/DMA-BUF&lt;/strong&gt; å…±äº«å†…å­˜å®ç°é›¶æ‹·è´ä¼ è¾“ï¼Œç¡®ä¿è¯æ¨ç†æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme plain
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontSize 13
skinparam defaultFontColor black
skinparam arrowColor #333333
skinparam nodesep 50
skinparam ranksep 40
skinparam linetype ortho
&amp;#39; --- æ ·å¼å®šä¹‰ ---
skinparam rectangle {
BackgroundColor #F5F5F5
BorderColor #9E9E9E
RoundCorner 6
}
skinparam component {
BackgroundColor #E3F2FD
BorderColor #1E88E5
}
skinparam file {
BackgroundColor #FFF9C4
BorderColor #FBC02D
}
title QNN HTP Architecture: Full Lifecycle
&amp;#39; --- å›¾ä¾‹ (Legend) ---
legend right
| é¢œè‰² | é˜¶æ®µ / å«ä¹‰ |
| &amp;lt;#FF0000&amp;gt; | &amp;lt;b&amp;gt;Phase 1: åˆå§‹åŒ–ä¸å»ºå›¾&amp;lt;/b&amp;gt; (åªè¿è¡Œä¸€æ¬¡) |
| &amp;lt;#0000FF&amp;gt; | &amp;lt;b&amp;gt;Side-load å›ç¯&amp;lt;/b&amp;gt; (é©±åŠ¨åŠ è½½ Skel æ–‡ä»¶) |
| &amp;lt;#008000&amp;gt; | &amp;lt;b&amp;gt;Phase 2: æ¨ç†æ‰§è¡Œ&amp;lt;/b&amp;gt; (æ¯å¸§è¿è¡Œ, é«˜é¢‘) |
endlegend
node &amp;#34;Qualcomm SoC&amp;#34; {
rectangle &amp;#34;CPU Subsystem (Application Processor)&amp;#34; as CPU_DOMAIN {
rectangle &amp;#34;1. App Process Space&amp;#34; as LAYER_APP {
component &amp;#34;\tApp Code\t&amp;#34; as AppCode
file &amp;#34;Assets/model.onnx&amp;#34; as Model
rectangle &amp;#34;Native Libraries&amp;#34; {
component &amp;#34;ONNX Runtime&amp;#34; as ORT
component &amp;#34;\t\tQNN EP\t\t&amp;#34; as QNN_EP
package &amp;#34;QNN SDK&amp;#34; {
component &amp;#34;Backend Manager\n(libQnnHtp.so)&amp;#34; as QnnHtp
component &amp;#34;\t\t\t\t\t\tStub(CPU Proxy)\t\t\t\t\t\t&amp;#34; as QnnStub
}
file &amp;#34;libQnnHtpVxxSkel.so\n(Disk Artifact)&amp;#34; as SkelFile
}
}
rectangle &amp;#34;2. System / Kernel&amp;#34; as LAYER_SYS {
component &amp;#34;\t\tFastRPC Lib\t\t&amp;#34; as FastRPC
component &amp;#34;\t\t\tFastRPC Driver\t\t\t&amp;#34; as Driver
database &amp;#34;Shared Memory\n(ION / DMA-BUF)&amp;#34; as Mem
}
}
rectangle &amp;#34;DSP Subsystem&amp;#34; as DSP_DOMAIN {
component &amp;#34;\t\tQuRT OS\t\t&amp;#34; as QuRT
package &amp;#34;Signed PD&amp;#34; {
component &amp;#34;Skel Instance\n(Running Code)&amp;#34; as SkelRun
component &amp;#34;HTP Hardware\n(NPU)&amp;#34; as HTP_HW
}
}
}
&amp;#39; =======================
&amp;#39; é€»è¾‘è¿çº¿
&amp;#39; =======================
&amp;#39; --- Phase 1: Initialization (çº¢è‰²ç®­å¤´) ---
AppCode -[#FF0000]down-&amp;gt; ORT : 1. CreateSession
ORT .[#FF0000]right.&amp;gt; Model : 2. Parse
ORT -[#FF0000]down-&amp;gt; QNN_EP : 3. Delegate
QNN_EP -[#FF0000]down-&amp;gt; QnnHtp : 4. Init
QnnHtp -[#FF0000]down-&amp;gt; QnnStub : 5. Load Stub
&amp;#39; RPC å»ºç«‹
QnnStub -[#FF0000]down-&amp;gt; FastRPC : 6. Open Session
FastRPC -[#FF0000]down-&amp;gt; Driver : 7. ioctl
&amp;#39; DSP å”¤é†’
Driver -[#FF0000]down-&amp;gt; QuRT : 8. WakeUp &amp;amp; Create PD
&amp;#39; --- Side-load Loop (è“è‰²ç®­å¤´ - åŠ è½½å›ç¯) ---
QuRT .[#0000FF]up.&amp;gt; Driver : 9. Request Load
Driver .[#0000FF]up.&amp;gt; FastRPC : 10. Upcall
FastRPC .[#0000FF]left.&amp;gt; SkelFile : 11. READ FILE
FastRPC .[#0000FF]down.&amp;gt; Mem : 12. Map to Shared Mem
Mem .[#0000FF]down.&amp;gt; SkelRun : 13. Load into DSP Mem
&amp;#39; --- Phase 2: Execution (ç»¿è‰²ç®­å¤´ - é«˜é¢‘è·¯å¾„) ---
AppCode -[#008000]right-&amp;gt; ORT : Run(Input)
ORT -[#008000]down-&amp;gt; QNN_EP
QNN_EP -[#008000]down-&amp;gt; QnnStub
&amp;#39; å†™å…¥å…±äº«å†…å­˜
QnnStub .[#008000]right.&amp;gt; Mem : 14. Write Input Tensor\n(Zero-Copy)
&amp;#39; RPC æ‰§è¡Œé“¾
QnnStub -[#008000]down-&amp;gt; FastRPC : 15. Invoke Execute
FastRPC -[#008000]down-&amp;gt; Driver
Driver -[#008000]down-&amp;gt; SkelRun : 16. Signal
SkelRun -[#008000]down-&amp;gt; HTP_HW : 17. Compute
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h2 id="2-æ ¸å¿ƒå…¨ç”Ÿå‘½å‘¨æœŸè§£è¯´"&gt;2. æ ¸å¿ƒå…¨ç”Ÿå‘½å‘¨æœŸè§£è¯´&lt;/h2&gt;
&lt;p&gt;æ•´ä¸ªè¿è¡Œè¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªä¸¥æ ¼çš„æ—¶åºé˜¶æ®µï¼Œå¯¹åº”æ¶æ„å›¾ä¸­çš„ä¸‰ç§é¢œè‰²ã€‚&lt;/p&gt;</description></item><item><title>Qualcomm Hexagon DSP å¼€å‘æŒ‡å—ï¼šAI æ¨ç†ä¸é€šç”¨è®¡ç®—</title><link>https://ethen-cao.github.io/ethenslab/explore-ai/qualcomm-hexagon-dsp-%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/</link><pubDate>Wed, 27 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/qualcomm-hexagon-dsp-%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/</guid><description>&lt;h2 id="1-æ¦‚è¿°"&gt;1. æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;åœ¨ Qualcomm Hexagon DSP çš„å¼€å‘ç”Ÿæ€ä¸­ï¼Œèµ„æºçš„ä½¿ç”¨æ–¹å¼å¹¶éå•ä¸€è·¯å¾„ã€‚æ ¹æ®åº”ç”¨åœºæ™¯ã€å¼€å‘éš¾åº¦åŠå·¥å…·é“¾çš„ä¸åŒï¼Œå¼€å‘æ¨¡å¼è¢«æ˜ç¡®åˆ’åˆ†ä¸ºä¸¤æ¡ä¸»è¦èµ›é“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ›é“ä¸€ï¼šAI æ¨ç† (AI Inference)&lt;/strong&gt; â€”â€” æ ¸å¿ƒé€»è¾‘ä¸º &lt;strong&gt;&amp;ldquo;æ¨¡å‹å³ä»£ç &amp;rdquo;&lt;/strong&gt;ã€‚åˆ©ç”¨ç°æˆçš„æ¨ç†å¼•æ“è¿è¡Œç¥ç»ç½‘ç»œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ›é“äºŒï¼šé€šç”¨è®¡ç®— (General Compute)&lt;/strong&gt; â€”â€” æ ¸å¿ƒé€»è¾‘ä¸º &lt;strong&gt;&amp;ldquo;æ‰‹å†™ç®—å­&amp;rdquo;&lt;/strong&gt;ã€‚åˆ©ç”¨åº•å±‚ SDK å¼€å‘ä»»æ„ C/C++ ç®—æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ¬æ–‡æ¡£å°†è¯¦ç»†è§£æè¿™ä¸¤æ¡èµ›é“çš„æŠ€æœ¯ç»†èŠ‚ã€æ¶æ„åŒºåˆ«åŠé€‰å‹ç­–ç•¥ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="2-èµ›é“ä¸€ai-æ¨ç†-ai-inference"&gt;2. èµ›é“ä¸€ï¼šAI æ¨ç† (AI Inference)&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯ç›®å‰ç§»åŠ¨ç«¯æœ€ä¸»æµçš„ DSP ç”¨æ³•ï¼Œæ—¨åœ¨åˆ©ç”¨ DSP/NPU åŠ é€Ÿæ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚&lt;/p&gt;
&lt;h3 id="21-æ ¸å¿ƒç‰¹å¾"&gt;2.1 æ ¸å¿ƒç‰¹å¾&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®è¯&lt;/strong&gt;ï¼š&lt;code&gt;TFLite&lt;/code&gt;, &lt;code&gt;ONNX Runtime&lt;/code&gt;, &lt;code&gt;SNPE&lt;/code&gt;, &lt;code&gt;QNN&lt;/code&gt;, &lt;code&gt;NNAPI&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥ç‰©&lt;/strong&gt;ï¼šè®­ç»ƒå¥½çš„ç¥ç»ç½‘ç»œæ¨¡å‹æ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;.onnx&lt;/code&gt;, &lt;code&gt;.tflite&lt;/code&gt;, &lt;code&gt;.qnn&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼€å‘æ¨¡å¼&lt;/strong&gt;ï¼šé…ç½®å¼å¼€å‘ã€‚å¼€å‘è€…é€šå¸¸ä¸éœ€è¦ç¼–å†™ DSP ä¾§ä»£ç ï¼Œåªéœ€åœ¨åº”ç”¨å±‚é…ç½®â€œä»£ç†â€ï¼ˆDelegateï¼‰æˆ–â€œåç«¯â€ï¼ˆBackendï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="22-æŠ€æœ¯åŸç†"&gt;2.2 æŠ€æœ¯åŸç†&lt;/h3&gt;
&lt;p&gt;åœ¨è¿™æ¡èµ›é“ä¸­ï¼Œ&lt;strong&gt;IDLï¼ˆæ¥å£å®šä¹‰è¯­è¨€ï¼‰æ˜¯éšå½¢çš„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é«˜é€šæˆ–ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼ˆå¦‚ Googleï¼‰å·²ç»é¢„ç½®äº†é€šç”¨çš„ DSP éª¨æ¶åº“ï¼ˆä¾‹å¦‚ &lt;code&gt;libQnnDsp.so&lt;/code&gt; æˆ– &lt;code&gt;libhexagon_nn_skel.so&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è¿™äº›é¢„ç½®åº“å……å½“â€œä¸‡èƒ½ç¿»è¯‘å®˜â€ï¼Œå®ƒä»¬èƒ½è¯»å–ç¥ç»ç½‘ç»œå±‚ï¼ˆå¦‚ &lt;code&gt;Conv2d&lt;/code&gt;, &lt;code&gt;Softmax&lt;/code&gt;ï¼‰çš„å®šä¹‰ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º DSP æŒ‡ä»¤æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="23-é€‚ç”¨åœºæ™¯"&gt;2.3 é€‚ç”¨åœºæ™¯&lt;/h3&gt;
&lt;p&gt;æœ¬è´¨ä¸Šï¼Œæ­¤æ¨¡å¼ä»…é€‚ç”¨äº&lt;strong&gt;å¯ä»¥ç”¨å¼ é‡è¿ç®—æè¿°çš„ä»»åŠ¡&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®—æœºè§†è§‰ (CV)&lt;/strong&gt;ï¼šç‰©ä½“æ£€æµ‹ (YOLO)ã€å›¾åƒåˆ†ç±» (ResNet)ã€è¯­ä¹‰åˆ†å‰²ã€äººè„¸å…³é”®ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éŸ³é¢‘ AI&lt;/strong&gt;ï¼šå…³é”®è¯å”¤é†’ (KWS)ã€AI é™å™ª (RNN/LSTM)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªç„¶è¯­è¨€å¤„ç† (NLP)&lt;/strong&gt;ï¼šæ„å›¾è¯†åˆ«ã€Transformer ç±»æ¨¡å‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="24-ä¼˜ç¼ºç‚¹åˆ†æ"&gt;2.4 ä¼˜ç¼ºç‚¹åˆ†æ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;</description></item><item><title>UMLä¸­packageå’Œcomponentå¯¹æ¯”</title><link>https://ethen-cao.github.io/ethenslab/others/package-component-comparison/</link><pubDate>Wed, 27 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/others/package-component-comparison/</guid><description>&lt;h2 id="ä¸€æ¦‚å¿µæœ¬è´¨å¯¹æ¯”"&gt;ä¸€ã€æ¦‚å¿µæœ¬è´¨å¯¹æ¯”&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»´åº¦&lt;/th&gt;
&lt;th&gt;package&lt;/th&gt;
&lt;th&gt;component&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;UML åŸä¹‰&lt;/td&gt;
&lt;td&gt;é€»è¾‘åˆ†ç»„ / å‘½åç©ºé—´&lt;/td&gt;
&lt;td&gt;å¯ç‹¬ç«‹æ›¿æ¢çš„æ¨¡å— / è½¯ä»¶éƒ¨ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸»è¦ç”¨é€”&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å…ƒç´ ã€å­ç³»ç»Ÿå®¹å™¨&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºç³»ç»Ÿçš„å¯éƒ¨ç½²æ¨¡å—æˆ–åŠŸèƒ½å•å…ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å†…éƒ¨å¯ä»¥åŒ…å«&lt;/td&gt;
&lt;td&gt;ç±»ã€å…¶ä»– packageã€component&lt;/td&gt;
&lt;td&gt;ç»„ä»¶æ¥å£ã€ç±»ã€å­æ¨¡å—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¯ç‹¬ç«‹éƒ¨ç½²&lt;/td&gt;
&lt;td&gt;âŒï¼ˆåªæ˜¯å‘½åç©ºé—´ï¼‰&lt;/td&gt;
&lt;td&gt;âœ…ï¼ˆå¯ä»¥å•ç‹¬éƒ¨ç½² / æ›¿æ¢ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ˜¯å¦è¡¨ç¤ºå…·ä½“åŠŸèƒ½&lt;/td&gt;
&lt;td&gt;âŒï¼ˆä»…æ¦‚å¿µåˆ†ç»„ï¼‰&lt;/td&gt;
&lt;td&gt;âœ…ï¼ˆæä¾›æœåŠ¡æˆ–åŠŸèƒ½ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¯ç”¨åœ¨ Layer å›¾&lt;/td&gt;
&lt;td&gt;ä¸æ¨è&lt;/td&gt;
&lt;td&gt;ä¸æ¨èï¼ˆé™¤éå¼ºè°ƒæ¨¡å—ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¯ç”¨åœ¨ Subsystem å›¾&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;âœ…ï¼ˆå­æ¨¡å—ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¯æ˜¾ç¤ºæ¥å£ / å…³ç³»&lt;/td&gt;
&lt;td&gt;éƒ¨åˆ†å¯ä»¥&lt;/td&gt;
&lt;td&gt;å¯ä»¥æ˜¾ç¤ºæ¥å£ã€ä¾èµ–å…³ç³»ã€æä¾›/ä½¿ç”¨æ¥å£&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="äºŒå·¥ç¨‹å®è·µå¯¹æ¯”"&gt;äºŒã€å·¥ç¨‹å®è·µå¯¹æ¯”&lt;/h2&gt;
&lt;h3 id="1-package"&gt;1ï¸âƒ£ package&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯­ä¹‰&lt;/strong&gt;ï¼šä¸€ä¸ªâ€œé€»è¾‘å®¹å™¨â€ï¼Œè¡¨ç¤ºâ€œè¿™ä¸€å—å½’ä¸ºåŒä¸€ç±»åˆ« / å­ç³»ç»Ÿâ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Android Framework&lt;/li&gt;
&lt;li&gt;Linux Kernel&lt;/li&gt;
&lt;li&gt;System Server&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡Œé¢å¯ä»¥å†æœ‰ç»„ä»¶æˆ–ç±»&lt;/li&gt;
&lt;li&gt;ä¸»è¦ç”¨äºâ€œæ•´ä½“è¾¹ç•Œâ€&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å»ºæ¨¡ç›®çš„&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¾ç¤ºå­ç³»ç»Ÿè¾¹ç•Œ&lt;/li&gt;
&lt;li&gt;ä¸å…³å¿ƒæ¨¡å—å†…éƒ¨å®ç°ç»†èŠ‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;PlantUML ä½¿ç”¨&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;package &amp;#34;Android Framework&amp;#34; {
component ActivityManager
component WindowManager
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="2-component"&gt;2ï¸âƒ£ component&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯­ä¹‰&lt;/strong&gt;ï¼šè½¯ä»¶çš„å¯ç‹¬ç«‹æ¨¡å—ï¼Œæä¾›æ¥å£ï¼Œå¯æ›¿æ¢ã€‚&lt;/p&gt;</description></item><item><title>ä¸­å›½è½¦ä¼å‡ºæµ·çš„æ™ºèƒ½åº§èˆ±ç”Ÿæ€æŒ‘æˆ˜</title><link>https://ethen-cao.github.io/ethenslab/explore-ai/%E4%B8%AD%E5%9B%BD%E8%BD%A6%E4%BC%81%E5%87%BA%E6%B5%B7%E6%8C%91%E6%88%98/</link><pubDate>Wed, 27 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/%E4%B8%AD%E5%9B%BD%E8%BD%A6%E4%BC%81%E5%87%BA%E6%B5%B7%E6%8C%91%E6%88%98/</guid><description>&lt;h2 id="æ‰§è¡Œæ‘˜è¦"&gt;&lt;strong&gt;æ‰§è¡Œæ‘˜è¦&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;æœ¬æŠ¥å‘Šæ—¨åœ¨æ·±å…¥å‰–æä¸­å›½æ±½è½¦åˆ¶é€ å•†åœ¨å…¨çƒåŒ–è¿›ç¨‹ä¸­é¢ä¸´çš„æ ¸å¿ƒæˆ˜ç•¥å›°å¢ƒï¼šå…¶åœ¨å›½å†…å¸‚åœºèµ–ä»¥æˆåŠŸçš„æ ¸å¿ƒç«äº‰åŠ›â€”â€”ä¸€ä¸ªé«˜åº¦é›†æˆã€åŠŸèƒ½ä¸°å¯Œçš„æ™ºèƒ½åº§èˆ±ç”Ÿæ€ç³»ç»Ÿâ€”â€”åœ¨å›½é™…å¸‚åœºä¸Šæ­£è½¬å˜ä¸ºä¸€é¡¹é‡å¤§çš„æŒ‘æˆ˜å’Œå¤æ‚çš„éš¾é¢˜ã€‚ä¸­å›½è½¦ä¼åœ¨å›½å†…é€šè¿‡å°†å…ˆè¿›ç¡¬ä»¶ä¸æœ¬åœŸäº’è”ç½‘å·¨å¤´çš„æœåŠ¡æ·±åº¦æ†ç»‘ï¼Œåˆ›é€ äº†â€œç¬¬ä¸‰ç”Ÿæ´»ç©ºé—´â€çš„æè‡´ç”¨æˆ·ä½“éªŒã€‚ç„¶è€Œï¼Œè¿™ç§æˆåŠŸçš„æ¨¡å¼å…·æœ‰é«˜åº¦çš„åœ°åŸŸç‰¹æ®Šæ€§ï¼Œå…¶æœåŠ¡æ ¹åŸºã€æŠ€æœ¯å¹³å°å’Œæ•°æ®èŒƒå¼å‡éš¾ä»¥ç›´æ¥ç§»æ¤åˆ°æµ·å¤–å¸‚åœºã€‚&lt;/p&gt;
&lt;p&gt;æŠ¥å‘Šçš„æ ¸å¿ƒå‘ç°å¯å½’ç»“ä¸ºä¸‰å¤§æŒ‘æˆ˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæ€ç³»ç»Ÿçš„ä¸å¯ç§»æ¤æ€§ï¼š&lt;/strong&gt; ä¸­å›½æ™ºèƒ½åº§èˆ±çš„æˆåŠŸæ ¹æ¤äºä¸ç™¾åº¦ã€é˜¿é‡Œå·´å·´ã€è…¾è®¯ã€åä¸ºç­‰æœ¬åœŸç§‘æŠ€å·¨å¤´æœåŠ¡çš„æ— ç¼å¯¹æ¥ã€‚è¿™äº›æœåŠ¡ï¼ŒåŒ…æ‹¬é«˜å¾·åœ°å›¾ã€è…¾è®¯éŸ³ä¹å’Œå„ç±»å°ç¨‹åºï¼Œæ„æˆäº†ç”¨æˆ·ä½“éªŒçš„åŸºçŸ³ï¼Œä½†åœ¨æµ·å¤–å¸‚åœºç¼ºä¹å¯¹ç­‰æ›¿ä»£å“ï¼Œå¯¼è‡´å…¶æ ¸å¿ƒä»·å€¼ä¸»å¼ çš„ç“¦è§£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯å¹³å°çš„æˆ˜ç•¥æŠ‰æ‹©ï¼š&lt;/strong&gt; è¿›å…¥å…¨çƒå¸‚åœºï¼Œä¸­å›½è½¦ä¼å¿…é¡»ä»å°é—­çš„å›½å†…ä½“ç³»è½¬å‘ä»¥è°·æ­ŒAndroid Automotive OS (AAOS) ä¸ºä¸»å¯¼çš„å¼€æ”¾å¹³å°ã€‚å…¶ä¸­ï¼Œæ˜¯å¦é›†æˆè°·æ­Œç§»åŠ¨æœåŠ¡ (GMS) æˆä¸ºä¸€é¡¹å…³é”®çš„æˆ˜ç•¥æŠ‰æ‹©ï¼Œç›´æ¥å†³å®šäº†äº§å“èƒ½å¦æä¾›è°·æ­Œåœ°å›¾ã€è°·æ­ŒåŠ©æ‰‹å’ŒPlayå•†åº—ç­‰æµ·å¤–ç”¨æˆ·çš„â€œåŸºç¡€åŠŸèƒ½â€ï¼ŒåŒæ—¶ä¹Ÿç‰µåŠ¨ç€å“ç‰Œæ§åˆ¶æƒã€æ•°æ®æ‰€æœ‰æƒå’Œå¼€å‘æˆæœ¬ä¹‹é—´çš„å¤æ‚æƒè¡¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åˆè§„çš„ç¡¬æ€§å£å’ï¼š&lt;/strong&gt; ä»¥æ¬§ç›Ÿã€Šé€šç”¨æ•°æ®ä¿æŠ¤æ¡ä¾‹ã€‹(GDPR) ä¸ºä»£è¡¨çš„æµ·å¤–æ•°æ®éšç§æ³•è§„ï¼Œå¯¹è½¦è¾†æ•°æ®çš„æ”¶é›†ã€å¤„ç†ã€å­˜å‚¨å’Œè·¨å¢ƒä¼ è¾“æå‡ºäº†ä¸ä¸­å›½æˆªç„¶ä¸åŒçš„ä¸¥è‹›è¦æ±‚ã€‚GDPRå¼ºè°ƒâ€œè®¾è®¡å³éšç§â€å’Œâ€œæ•°æ®æœ€å°åŒ–â€åŸåˆ™ï¼Œå¹¶æåŠ›æ¨å´‡è½¦è½½æœ¬åœ°åŒ–æ•°æ®å¤„ç†ï¼Œè¿™ä¸ä¸­å›½å¸‚åœºæ™®éé‡‡ç”¨çš„äº‘ç«¯ä¸­å¿ƒåŒ–æ•°æ®å¤„ç†æ¶æ„å½¢æˆäº†æ ¹æœ¬æ€§å†²çªã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æœ¬æŠ¥å‘Šé€šè¿‡å¯¹è”šæ¥ã€å°é¹å’Œä¸Šæ±½åçˆµåœ¨æ¬§æ´²å¸‚åœºçš„å…·ä½“ç­–ç•¥è¿›è¡Œæ¡ˆä¾‹åˆ†æï¼Œæ­ç¤ºäº†ä¸åŒæˆ˜ç•¥è·¯å¾„çš„åˆ©å¼Šã€‚æœ€ç»ˆï¼ŒæŠ¥å‘Šæå‡ºäº†ä¸€ç³»åˆ—æˆ˜ç•¥æ€§å»ºè®®ï¼Œæ—¨åœ¨å¸®åŠ©ä¸­å›½è½¦ä¼æˆåŠŸå®ç°â€œè§£è€¦â€ï¼Œå…‹æœæŒ‘æˆ˜ï¼šè½¦ä¼å¿…é¡»æ„å»ºæ¨¡å—åŒ–ã€å¹³å°æ— å…³çš„è½¯ä»¶æ¶æ„ï¼›å°†â€œè®¾è®¡å³éšç§â€ä½œä¸ºå…¨çƒäº§å“å¼€å‘çš„é›¶æ—¥åŸåˆ™ï¼›é‡æ–°å®šä¹‰åŒ…å«æ‰‹æœºäº’è”åŠŸèƒ½çš„æµ·å¤–å¸‚åœºâ€œæœ€å°å¯è¡Œäº§å“â€(MVP)ï¼›å¹¶ä»¥åŠ¡å®çš„ä»·å€¼ä¸»å¼ ï¼Œé€æ­¥åŸ¹è‚²å…¨çƒå¼€å‘è€…ç”Ÿæ€ã€‚å”¯æœ‰å¦‚æ­¤ï¼Œä¸­å›½è½¦ä¼æ‰èƒ½å°†å…¶åœ¨å›½å†…çš„æ™ºèƒ½åº§èˆ±ä¼˜åŠ¿ï¼Œè½¬åŒ–ä¸ºçœŸæ­£çš„å…¨çƒç«äº‰åŠ›ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="ç¬¬ä¸€ç« é•€é‡‘çš„ç‰¢ç¬¼è§£æ„ä¸­å›½æ™ºèƒ½åº§èˆ±çš„æœ¬åœŸä¼˜åŠ¿"&gt;&lt;strong&gt;ç¬¬ä¸€ç« ï¼šé•€é‡‘çš„ç‰¢ç¬¼ï¼šè§£æ„ä¸­å›½æ™ºèƒ½åº§èˆ±çš„æœ¬åœŸä¼˜åŠ¿&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;æœ¬ç« èŠ‚æ—¨åœ¨å»ºç«‹ä¸€ä¸ªåŸºå‡†ï¼Œé˜æ˜ä¸­å›½æ™ºèƒ½åº§èˆ±åœ¨å›½å†…å¸‚åœºå–å¾—é¢†å…ˆåœ°ä½çš„æ ¹æœ¬åŸå› ã€‚åˆ†æå°†æŒ‡å‡ºï¼Œè¿™ç§é¢†å…ˆä¼˜åŠ¿ä¸ä»…æ˜¯æŠ€æœ¯å±‚é¢çš„ï¼Œæ›´æ˜¯ç»“æ„æ€§çš„ï¼Œå®ƒä¸ä¸€ä¸ªæ— æ³•è¢«ç®€å•å‡ºå£çš„ç‹¬ç‰¹æ•°å­—ç”Ÿæ€ç³»ç»Ÿç´§å¯†ç›¸è¿ã€‚&lt;/p&gt;
&lt;h3 id="11-ç¬¬ä¸‰ç©ºé—´é©å‘½ä»ä¿¡æ¯å¨±ä¹åˆ°æè‡´ä½“éªŒ"&gt;&lt;strong&gt;1.1 â€œç¬¬ä¸‰ç©ºé—´â€é©å‘½ï¼šä»ä¿¡æ¯å¨±ä¹åˆ°æè‡´ä½“éªŒ&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;æœ¬èŠ‚å°†è¯¦ç»†é˜è¿°ä¸­å›½è½¦ä¼çš„é¡¶å±‚è®¾è®¡ç†å¿µã€‚å®ƒä»¬é”€å”®çš„ä¸ä»…ä»…æ˜¯ä¿¡æ¯å¨±ä¹ç³»ç»Ÿï¼Œè€Œæ˜¯ä¸€ç§å…¨æ–¹ä½çš„è½¦å†…ç”Ÿæ´»ä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§ç†å¿µçš„å®ç°ï¼Œé¦–å…ˆä¾èµ–äºå¼ºå¤§çš„ç¡¬ä»¶åŸºç¡€ã€‚é«˜é€šéªé¾™8155èŠ¯ç‰‡å·²æˆä¸ºä¸­å›½æ–°åŠ¿åŠ›å“ç‰Œçš„æ ‡å‡†é…ç½®ï¼Œè¢«å°é¹ã€ç†æƒ³ã€ææ°ªç­‰å¹¿æ³›é‡‡ç”¨ï¼Œä¸ºæ¯«ç§’çº§çš„è¯­éŸ³äº¤äº’å’Œå¤æ‚çš„å¤šå±ç®¡ç†æä¾›äº†ç®—åŠ›ä¿éšœ 1ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè½¦ä¼é€šè¿‡åˆ›æ–°çš„åº§èˆ±è®¾è®¡ï¼Œå°†ä½“éªŒæ¨å‘äº†æ–°çš„é«˜åº¦ã€‚ä¾‹å¦‚ï¼Œå°é¹æ±½è½¦æ˜ç¡®æå‡ºâ€œç¬¬ä¸‰ç”Ÿæ´»ç©ºé—´â€çš„æ¦‚å¿µï¼Œå¹¶é€šè¿‡å…¶â€œ5Dåº§èˆ±â€å°†ç©ºè°ƒã€é¦™æ°›ç³»ç»Ÿå’ŒæŒ‰æ‘©åº§æ¤…ä¸å¨±ä¹å†…å®¹è”åŠ¨ï¼Œåˆ›é€ å‡ºè¶…è¶Šé©¾é©¶æœ¬èº«çš„å¤šæ„Ÿå®˜æ²‰æµ¸å¼ä½“éªŒ 1ã€‚ç†æƒ³L9åˆ™é€šè¿‡åŒ8155èŠ¯ç‰‡é©±åŠ¨åŒ…æ‹¬åæ’å¨±ä¹å±åœ¨å†…çš„äº”å—å±å¹•ï¼Œå¹¶èåˆæ‰‹åŠ¿æ§åˆ¶ï¼Œå°†è½¦è¾†æ‰“é€ æˆä¸€ä¸ªâ€œç§»åŠ¨çš„å®¶â€ 1ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§ä½“éªŒçš„æ ¸å¿ƒåœ¨äºæƒ…æ„ŸåŒ–å’Œæ‹ŸäººåŒ–çš„äº¤äº’ã€‚è”šæ¥çš„NOMIè½¦è½½äººå·¥æ™ºèƒ½ä¼´ä¾£ä¾¿æ˜¯å…¸å‹ä»£è¡¨ï¼Œå®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªè¯­éŸ³åŠ©æ‰‹ï¼Œæ›´æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè¡¨è¾¾æƒ…æ„Ÿã€ä¸ç”¨æˆ·å»ºç«‹æƒ…æ„Ÿè”ç³»çš„äº¤äº’ä¸­å¿ƒï¼Œè¿™æå¤§åœ°æå‡äº†ç”¨æˆ·ç²˜æ€§ï¼Œå°†ç®€å•çš„å‘½ä»¤ä¸æ§åˆ¶åŠŸèƒ½å‡åä¸ºä¸€ç§é™ªä¼´å…³ç³» 1ã€‚ä¸æ­¤åŒæ—¶ï¼ŒAITOé—®ç•Œç³»åˆ—è½¦å‹åˆ™æ·±åº¦æ•´åˆäº†åä¸ºçš„HarmonyOSï¼Œå®ç°äº†è½¦å†…è®¾å¤‡ä¸ç”¨æˆ·å…¶ä»–æ™ºèƒ½ç»ˆç«¯çš„æ— ç¼æµè½¬ä¸ååŒï¼Œå°†æ±½è½¦å½»åº•èå…¥äº†åä¸ºçš„ç”Ÿæ€ä½“ç³» 1ã€‚è¿™äº›å®è·µå…±åŒå°†ä¸­å›½å¸‚åœºçš„æ™ºèƒ½åº§èˆ±ä»ä¸€ä¸ªåŠŸèƒ½æ€§å·¥å…·ï¼Œæå‡åˆ°äº†ä¸€ä¸ªæ‰¿è½½ç”¨æˆ·å·¥ä½œã€å¨±ä¹å’Œä¼‘æ¯çš„ä½“éªŒæ€§ç©ºé—´ã€‚&lt;/p&gt;
&lt;h3 id="12-è¶…çº§é›†æˆç”Ÿæ€ä¸æœ¬åœŸæ•°å­—å·¨å¤´çš„å…±ç”Ÿå…³ç³»"&gt;&lt;strong&gt;1.2 è¶…çº§é›†æˆç”Ÿæ€ï¼šä¸æœ¬åœŸæ•°å­—å·¨å¤´çš„å…±ç”Ÿå…³ç³»&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;æœ¬èŠ‚å°†å±•ç¤ºæ„æˆè¿™äº›æè‡´ä½“éªŒçš„è½¯ä»¶åŸºçŸ³â€”â€”å³ä¸­å›½è½¦ä¼ä¸æœ¬åœŸäº’è”ç½‘å·¨å¤´ä¹‹é—´æ·±åº¦ä¸”é€šå¸¸æ˜¯æ’ä»–æ€§çš„åˆä½œå…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§å…±ç”Ÿå…³ç³»ä½“ç°åœ¨æ™ºèƒ½åº§èˆ±çš„æ¯ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½æ¨¡å—ä¸­ã€‚åœ¨å¯¼èˆªä¸åœ°å›¾æœåŠ¡é¢†åŸŸï¼Œæ¯”äºšè¿ªçš„DiLinkæ™ºèƒ½ç½‘è”ç³»ç»Ÿä¸é«˜å¾·åœ°å›¾è¿›è¡Œäº†æ·±åº¦å®šåˆ¶åŒ–å¼€å‘ï¼Œå®ç°äº†æ‰‹æœºä¸è½¦æœºç«¯è´¦æˆ·ä¿¡æ¯çš„æ— ç¼åŒæ­¥ï¼Œä»¥åŠä»æ‰‹æœºä¸€é”®å‘é€ä½ç½®åˆ°è½¦çš„åŠŸèƒ½ï¼Œæå¤§åœ°ä¼˜åŒ–äº†è½¦è½½å¯¼èˆªçš„ä¾¿åˆ©æ€§å’Œå®‰å…¨æ€§ 3ã€‚è¿™ä¸å…¨çƒå¸‚åœºç”±è°·æ­Œåœ°å›¾å’ŒWazeä¸»å¯¼çš„æ ¼å±€å½¢æˆäº†é²œæ˜å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨éŸ³ä¹ä¸éŸ³é¢‘å¨±ä¹æ–¹é¢ï¼Œè”šæ¥ä¸è…¾è®¯è¾¾æˆäº†æˆ˜ç•¥åˆä½œï¼Œä¸ä»…é›†æˆäº†è…¾è®¯çš„éŸ³ä¹èµ„æºï¼Œè¿˜é€šè¿‡è”šæ¥è‡ªç ”çš„SkyCoreæŠ€æœ¯æ¡†æ¶ï¼Œå°†å¾®ä¿¡è¯»ä¹¦ç­‰å°ç¨‹åºåŸç”ŸåŒ–åœ°èå…¥è½¦æœºç³»ç»Ÿï¼Œä¸ºç”¨æˆ·æä¾›äº†è¿è´¯çš„æ•°å­—å†…å®¹æ¶ˆè´¹ä½“éªŒ 6ã€‚å°é¹æ±½è½¦åˆ™å®£ç§°å…¶Xmart OSç³»ç»Ÿæ¥å…¥äº†è¶…è¿‡17ä¸ªç¬¬ä¸‰æ–¹éŸ³é¢‘åº”ç”¨ï¼Œæ„å»ºäº†ä¸šå†…æœ€å…¨é¢çš„è½¦è½½éŸ³é¢‘å†…å®¹ç”Ÿæ€ 8ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¯­éŸ³äº¤äº’å’Œäººå·¥æ™ºèƒ½å±‚é¢ï¼Œå°½ç®¡å‰ç«¯ç•Œé¢æœ‰å„å®¶è½¦ä¼çš„å“ç‰Œæ ‡è¯†ï¼ˆå¦‚NOMIï¼‰ï¼Œä½†å…¶åº•å±‚çš„è‡ªç„¶è¯­è¨€å¤„ç†å’Œäººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œå¾€å¾€æ˜¯ä¸ä¸“æ³¨äºä¸­æ–‡è¯­å¢ƒçš„ä¸­å›½ç§‘æŠ€å…¬å¸ï¼ˆå¦‚ç§‘å¤§è®¯é£ç­‰ï¼‰ç´§å¯†åˆä½œå¼€å‘çš„ã€‚è¿™ç§é’ˆå¯¹ç‰¹å®šè¯­è¨€çš„æ·±åº¦ä¼˜åŒ–ï¼Œæ˜¯å…¶åœ¨å›½å†…å¸‚åœºå®ç°é«˜è¯†åˆ«ç‡å’Œè‡ªç„¶å¯¹è¯èƒ½åŠ›çš„å…³é”®ï¼Œä½†è¿™ç§æ ¸å¿ƒç«äº‰åŠ›ä¹Ÿéš¾ä»¥ç›´æ¥è¿ç§»åˆ°å…¶ä»–è¯­è¨€ç¯å¢ƒä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæ•´ä¸ªæ™ºèƒ½åº§èˆ±ç³»ç»Ÿéƒ½é«˜åº¦ä¾èµ–äºå¼ºå¤§çš„äº‘æœåŠ¡å’Œé¢‘ç¹çš„æ•´è½¦OTAï¼ˆç©ºä¸­ä¸‹è½½æŠ€æœ¯ï¼‰å‡çº§èƒ½åŠ›ã€‚è¿™å¥—ä½“ç³»çš„èƒŒåï¼Œæ˜¯ä¸»è¦éƒ¨ç½²åœ¨ä¸­å›½å¢ƒå†…çš„æ•°æ®ä¸­å¿ƒå’Œç½‘ç»œåŸºç¡€è®¾æ–½ï¼Œä¸ºè½¦è¾†åŠŸèƒ½çš„æŒç»­è¿­ä»£å’Œç”¨æˆ·æ•°æ®çš„å¤„ç†æä¾›äº†æ”¯æ’‘ 1ã€‚&lt;/p&gt;
&lt;h3 id="13-æ— æ³•ç¿»è¯‘çš„ä½“éªŒä¸ºä½•å¹³ç§»ç­–ç•¥æ³¨å®šå¤±è´¥"&gt;&lt;strong&gt;1.3 æ— æ³•ç¿»è¯‘çš„ä½“éªŒï¼šä¸ºä½•â€œå¹³ç§»â€ç­–ç•¥æ³¨å®šå¤±è´¥&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;æœ¬èŠ‚å°†ç»¼åˆå‰è¿°åˆ†æï¼Œè®ºè¯ä¸ºä½•ç®€å•çš„æœ¬åœ°åŒ–ï¼ˆLocalizationï¼‰å·¥ä½œï¼Œè¿œä¸è¶³ä»¥å°†ä¸­å›½å¸‚åœºçš„æˆåŠŸæ¨¡å¼å¤åˆ¶åˆ°æµ·å¤–ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œä¸­å›½ç”¨æˆ·ä¹ ä»¥ä¸ºå¸¸çš„æ ¸å¿ƒæ•°å­—æœåŠ¡ï¼Œåœ¨æµ·å¤–å¸‚åœºç¼ºä¹ç»Ÿä¸€çš„æ›¿ä»£å“ã€‚ä¾‹å¦‚ï¼Œæ·±åº¦é›†æˆåœ¨è½¦æœºç³»ç»Ÿä¸­çš„ç§»åŠ¨æ”¯ä»˜ï¼ˆæ”¯ä»˜å®/å¾®ä¿¡æ”¯ä»˜ï¼‰ã€æ— å¤„ä¸åœ¨çš„å°ç¨‹åºç”Ÿæ€ä»¥åŠç¤¾äº¤åª’ä½“è”åŠ¨åŠŸèƒ½ï¼Œåœ¨æ¬§æ´²æˆ–åŒ—ç¾å¸‚åœºå¹¶æ²¡æœ‰ä¸€ä¸ªèƒ½å¤Ÿè¢«æ™®éæ¥å—çš„å¯¹ç­‰è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œç”¨æˆ·çš„äº¤äº’ä¹ æƒ¯å­˜åœ¨æ ¹æœ¬æ€§å·®å¼‚ã€‚åœ¨ä¸­å›½å¸‚åœºï¼Œé€šè¿‡è¯­éŸ³åŠ©æ‰‹å®Œæˆå¤æ‚ã€å¤šæ­¥éª¤çš„ä»»åŠ¡å·²ç»æˆä¸ºä¸€ç§æ™®éçš„ç”¨æˆ·è¡Œä¸ºã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨è®¸å¤šè¥¿æ–¹å¸‚åœºï¼Œç”¨æˆ·æ›´ä¹ æƒ¯äºé€šè¿‡æ‰‹æœºæŠ•å±ç³»ç»Ÿï¼ˆå¦‚Apple CarPlayå’ŒAndroid Autoï¼‰æ¥ä½¿ç”¨ä»–ä»¬ç†Ÿæ‚‰çš„åº”ç”¨ç¨‹åºï¼Œè¿™å·²æˆä¸ºä¸»æµçš„äº¤äº’æ¨¡å¼ 10ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å…³é”®çš„æ˜¯ï¼Œä¸­å›½çš„æ™ºèƒ½åº§èˆ±ç”Ÿæ€å¹¶éç®€å•çš„åº”ç”¨ç¨‹åºé›†åˆï¼Œè€Œæ˜¯ä¸€ä¸ªç”±ç›¸äº’å…³è”çš„æœåŠ¡ã€ç»Ÿä¸€çš„ç”¨æˆ·è´¦æˆ·ä½“ç³»å’Œæ•°æ®æ¡£æ¡ˆæ„æˆçš„å¤æ‚ç½‘ç»œã€‚è‹¥æƒ³åœ¨æµ·å¤–å¸‚åœºå¤åˆ¶è¿™ä¸€æ¨¡å¼ï¼Œæ— å¼‚äºä»é›¶å¼€å§‹ï¼Œä¸ä¸€å¥—å…¨æ–°çš„åˆä½œä¼™ä¼´ï¼ˆä¾‹å¦‚ç”¨Spotifyæ›¿ä»£QQéŸ³ä¹ï¼Œç”¨Google Mapsæ›¿ä»£é«˜å¾·åœ°å›¾ï¼‰é‡å»ºæ•´ä¸ªç”Ÿæ€ç³»ç»Ÿã€‚è¿™ç§é‡å»ºçš„éš¾åº¦å’Œæˆæœ¬æ˜¯å·¨å¤§çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æ¨¡å¼åœ¨å›½å†…å¸‚åœºæ„å»ºçš„ç«äº‰ä¼˜åŠ¿ï¼Œå½¢æˆäº†ä¸€é“â€œç”Ÿæ€æŠ¤åŸæ²³â€ï¼Œæœ‰æ•ˆåœ°é˜»æŒ¡äº†å›½é™…ç«äº‰å¯¹æ‰‹ã€‚ç„¶è€Œï¼Œå½“ä¸­å›½è½¦ä¼è¯•å›¾èµ°å‘å…¨çƒæ—¶ï¼Œè¿™é“â€œæŠ¤åŸæ²³â€å´å˜æˆäº†ä¸€ä¸ªâ€œé•€é‡‘çš„ç‰¢ç¬¼â€ã€‚å…¶æœ€å¼•ä»¥ä¸ºå‚²ã€ä¸æœ¬åœŸæœåŠ¡æ·±åº¦ç»‘å®šçš„æ™ºèƒ½åº§èˆ±åŠŸèƒ½ï¼Œå› æ— æ³•å‰¥ç¦»å’Œæ›¿æ¢ï¼Œåè€Œæˆä¸ºäº†å‡ºæµ·çš„æœ€å¤§éšœç¢ï¼Œè¿«ä½¿å®ƒä»¬å¿…é¡»åœ¨æµ·å¤–å¸‚åœºä»¥ä¸€ç§å…¨æ–°çš„ã€ä¸ç†Ÿæ‚‰çš„æ–¹å¼å‚ä¸ç«äº‰ã€‚æ­¤å¤–ï¼Œè¿™ç§ä¸ºå›½å†…å¤æ‚è½¯ä»¶ç”Ÿæ€ç³»ç»Ÿæ‰€åšçš„ç¡¬ä»¶å†³ç­–ï¼Œä¹Ÿå½¢æˆäº†è·¯å¾„ä¾èµ–ã€‚ä¾‹å¦‚ï¼Œç†æƒ³L9é‡‡ç”¨åŒ8155èŠ¯ç‰‡æ˜¯ä¸ºäº†é©±åŠ¨å…¶å¤æ‚çš„äº”å±äº¤äº’ç³»ç»Ÿ 1ã€‚å½“é¢å‘æµ·å¤–å¸‚åœºï¼Œè½¯ä»¶å †æ ˆå¿…é¡»å¤§å¹…ç®€åŒ–æˆ–æ›¿æ¢æ—¶ï¼ŒåŸæœ‰çš„é«˜ç«¯ç¡¬ä»¶é…ç½®å¯èƒ½å°±æ˜¾å¾—æ€§èƒ½è¿‡å‰©ï¼Œä»è€Œé€ æˆæˆæœ¬ä¸Šçš„åŠ£åŠ¿ï¼Œå‡¸æ˜¾äº†ä¸ºç‰¹å®šå¸‚åœºåˆ¶å®šçš„ç¡¬ä»¶ç­–ç•¥åœ¨å…¨çƒåŒ–èƒŒæ™¯ä¸‹çš„ä¸é€‚åº”æ€§ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="ç¬¬äºŒç« å¹³å°çš„å›°å¢ƒä¸ºå…¨çƒç”¨æˆ·é‡å»ºæ•°å­—åœ°åŸº"&gt;&lt;strong&gt;ç¬¬äºŒç« ï¼šå¹³å°çš„å›°å¢ƒï¼šä¸ºå…¨çƒç”¨æˆ·é‡å»ºæ•°å­—åœ°åŸº&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;æœ¬ç« èŠ‚å°†åˆ†æä¸­å›½è½¦ä¼ä¸ºæ‰“é€ ä¸€ä¸ªåœ¨å›½é™…å¸‚åœºä¸Šå…·æœ‰å¯è¡Œæ€§çš„æ™ºèƒ½åº§èˆ±ï¼Œæ‰€å¿…é¡»é¢å¯¹çš„åŸºç¡€æ€§æŠ€æœ¯ä¸æˆ˜ç•¥å†³ç­–ã€‚å…¶æ ¸å¿ƒåœ¨äºï¼Œå¦‚ä½•ä»ä¸€ä¸ªç²¾å¿ƒç­–åˆ’çš„ã€å°é—­çš„å›½å†…ç³»ç»Ÿï¼Œè¿‡æ¸¡åˆ°ä¸€ä¸ªæ ‡å‡†åŒ–çš„ã€å¼€æ”¾çš„å…¨çƒå¹³å°ã€‚&lt;/p&gt;
&lt;h3 id="21-android-automotiveçš„å¿…ç„¶æ€§ç†è§£å…¨çƒæ ‡å‡†"&gt;&lt;strong&gt;2.1 Android Automotiveçš„å¿…ç„¶æ€§ï¼šç†è§£å…¨çƒæ ‡å‡†&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;æœ¬èŠ‚å°†é¦–å…ˆå˜æ¸…ä¸€ä¸ªå…³é”®çš„æŠ€æœ¯æ¦‚å¿µï¼Œå³Android Autoä¸Android Automotive OS (AAOS) ä¹‹é—´çš„æœ¬è´¨åŒºåˆ«ï¼Œè¿™ä¸€ç‚¹å¯¹äºç†è§£åç»­çš„æˆ˜ç•¥æŠ‰æ‹©è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Android Auto&lt;/strong&gt; æ˜¯ä¸€ç§æ‰‹æœºæŠ•å±è§£å†³æ–¹æ¡ˆã€‚åº”ç”¨ç¨‹åºå®é™…è¿è¡Œåœ¨ç”¨æˆ·çš„æ™ºèƒ½æ‰‹æœºä¸Šï¼Œé€šè¿‡USBæˆ–æ— çº¿æ–¹å¼ï¼Œå°†å…¶ç•Œé¢æŠ•å½±åˆ°è½¦æœºå±å¹•ä¸Šã€‚å®ƒåˆ©ç”¨çš„æ˜¯æ‰‹æœºçš„è®¡ç®—èƒ½åŠ›å’Œæ•°æ®è¿æ¥ï¼Œå…¶æœ¬èº«å¹¶éè½¦è¾†çš„æ“ä½œç³»ç»Ÿ 12ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Android Automotive OS (AAOS)&lt;/strong&gt; åˆ™æ˜¯ä¸€ä¸ªå®Œæ•´ã€ç‹¬ç«‹çš„ã€åŸºäºAndroidçš„å¼€æºæ“ä½œç³»ç»Ÿï¼Œå®ƒç›´æ¥è¿è¡Œåœ¨è½¦è¾†çš„ç¡¬ä»¶ä¹‹ä¸Š 16ã€‚AAOSæ§åˆ¶ç€æ•´ä¸ªä¿¡æ¯å¨±ä¹ä½“éªŒï¼Œå¹¶èƒ½ä¸è½¦è¾†çš„ç©ºè°ƒã€é©¾é©¶è¾…åŠ©ç­‰åº•å±‚åŠŸèƒ½æ·±åº¦é›†æˆã€‚å®ƒçš„è¿è¡Œå®Œå…¨ä¸ä¾èµ–äºæ‰‹æœº 17ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®å‰ï¼Œè¶Šæ¥è¶Šå¤šçš„å…¨çƒä¸»æµæ±½è½¦åˆ¶é€ å•†ï¼ŒåŒ…æ‹¬æ²ƒå°”æ²ƒã€ææ˜Ÿã€é€šç”¨æ±½è½¦ã€ç¦ç‰¹ä»¥åŠé›·è¯º-æ—¥äº§-ä¸‰è±è”ç›Ÿï¼Œéƒ½å·²é€‰æ‹©é‡‡ç”¨AAOSä½œä¸ºå…¶ä¸‹ä¸€ä»£ä¿¡æ¯å¨±ä¹ç³»ç»Ÿçš„åŸºç¡€å¹³å°ï¼Œè¿™ä½¿å…¶æ­£è¿…é€Ÿæˆä¸ºè¡Œä¸šçš„æ–°æ ‡å‡† 19ã€‚å¯¹äºå¯»æ±‚å…¨çƒåŒ–çš„ä¸­å›½è½¦ä¼è€Œè¨€ï¼Œæ¥çº³AAOSä¸ä»…æ˜¯æŠ€æœ¯ä¸Šçš„é€‰æ‹©ï¼Œæ›´æ˜¯èå…¥å…¨çƒæ±½è½¦è½¯ä»¶ç”Ÿæ€çš„æˆ˜ç•¥æ€§ä¸€æ­¥ã€‚&lt;/p&gt;</description></item><item><title>æ¬§æ´²å¸‚åœº eCall æ³•è§„åˆè§„ä¸ä¸»æœºå‚å®è·µè°ƒ</title><link>https://ethen-cao.github.io/ethenslab/explore-ai/%E6%AC%A7%E7%9B%9Fecall%E8%B0%83%E7%A0%94%E6%8A%A5%E5%91%8A/</link><pubDate>Wed, 27 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/%E6%AC%A7%E7%9B%9Fecall%E8%B0%83%E7%A0%94%E6%8A%A5%E5%91%8A/</guid><description>&lt;hr&gt;
&lt;h2 id="1-æ³•è§„æ¡†æ¶å¼ºåˆ¶è¦æ±‚-vs-æ¨èæ ‡å‡†"&gt;1ï¸âƒ£ æ³•è§„æ¡†æ¶ï¼šå¼ºåˆ¶è¦æ±‚ vs æ¨èæ ‡å‡†&lt;/h2&gt;
&lt;p&gt;æœ¬ç« èŠ‚æ—¨åœ¨å˜æ¸…â€œå¿…é¡»åšâ€ä¸â€œå»ºè®®åšâ€çš„ç•Œé™ã€‚&lt;/p&gt;
&lt;h3 id="11-æ ¸å¿ƒæ–‡ä»¶å±‚çº§"&gt;1.1 æ ¸å¿ƒæ–‡ä»¶å±‚çº§&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;æ–‡æ¡£&lt;/th&gt;
&lt;th style="text-align: left"&gt;å±æ€§&lt;/th&gt;
&lt;th style="text-align: left"&gt;æ ¸å¿ƒä½œç”¨ (Type Approval è§†è§’)&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯¯åŒºæ¾„æ¸…&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;EU 2017/79 Annex III&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¼ºåˆ¶æ³•è§„&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å‹å¼æ‰¹å‡†çš„å”¯ä¸€ä¾æ®ã€‚è§„å®šäº†ç¢°æ’å&lt;strong&gt;ä¸»è§‚&lt;/strong&gt;è¯­éŸ³å¯æ‡‚åº¦æµ‹è¯•ã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸åŒ…å«&lt;/strong&gt; PESQ/POLQA ç­‰å®¢è§‚æŒ‡æ ‡è¦æ±‚ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;EN 16072:2015&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¼ºåˆ¶å¼•ç”¨æ ‡å‡†&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®šä¹‰ç³»ç»Ÿè¡Œä¸ºï¼ˆå¦‚ä¼˜å…ˆå»ºç«‹è¯­éŸ³é€šé“ã€é™éŸ³è¦æ±‚ï¼‰ã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;è§„å®šäº†â€œåŠŸèƒ½â€ï¼Œä½†æœªè§„å®šå…·ä½“çš„â€œéŸ³é¢‘ä»²è£ç®—æ³•ï¼ˆå¦‚ Duckingï¼‰â€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ETSI TS 103 412&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æµ‹è¯•è§„èŒƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;éªŒè¯ eCall çš„åè®®è¡Œä¸ºï¼ˆçŠ¶æ€æœºã€MSD ä¼ è¾“ï¼‰ã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;é‡ç‚¹åœ¨äº IVS éŸ³é¢‘è·¯å¾„çš„ Muteï¼Œè€Œéå…¨è½¦æ‰€æœ‰å‘å£°å•å…ƒçš„é™éŸ³ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ITU-T P.1140&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æ¨èæ ‡å‡†&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®šä¹‰è½¦è½½ç´§æ€¥å‘¼å«çš„è¯­éŸ³è´¨é‡æµ‹è¯•æ–¹æ³•ï¼ˆå«å®¢è§‚æŒ‡æ ‡ï¼‰ã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;éå¼ºåˆ¶ã€‚&lt;/strong&gt; ä»…ä½œä¸ºç ”å‘é˜¶æ®µé‡åŒ–è´¨é‡ã€é¢„æµ‹ä¸»è§‚æµ‹è¯•ç»“æœçš„å·¥å…·ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="2-è¯­éŸ³é“¾è·¯åˆè§„æ€§æ³•è§„åº•çº¿-vs-å·¥ç¨‹å®ç°"&gt;2ï¸âƒ£ è¯­éŸ³é“¾è·¯åˆè§„æ€§ï¼šæ³•è§„åº•çº¿ vs å·¥ç¨‹å®ç°&lt;/h2&gt;
&lt;h3 id="21-msd-ä¼ è¾“æœŸé—´çš„é™éŸ³è¦æ±‚"&gt;2.1 MSD ä¼ è¾“æœŸé—´çš„é™éŸ³è¦æ±‚&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³•è§„åº•çº¿ (The Law):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›®æ ‡ï¼š&lt;/strong&gt; ç¡®ä¿ MSD æ•°æ®é€šè¿‡è¯­éŸ³é€šé“ï¼ˆIn-band Modemï¼‰ä¼ è¾“æˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¦æ±‚ï¼š&lt;/strong&gt; IVS çš„éŸ³é¢‘æ¥å£ï¼ˆéº¦å…‹é£/æ‰¬å£°å™¨ï¼‰å¿…é¡»é™éŸ³æˆ–æ–­å¼€ï¼Œé˜²æ­¢è½¦å†…å™ªå£°å¹²æ‰°æ•°æ®è°ƒåˆ¶éŸ³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾¹ç•Œï¼š&lt;/strong&gt; æ³•è§„æœªæ˜ç¡®ç¦æ­¢ä¸ç»è¿‡ IVS éŸ³é¢‘é“¾è·¯çš„ç‹¬ç«‹å‘å£°æºï¼ˆå¦‚ä»ªè¡¨ç›˜ç‹¬ç«‹èœ‚é¸£å™¨ï¼‰ï¼Œå‰ææ˜¯è¿™äº›å£°éŸ³ä¸ä¼šé€šè¿‡å£°å­¦è€¦åˆï¼ˆAcoustic Couplingï¼‰å¹²æ‰° MSD ä¼ è¾“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å·¥ç¨‹å®è·µ (Best Practice):&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>è½¦è½½ç³»ç»Ÿå‘å±•å†å²</title><link>https://ethen-cao.github.io/ethenslab/explore-ai/%E8%BD%A6%E8%BD%BD%E7%B3%BB%E7%BB%9F%E6%BC%94%E8%BF%9B%E6%96%B9%E5%90%91%E6%8E%A2%E7%B4%A2/</link><pubDate>Wed, 27 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/%E8%BD%A6%E8%BD%BD%E7%B3%BB%E7%BB%9F%E6%BC%94%E8%BF%9B%E6%96%B9%E5%90%91%E6%8E%A2%E7%B4%A2/</guid><description>&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ³¨ï¼šæœ¬è¡¨æŒ‰â€œç”¨æˆ·ä½“éªŒæˆä¸ºä¸»æµ/æ ‡é…çš„æ™®åŠèŠ‚ç‚¹â€åˆ†ä»£ï¼Œä¸ç­‰åŒäºå•é¡¹æŠ€æœ¯çš„é¦–æ¬¡å‡ºç°æ—¶é—´ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;æ—¶é—´ï¼ˆâ‰ˆæ™®åŠ/æ ‡é…çª—å£ï¼‰&lt;/th&gt;
&lt;th style="text-align: left"&gt;åŠŸèƒ½ï¼ˆè½¦èƒ½å¹²ä»€ä¹ˆï¼‰&lt;/th&gt;
&lt;th style="text-align: left"&gt;ç”¨æˆ·èƒ½åŠ›ï¼ˆäººå˜å¼ºäº†ï¼‰&lt;/th&gt;
&lt;th style="text-align: left"&gt;å…³ç³»å˜åŒ–ï¼ˆäººä¸è½¦/ä¸–ç•Œï¼‰&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¡Œä¸šèƒŒæ™¯ / æŠ€æœ¯è§¦å‘ï¼ˆé¢å‘â€œæ™®åŠâ€ï¼‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;1980sâ€“1997ï¼ˆé›¶ä»£Â·ç”µå­åŒ–æ‰“åº•ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¶éŸ³æœºã€ç©ºè°ƒã€åŸºç¡€ä»ªè¡¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;åŸºæœ¬èˆ’é€‚åº¦ / ä¿¡æ¯æ„ŸçŸ¥å¢å¼º&lt;/strong&gt;ï¼ˆçŸ¥é“è½¦é€Ÿ/æ²¹é‡ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;äººå®Œå…¨æŒæ§ / è½¦æ˜¯å·¥å…·&lt;/strong&gt;ï¼ˆäººæ˜¯å¸æœºï¼Œè½¦æ˜¯æœºå™¨ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æ±½è½¦ç”µå­åŒ–èµ·æ­¥å¹¶é€æ­¥æ ‡é…&lt;/strong&gt;ï¼šECU ç­‰å¾®å¤„ç†å™¨è¿›å…¥æ±½è½¦ï¼Œä½†åº§èˆ±äº¤äº’ä»ä»¥æœºæ¢°/åˆ†æ•£ä¸ºä¸»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â‰ˆ1990sâ€“1997ï¼ˆèŒèŠ½æœŸÂ·ç¤ºèŒƒæ€§è½åœ°ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ—©æœŸè½¦è½½å¯¼èˆª/ç”µå­åœ°å›¾ï¼ˆé«˜ç«¯è½¦ã€å°è§„æ¨¡ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;åˆæ­¥ç©ºé—´æ„ŸçŸ¥&lt;/strong&gt;ï¼ˆçŸ¥é“æˆ‘åœ¨å“ª/å¤§è‡´æ–¹å‘ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ç”¨æˆ·ä»éœ€ä¸»åŠ¨å†³ç­–&lt;/strong&gt;ï¼ˆè½¦ç»™ä¿¡æ¯ï¼Œäººåšè§„åˆ’ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å«æ˜Ÿå¯¼èˆª/åœ°å›¾æ•°æ®å¼€å§‹å¯ç”¨ä½†æ˜‚è´µ&lt;/strong&gt;ï¼šä½œä¸ºè±ªåé…ç½®â€œå¯ç”¨ä½†ä¸æ™®åŠâ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â‰ˆ1998â€“2005ï¼ˆç¬¬ 1 ä»£Â·å¯¼èˆªè§„æ¨¡åŒ–æ™®åŠï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¯¼èˆª / åœ°å›¾æ˜¾ç¤º / è·¯å¾„è§„åˆ’ï¼ˆå‚è£…ä¸åè£…å¼€å§‹å¹¿æ³›æ™®åŠï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸å†è®°è·¯çº¿ / è½¦å‚ä¸å†³ç­–&lt;/strong&gt;ï¼ˆâ€œä¸è¿·è·¯â€æˆä¸ºé»˜è®¤ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ç©ºé—´åˆ¤æ–­æƒéƒ¨åˆ†è®©æ¸¡&lt;/strong&gt;ï¼ˆæ•¢å»é™Œç”ŸåŸå¸‚ï¼Œå¼€å§‹ä¿¡ä»»ç³»ç»Ÿï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å…³é”®åŠ é€Ÿå™¨æ¨åŠ¨æ™®åŠ&lt;/strong&gt;ï¼šå¦‚ 2000 å¹´åæ°‘ç”¨ GPS ä½“éªŒæ˜¾è‘—æ”¹å–„ + åŸå¸‚é“è·¯å¤æ‚åº¦æå‡ + åœ°å›¾/POI å•†ä¸šåŒ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â‰ˆ2005â€“2009ï¼ˆç¬¬ 2 ä»£Â·å¤šåª’ä½“å¨±ä¹æ ‡é…åŒ–ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;è§†é¢‘æ’­æ”¾ / è“ç‰™ç”µè¯ / å€’è½¦å½±åƒ / åæ’å¨±ä¹&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;è½¦å†…æ—¶é—´ä»·å€¼è¢«æŒ–æ˜&lt;/strong&gt;ï¼ˆç­‰å¾…ä¸å†æµªè´¹ï¼ŒæœåŠ¡ä¹˜å®¢ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å‡ºè¡Œä½“éªŒå¤šç»´åˆ†é…&lt;/strong&gt;ï¼ˆä»æœåŠ¡å¸æœº â†’ æœåŠ¡å…¨å‘˜ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å®¶ç”¨è½¦æ™®åŠ/å¤šäººå‡ºè¡Œå¸¸æ€&lt;/strong&gt;ï¼šå®¶åº­å¨±ä¹ä¸ç§»åŠ¨é€šä¿¡é¢„æœŸè¿ç§»è¿›è½¦å†…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â‰ˆ2009â€“2013ï¼ˆç¬¬ 3 ä»£Â·è§¦æ§æˆä¸ºä¸»å…¥å£ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;è§¦æ§å± / ç»Ÿä¸€ GUI / åŠŸèƒ½å¯è§†åŒ–å…¥å£ï¼ˆâ€œä¸€å±ç»Ÿé¢†â€æˆä¸ºä¸»æµèŒƒå¼ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æ“ä½œè·¯å¾„ç¼©çŸ­ / å‡ ä¹æ— éœ€å­¦ä¹ &lt;/strong&gt;ï¼ˆæ‰€è§å³æ‰€å¾—ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¿ƒç†é—¨æ§›åå¡Œ&lt;/strong&gt;ï¼ˆä»â€œä¸“ä¸šæ“ä½œâ€â†’â€œç›´è§‰ååº”â€ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æ™ºèƒ½æ‰‹æœºé¢„æœŸé‡å¡‘&lt;/strong&gt;ï¼šç”¨æˆ·æŠŠæ‰‹æœºçš„äº¤äº’æ ‡å‡†å¸¦å…¥è½¦å†…ï¼Œå®ä½“æŒ‰é”®è¢«è§†ä¸ºâ€œéä¸»æµæ–¹æ¡ˆâ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â‰ˆ2014â€“2017ï¼ˆç¬¬ 4 ä»£Â·æ‰‹æœºç”Ÿæ€å€ŸåŠ›æ™®åŠï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;CarPlay / Android Auto / æ‰‹æœºåº”ç”¨ç›´è¿ï¼ˆæŠ•å°„æˆä¸ºä¸»æµè¡¥é½æ–¹æ¡ˆï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ç¬¬ä¸€æ¬¡å¤§è§„æ¨¡å¯¹é½æ‰‹æœºä½“éªŒ&lt;/strong&gt;ï¼ˆå¯¼èˆª/éŸ³ä¹/è¯­éŸ³å¯ç”¨ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;è½¦æœºæ‰¿è®¤çŸ­æ¿ / ç”Ÿæ€è®©æ¸¡&lt;/strong&gt;ï¼ˆå€Ÿæ‰‹æœºç”Ÿæ€æ•‘æ€¥ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä½“éªŒå‰ªåˆ€å·®æ‰©å¤§&lt;/strong&gt;ï¼šåŸç”Ÿè½¦æœºæ™®éå¡é¡¿éš¾ç”¨ï¼Œç”¨æˆ·ç”¨æ‰‹æœºæ”¯æ¶å½¢æˆå€’é€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â‰ˆ2018â€“2022ï¼ˆç¬¬ 5 ä»£Â·åœ¨çº¿åŒ– + OTA æ ‡é…ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;åœ¨çº¿å¯¼èˆª / åœ¨çº¿éŸ³ä¹ / è¯­éŸ³åŠ©æ‰‹ / OTAï¼ˆâ€œå¸¸ç”¨å¸¸æ–°â€æˆä¸ºå…±è¯†ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸å¸¦æ‰‹æœºä¹Ÿèƒ½æ™ºèƒ½&lt;/strong&gt;ï¼ˆç³»ç»Ÿéšæ—¶é—´å˜å¥½ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;èƒ½åŠ›ä¸»æƒå›å½’ / è½¦æœºå†ä¸­å¿ƒåŒ–&lt;/strong&gt;ï¼ˆè½¦æˆä¸ºæ•°æ®ä¸ä½“éªŒä¸­å¿ƒï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;è½¦è”ç½‘æˆç†Ÿ + æ•°æ®ä¸»æƒæ„è¯†ä¸Šå‡&lt;/strong&gt;ï¼šä¼ ç»Ÿè½¦ä¼æŠŠåœ¨çº¿æœåŠ¡ä¸ OTA åšæˆæ ‡é…èƒ½åŠ›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;2023â€“è‡³ä»Šï¼ˆç¬¬ 6 ä»£Â·Agent åŒ–ä½“éªŒï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¿ç»­è¯­éŸ³ / æ¨¡ç³ŠæŒ‡ä»¤ / ä¸»åŠ¨æç¤º / åœºæ™¯å¼•æ“&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¯è¯´äººè¯ / æ„å›¾è¢«ç†è§£&lt;/strong&gt;ï¼ˆä¸å¿…çŸ¥é“å…¥å£åœ¨å“ªï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;è½¦æˆä¸ºäººçš„ä»£ç†ï¼ˆAgentï¼‰&lt;/strong&gt;ï¼ˆä»â€œäººé€‚åº”è½¦â€â†’â€œè½¦æ‡‚äººâ€ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¤§æ¨¡å‹ + ç¡¬ä»¶åŒè´¨åŒ–&lt;/strong&gt;ï¼šæ–°èƒ½æºæœºæ¢°å·®å¼‚ç¼©å°ï¼Œæ™ºèƒ½ä½“éªŒæˆä¸ºæ ¸å¿ƒå–ç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;2027â€“2030ï¼ˆç¬¬ 7 ä»£Â·é¢„æµ‹Â·å…±ç”Ÿï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— æ„Ÿæ‰§è¡Œ / è™šå®èåˆï¼ˆMRï¼‰/ ç”Ÿç‰©ä¿¡å·äº¤äº’ï¼ˆçœ¼åŠ¨ç­‰ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â€œå¤–éª¨éª¼â€çº§æ„ŸçŸ¥ä¸æ‰§è¡Œ&lt;/strong&gt;ï¼ˆæ„å›¾æ›´ç›´æ¥åœ°è½¬ä¸ºç»“æœï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸»å®¢ä½“èåˆï¼ˆFusionï¼‰&lt;/strong&gt;ï¼ˆäº¤äº’å¼±åŒ–ï¼Œè´£ä»»å½’å› æ›´æ¨¡ç³Šï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ç©ºé—´è®¡ç®— + é«˜å¸¦å®½äººæœºè¿æ¥&lt;/strong&gt;ï¼šäº¤äº’ä»â€œç•Œé¢â€è½¬å‘â€œæ„ŸçŸ¥/æ„å›¾é€šé“â€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="æŠ€æœ¯ä¼˜åŠ¿"&gt;æŠ€æœ¯ä¼˜åŠ¿ï¼š&lt;/h2&gt;
&lt;h3 id="1-æ„å»ºç»Ÿä¸€çš„å…¨åŸŸæ„ŸçŸ¥æ•°æ®åº•åº§ä¸ºå¤§æ¨¡å‹æä¾›å¯æŒç»­è¿›åŒ–çš„è¾“å…¥èƒ½åŠ›"&gt;1. æ„å»ºç»Ÿä¸€çš„å…¨åŸŸæ„ŸçŸ¥æ•°æ®åº•åº§ï¼š&lt;strong&gt;ä¸ºå¤§æ¨¡å‹æä¾›â€œå¯æŒç»­è¿›åŒ–â€çš„è¾“å…¥èƒ½åŠ›&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰“ç ´æ•°æ®å‰²è£‚ï¼Œå½¢æˆç»Ÿä¸€è§†å›¾&lt;/strong&gt;ï¼šå°†æ“ä½œç³»ç»ŸçŠ¶æ€ã€è½¦è¾†è¿è¡Œæ•°æ®ã€ç”¨æˆ·è¡Œä¸ºåŠåº”ç”¨ç”Ÿæ€ç­‰å¤šæºæ„ŸçŸ¥æ•°æ®è¿›è¡Œç»Ÿä¸€å»ºæ¨¡ä¸å½’ä¸€åŒ–å¤„ç†ï¼Œæ¶ˆé™¤ç³»ç»Ÿä¸ä¸šåŠ¡ä¹‹é—´çš„æ•°æ®å­¤å²›ã€‚&lt;/p&gt;</description></item><item><title>Android Internals: Activity Launch into PiP æµç¨‹æ·±åº¦è§£æ</title><link>https://ethen-cao.github.io/ethenslab/android-dev/activitymanager/activity-pip/</link><pubDate>Wed, 27 Aug 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/activitymanager/activity-pip/</guid><description>&lt;h2 id="1-æ¦‚è¿°-overview"&gt;1. æ¦‚è¿° (Overview)&lt;/h2&gt;
&lt;p&gt;åœ¨ Android ç³»ç»Ÿä¸­ï¼ŒActivity è¿›å…¥ç”»ä¸­ç”»ï¼ˆPiPï¼‰å¹¶éç®€å•çš„ UI ç¼©æ”¾ï¼Œè€Œæ˜¯ä¸€æ¬¡å¤æ‚çš„&lt;strong&gt;çª—å£å±‚çº§é‡æ„ (Hierarchy Reparenting)&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç‰¹åˆ«æ˜¯å½“é€šè¿‡ Intent æ ‡å¿— (&lt;code&gt;isLaunchIntoPip&lt;/code&gt;) è§¦å‘æ—¶ï¼Œç³»ç»Ÿå®é™…ä¸Šæ‰§è¡Œäº†ä¸€ä¸ªâ€œæ¬ºéª—â€æ“ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å…ˆæŒ‰æ ‡å‡†æµç¨‹å¯åŠ¨ Activityï¼ˆResume, Add to Taskï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å¯åŠ¨æµç¨‹æ”¶å°¾é˜¶æ®µï¼Œæ‹¦æˆªå¹¶ç«‹å³å°†å…¶ç§»åŠ¨åˆ° &lt;strong&gt;Pinned Root Task&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨ &lt;code&gt;SurfaceFreezer&lt;/code&gt; å†»ç»“ç”»é¢ï¼Œæ‰§è¡Œæ— ç¼çš„è¿›å…¥åŠ¨ç”»ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="2-æ ¸å¿ƒæµç¨‹å›¾-architecture-flow"&gt;2. æ ¸å¿ƒæµç¨‹å›¾ (Architecture Flow)&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢çš„æ—¶åºå›¾å±•ç¤ºäº†ä» &lt;code&gt;startActivity&lt;/code&gt; åˆ°æœ€ç»ˆé€šè¿‡ &lt;code&gt;SurfaceAnimator&lt;/code&gt; æ‰§è¡ŒåŠ¨ç”»çš„å®Œæ•´è°ƒç”¨é“¾ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme plain
skinparam dpi 120
skinparam wrapWidth 200
participant &amp;#34;ActivityStarter&amp;#34; as Starter
participant &amp;#34;RootWindowContainer&amp;#34; as RWC
participant &amp;#34;Task (Current)&amp;#34; as OldTask
participant &amp;#34;Task (New PiP)&amp;#34; as NewTask
participant &amp;#34;WindowContainer&amp;#34; as WC
participant &amp;#34;TransitionController&amp;#34; as TC
participant &amp;#34;SurfaceFreezer&amp;#34; as SF
note over Starter
1. æ ‡å‡†å¯åŠ¨æµç¨‹ç»“æŸ
(startActivityInner)
end note
Starter -&amp;gt; Starter: Check mOptions.isLaunchIntoPip()
activate Starter
note right
ä»£ç æœ€åä¸€é“é˜²çº¿ï¼š
è‹¥åŒ…å« PiP æ ‡å¿—ï¼Œåˆ™è§¦å‘ç§»åŠ¨
end note
Starter -&amp;gt; RWC: moveActivityToPinnedRootTask(r, source, ...)
activate RWC
RWC -&amp;gt; OldTask: getNonFinishingActivityCount()
alt Case A: å•ä¸ª Activity (ç‹¬å  Task)
RWC -&amp;gt; RWC: rootTask = OldTask
note right: ç›´æ¥å°†å½“å‰ Task\nå˜æ›´ä¸º Pinned æ¨¡å¼
else Case B: å¤šä¸ª Activities (å…±äº« Task)
RWC -&amp;gt; NewTask: new Task.Builder().build()
activate NewTask
note right: å¿…é¡»å‰¥ç¦»ï¼šåˆ›å»ºæ–° Task\nä½œä¸º PiP å®¹å™¨
RWC -&amp;gt; WC: r.reparent(NewTask, MAX, ...)
WC -&amp;gt; OldTask: Remove Child
WC -&amp;gt; NewTask: Add Child
note right: å°† ActivityRecord\nç§»åŠ¨åˆ°æ–° Task
end
RWC -&amp;gt; NewTask: reparent(TaskDisplayArea, ON_TOP)
note right: ç¡®ä¿ PiP çª—å£\næ‚¬æµ®äºæ‰€æœ‰ Task ä¹‹ä¸Š
RWC -&amp;gt; NewTask: setWindowingMode(PINNED)
RWC -&amp;gt; TC: requestStartTransition(TRANSIT_PIP)
activate TC
note left: è§¦å‘è¿‡æ¸¡åŠ¨ç”»
TC -&amp;gt; SF: freeze()
activate SF
SF -&amp;gt; SF: captureLayers()
SF -&amp;gt; SF: createAnimationLeash()
note right: æˆªå›¾å¹¶åˆ›å»º\nåŠ¨ç”»å®¹å™¨
deactivate SF
deactivate TC
deactivate RWC
deactivate Starter
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="3-å…³é”®æœºåˆ¶è¯¦è§£-implementation-details"&gt;3. å…³é”®æœºåˆ¶è¯¦è§£ (Implementation Details)&lt;/h2&gt;
&lt;h3 id="31-å¯åŠ¨æ‹¦æˆª-the-hook"&gt;3.1 å¯åŠ¨æ‹¦æˆª (The Hook)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æ–‡ä»¶&lt;/strong&gt;: &lt;code&gt;ActivityStarter.java&lt;/code&gt;&lt;/p&gt;</description></item><item><title>Android logæœºåˆ¶</title><link>https://ethen-cao.github.io/ethenslab/android-dev/debug/log/</link><pubDate>Wed, 27 Aug 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/debug/log/</guid><description>&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/android-eventlog.png" alt="" /&gt;&lt;/p&gt;
&lt;h3 id="æ¶æ§‹åœ–è©³è§£"&gt;æ¶æ§‹åœ–è©³è§£&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥èªŒå¯«å…¥è·¯å¾‘ (Write Path)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ·é»&lt;/strong&gt;: æ‡‰ç”¨ç¨‹å¼æˆ– Android æ¡†æ¶æœå‹™ (å¦‚ &lt;code&gt;ActivityManagerService&lt;/code&gt;) èª¿ç”¨ &lt;code&gt;android.util.EventLog.writeEvent()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½‰æ›&lt;/strong&gt;: å‘¼å«é€šé JNI é€²å…¥åŸç”Ÿå±¤ï¼Œç”± &lt;code&gt;liblog.so&lt;/code&gt; é€™å€‹ C/C++ å‡½å¼åº«æ¥ç®¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šä¿¡æ¥å£&lt;/strong&gt;: &lt;code&gt;liblog&lt;/code&gt; é€šéä¸€å€‹åç‚º &lt;code&gt;/dev/socket/logdw&lt;/code&gt; (logd writer) çš„ UNIX Domain Socketï¼Œå°‡äº‹ä»¶æ—¥èªŒä»¥é«˜æ•ˆçš„äºŒé€²ä½æ ¼å¼ (&lt;code&gt;logger_entry&lt;/code&gt; çµæ§‹) ç™¼é€çµ¦ &lt;code&gt;logd&lt;/code&gt; å®ˆè­·é€²ç¨‹ã€‚é€™æ˜¯ä¸€å€‹å–®å‘çš„å¯«å…¥æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;logd&lt;/code&gt; å…§éƒ¨å¯¦ç¾ (Log Daemon Internals)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Socket Listener&lt;/strong&gt;: &lt;code&gt;logd&lt;/code&gt; å…§éƒ¨æœ‰ä¸€å€‹å°ˆé–€çš„ç·šç¨‹ï¼Œè² è²¬ç›£è½ &lt;code&gt;/dev/socket/logdw&lt;/code&gt; æ¥å£ï¼Œæ¥æ”¶ä¾†è‡ªç³»çµ±ä¸­æ‰€æœ‰é€²ç¨‹çš„æ—¥èªŒæ•¸æ“šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ring Buffers&lt;/strong&gt;: æ¥æ”¶åˆ°çš„æ—¥èªŒæœƒè¢«åˆ†é–€åˆ¥é¡åœ°å­˜å…¥å°æ‡‰çš„&lt;strong&gt;å…§å­˜ä¸­ç’°å½¢ç·©è¡å€ (In-Memory Ring Buffers)&lt;/strong&gt;ã€‚å°æ–¼ EventLogï¼Œæ•¸æ“šè¢«å¯«å…¥åç‚º &lt;code&gt;events&lt;/code&gt; çš„ç·©è¡å€ã€‚é€™æ˜¯ä¸€å€‹é«˜æ•ˆçš„å…§å­˜æ•¸æ“šçµæ§‹ï¼Œç•¶å¯«æ»¿æ™‚æœƒè‡ªå‹•è¦†è“‹æœ€èˆŠçš„ç´€éŒ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Command Listener&lt;/strong&gt;: &lt;code&gt;logd&lt;/code&gt; åŒæ™‚ä¹Ÿç›£è½å¦ä¸€å€‹ Socket &lt;code&gt;/dev/socket/logdr&lt;/code&gt; (logd reader)ï¼Œç”¨æ–¼æ¥æ”¶ä¾†è‡ª &lt;code&gt;logcat&lt;/code&gt; ç­‰å®¢æˆ¶ç«¯çš„è®€å–æŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥èªŒè®€å–èˆ‡è§£æè·¯å¾‘ (Read &amp;amp; Parse Path)&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>Protocol Buffers (Protobuf) æŠ€æœ¯æŒ‡å—</title><link>https://ethen-cao.github.io/ethenslab/android-dev/debug/protocol_buffers/</link><pubDate>Wed, 27 Aug 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/debug/protocol_buffers/</guid><description>&lt;h2 id="1-ç®€ä»‹"&gt;1. ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Protocol Buffers&lt;/strong&gt; (ç®€ç§° Protobuf) æ˜¯ Google å¼€å‘çš„ä¸€ç§è¯­è¨€æ— å…³ã€å¹³å°æ— å…³ã€å¯æ‰©å±•çš„&lt;strong&gt;åºåˆ—åŒ–ç»“æ„æ•°æ®&lt;/strong&gt;çš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”äº XML å’Œ JSONï¼ŒProtobuf çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½“ç§¯æ›´å°&lt;/strong&gt;ï¼šäºŒè¿›åˆ¶æ ¼å¼ï¼Œæ•°æ®ç´§å‡‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€Ÿåº¦æ›´å¿«&lt;/strong&gt;ï¼šè§£æå’Œåºåˆ—åŒ–é€Ÿåº¦æå¿«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼ºç±»å‹&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;.proto&lt;/code&gt; æ–‡ä»¶å®šä¹‰æ•°æ®ç»“æ„ï¼Œç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¼å®¹æ€§&lt;/strong&gt;ï¼šè‰¯å¥½çš„å‘åå…¼å®¹æ€§æ”¯æŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ Android ç³»ç»Ÿä¸­ï¼ŒProtobuf è¢«å¹¿æ³›ç”¨äº StatsD (æŒ‡æ ‡ä¸ŠæŠ¥)ã€Incidentd (äº‹æ•…æŠ¥å‘Š)ã€Binder IPC æ•°æ®ä¼ è¾“ç­‰åœºæ™¯ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="2-å·¥ä½œæµç¨‹ä¸æ¶æ„"&gt;2. å·¥ä½œæµç¨‹ä¸æ¶æ„&lt;/h2&gt;
&lt;p&gt;Protobuf çš„æ ¸å¿ƒå·¥ä½œæµåˆ†ä¸ºï¼š&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ã€&lt;strong&gt;ç¼–è¯‘&lt;/strong&gt;ã€&lt;strong&gt;ä½¿ç”¨&lt;/strong&gt;ã€&lt;strong&gt;åºåˆ—åŒ–/ååºåˆ—åŒ–&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/Protobuf.png" alt="" /&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="3-è¯­æ³•æŒ‡å—-proto"&gt;3. è¯­æ³•æŒ‡å— (.proto)&lt;/h2&gt;
&lt;p&gt;ç›®å‰ä¸»æµç‰ˆæœ¬ä¸º &lt;strong&gt;proto3&lt;/strong&gt;ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„ &lt;code&gt;.proto&lt;/code&gt; æ–‡ä»¶ç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;h3 id="31-åŸºç¡€ç»“æ„"&gt;3.1 åŸºç¡€ç»“æ„&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªåä¸º &lt;code&gt;car_event.proto&lt;/code&gt; çš„æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-protobuf" data-lang="protobuf"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// 1. æŒ‡å®šè¯­æ³•ç‰ˆæœ¬ (å¿…é¡»)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;syntax &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;// 2. å®šä¹‰åŒ…å (é˜²æ­¢å‘½åå†²çª)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#f92672"&gt;package&lt;/span&gt; com&lt;span style="color:#f92672"&gt;.&lt;/span&gt;example.cockpit;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;// 3. é…ç½®ç”Ÿæˆé€‰é¡¹ (Javaç›¸å…³)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;option&lt;/span&gt; java_package &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;com.example.cockpit.proto&amp;#34;&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// ç”Ÿæˆçš„JavaåŒ…è·¯å¾„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;option&lt;/span&gt; java_outer_classname &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;CarEventProto&amp;#34;&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// ç”Ÿæˆçš„Javaå¤–å±‚ç±»å
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;// 4. å®šä¹‰æ¶ˆæ¯ (Message)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;message&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;VehicleStatus&lt;/span&gt; {&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; &lt;span style="color:#75715e"&gt;// å­—æ®µæ ¼å¼: ç±»å‹ å­—æ®µå = å­—æ®µç¼–å·;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; &lt;span style="color:#75715e"&gt;// æ ‡é‡ç±»å‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;int32&lt;/span&gt; speed &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// æ•´æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; vin_code &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;2&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// å­—ç¬¦ä¸²
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;bool&lt;/span&gt; is_moving &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;3&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// å¸ƒå°”å€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; &lt;span style="color:#75715e"&gt;// æšä¸¾ç±»å‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;enum&lt;/span&gt; Gear {&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; GEAR_UNKNOWN &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// proto3 æšä¸¾ç¬¬ä¸€ä¸ªå€¼å¿…é¡»ä¸º0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; GEAR_P &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; GEAR_R &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;2&lt;/span&gt;;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; GEAR_N &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;3&lt;/span&gt;;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; GEAR_D &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;4&lt;/span&gt;;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; }&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; Gear current_gear &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;4&lt;/span&gt;;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; &lt;span style="color:#75715e"&gt;// åµŒå¥—æ¶ˆæ¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; EngineInfo engine &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;5&lt;/span&gt;;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; &lt;span style="color:#75715e"&gt;// æ•°ç»„ (Repeated)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;repeated&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;string&lt;/span&gt; error_codes &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;6&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// ç›¸å½“äº List&amp;lt;String&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;}&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;message&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;EngineInfo&lt;/span&gt; {&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;float&lt;/span&gt; rpm &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;float&lt;/span&gt; temperature &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;2&lt;/span&gt;;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;}&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="32-å…³é”®æ¦‚å¿µ"&gt;3.2 å…³é”®æ¦‚å¿µ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å­—æ®µç¼–å· (Field Number)&lt;/strong&gt;ï¼šä¾‹å¦‚ &lt;code&gt;speed = 1&lt;/code&gt; ä¸­çš„ &lt;code&gt;1&lt;/code&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éå¸¸é‡è¦&lt;/strong&gt;ï¼šè¿™æ˜¯äºŒè¿›åˆ¶æ•°æ®ä¸­å­—æ®µçš„å”¯ä¸€æ ‡è¯†ï¼Œè€Œä¸æ˜¯å­—æ®µåã€‚&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦æ•°æ®æŠ•å…¥ä½¿ç”¨ï¼Œ&lt;strong&gt;ç»å¯¹ä¸èƒ½ä¿®æ”¹&lt;/strong&gt;å·²å­˜åœ¨å­—æ®µçš„ç¼–å·ã€‚&lt;/li&gt;
&lt;li&gt;1~15 å ç”¨ 1 ä¸ªå­—èŠ‚ï¼Œ16~2047 å ç”¨ 2 ä¸ªå­—èŠ‚ï¼ˆå»ºè®®å°†é¢‘ç¹ä½¿ç”¨çš„å­—æ®µæ”¾åœ¨ 1~15ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç±»å‹æ˜ å°„&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;int32/int64&lt;/code&gt; -&amp;gt; Java &lt;code&gt;int/long&lt;/code&gt;, C++ &lt;code&gt;int32_t/int64_t&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;string&lt;/code&gt; -&amp;gt; Java &lt;code&gt;String&lt;/code&gt;, C++ &lt;code&gt;std::string&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bool&lt;/code&gt; -&amp;gt; Java &lt;code&gt;boolean&lt;/code&gt;, C++ &lt;code&gt;bool&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="4-ç¼–è¯‘æ–¹æ³•"&gt;4. ç¼–è¯‘æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;å°† &lt;code&gt;.proto&lt;/code&gt; æ–‡ä»¶è½¬æ¢ä¸ºç›®æ ‡è¯­è¨€ä»£ç ã€‚&lt;/p&gt;</description></item><item><title>é«˜é€šå¹³å° Widevine L1 è®¤è¯å®æ–½æµç¨‹</title><link>https://ethen-cao.github.io/ethenslab/android-dev/media/widevine-l1-verification-process/</link><pubDate>Wed, 27 Aug 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/media/widevine-l1-verification-process/</guid><description>&lt;h2 id="æ•´ä½“æµç¨‹"&gt;æ•´ä½“æµç¨‹&lt;/h2&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/widevine-L1-verification-process.png" alt="" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¡¹ç›®å¯åŠ¨ä¸å¹³å°é€‰å‹&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OEMï¼ˆæ•´è½¦å‚ï¼‰æ ¹æ®è½¦å‹ã€å¸‚åœºéœ€æ±‚å’Œ DRM ç­–ç•¥ï¼Œå†³å®šé‡‡ç”¨ Widevine L1ã€‚&lt;/li&gt;
&lt;li&gt;é«˜é€šæä¾›æ”¯æŒ L1 çš„ç¡¬ä»¶å¹³å°ï¼ˆSoC + TEEï¼‰ï¼Œå¹¶äº¤ä»˜ BSP/SDK åŠå®‰å…¨æ–¹æ¡ˆæŒ‡å¯¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è½¯ä»¶é›†æˆä¸å®‰å…¨è·¯å¾„å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OEM é›†æˆ Android OSã€Chromium å’Œ Android DRM æ¡†æ¶ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡è°ƒç”¨ MediaDrm/CDM API å®ç°æ’­æ”¾åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;é«˜é€šååŠ© OEM å®Œæˆå®‰å…¨è§†é¢‘è·¯å¾„ (SVP) ä¸å®‰å…¨éŸ³é¢‘è·¯å¾„ (SAP)ï¼Œå¹¶æä¾› TrustZoneã€Keymasterã€OEMCrypto çš„æŠ€æœ¯æ”¯æŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Widevine Partner Portal æ³¨å†Œä¸å·¥å…·è·å–&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OEM å‘ Google ç”³è¯· Widevine Partner Portal è®¿é—®æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;Google æä¾› L1 å®‰å…¨è§„èŒƒæ–‡æ¡£ã€æµ‹è¯•å·¥å…·åŠæµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶ä¸‹å‘æµ‹è¯•ç”¨ Device Keyboxï¼ˆä»…é™å¼€å‘ä¸è‡ªæµ‹ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…éƒ¨è‡ªæµ‹ä¸é¢„è®¤è¯å‡†å¤‡&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OEM æ­å»º L1 æµ‹è¯•ç¯å¢ƒå¹¶è¿è¡Œ Google L1 Test Suiteï¼Œè¿›è¡Œè‡ªæµ‹éªŒè¯ã€‚&lt;/li&gt;
&lt;li&gt;é«˜é€šååŠ©åˆ†æç»“æœå¹¶è§£å†³å®‰å…¨ç›¸å…³é—®é¢˜ï¼Œä¸ºæ­£å¼è®¤è¯åšå‡†å¤‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ­£å¼è®¤è¯æµ‹è¯•ï¼ˆç”±æˆæƒå®éªŒå®¤æ‰§è¡Œï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OEM å°†å¾…æµ‹è®¾å¤‡åŠè‡ªæµ‹ç»“æœæäº¤è‡³ Google æˆæƒå®éªŒå®¤ï¼ˆ3PLï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å®éªŒå®¤ä½¿ç”¨ Google å®˜æ–¹ L1 Test Suite æ‰§è¡Œæµ‹è¯•ï¼Œå¹¶å°†æµ‹è¯•ç»“æœä¸æŠ¥å‘Šä¸Šä¼ è‡³ Googleã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Google L1 è®¤è¯å®¡æ ¸&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>Chromium + Android DRM è§†é¢‘å®‰å…¨æ¸²æŸ“æµç¨‹è¯´æ˜</title><link>https://ethen-cao.github.io/ethenslab/android-dev/media/chromium-drm/</link><pubDate>Mon, 25 Aug 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/media/chromium-drm/</guid><description>&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/chromium-drm.png" alt="" /&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä»½æ—¶åºå›¾è¯¦ç»†æç»˜äº†åœ¨ä¸€ä¸ªåŸºäº Chromium çš„ Android æµè§ˆå™¨ä¸­ï¼Œæ’­æ”¾å— Widevine L1 DRM ä¿æŠ¤çš„è§†é¢‘æ—¶ï¼Œä»ç”¨æˆ·ç‚¹å‡»æ’­æ”¾åˆ°å½±åƒæœ€ç»ˆæ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„å®Œæ•´ã€ç«¯åˆ°ç«¯çš„å®‰å…¨æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªæµç¨‹çš„æ ¸å¿ƒæ˜¯ç¡®ä¿&lt;strong&gt;å†…å®¹å¯†é’¥ (Content Key)&lt;/strong&gt; å’Œ&lt;strong&gt;è§£å¯†åçš„è§†é¢‘ç”»é¢&lt;/strong&gt;å§‹ç»ˆå¤„äºç¡¬ä»¶çº§åˆ«çš„å®‰å…¨ä¿æŠ¤ä¹‹ä¸‹ï¼Œç»ä¸æ³„æ¼åˆ°ä¸å®‰å…¨çš„åº”ç”¨ç¨‹åºï¼ˆæµè§ˆå™¨ï¼‰æˆ–æ“ä½œç³»ç»Ÿä¸»å†…å­˜ä¸­ã€‚&lt;/p&gt;
&lt;h2 id="æµç¨‹è¯¦è§£"&gt;&lt;strong&gt;æµç¨‹è¯¦è§£&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id="1-åˆå§‹åŒ–ä¸ä¼šè¯åˆ›å»º-æ­¥éª¤-1-3"&gt;&lt;strong&gt;1. åˆå§‹åŒ–ä¸ä¼šè¯åˆ›å»º (æ­¥éª¤ 1-3)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;(1-2)&lt;/strong&gt; å½“ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»æ’­æ”¾å—ä¿æŠ¤çš„è§†é¢‘æ—¶ï¼Œç½‘é¡µå‰ç«¯çš„ JavaScript ä¼šé€šè¿‡ &lt;strong&gt;Encrypted Media Extensions (EME)&lt;/strong&gt; API å‘æµè§ˆå™¨å‘å‡ºè¯·æ±‚ï¼Œè¡¨æ˜éœ€è¦å¤„ç† DRM å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(3)&lt;/strong&gt; EME æ¥ç€ä¼šè°ƒç”¨ Android ç³»ç»Ÿåº•å±‚çš„ &lt;strong&gt;&lt;code&gt;MediaDRM&lt;/code&gt; API&lt;/strong&gt;ï¼Œåœ¨ç³»ç»Ÿå±‚çº§åˆ›å»ºä¸€ä¸ª DRM ä¼šè¯ã€‚è¿™ä¸€æ­¥ä¸ºåç»­çš„æˆæƒè¯·æ±‚å’Œè§£å¯†æ“ä½œåšå¥½äº†å‡†å¤‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-æˆæƒè¯·æ±‚ä¸è·å–-æ­¥éª¤-4-8"&gt;&lt;strong&gt;2. æˆæƒè¯·æ±‚ä¸è·å– (æ­¥éª¤ 4-8)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;(4-6)&lt;/strong&gt; &lt;code&gt;MediaDRM&lt;/code&gt; API æŒ‡ç¤º &lt;strong&gt;TEE (å¯ä¿¡æ‰§è¡Œç¯å¢ƒ)&lt;/strong&gt; å†…çš„ Widevine L1 æ¨¡å—ç”Ÿæˆä¸€ä¸ªåŠ å¯†çš„&lt;strong&gt;æˆæƒè¯·æ±‚&lt;/strong&gt;ã€‚è¿™ä¸ªè¯·æ±‚åŒ…å«äº†è®¾å¤‡çš„å”¯ä¸€å‡­è¯ï¼Œå¹¶ç»è¿‡è®¾å¤‡ç§é’¥ç­¾åã€‚TEE å°†è¿™ä¸ªè¯·æ±‚æ•°æ®è¿”å›ç»™æµè§ˆå™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(7-8)&lt;/strong&gt; &lt;strong&gt;Chromium æµè§ˆå™¨&lt;/strong&gt; è´Ÿè´£å¤„ç†ç½‘ç»œé€šä¿¡ã€‚å®ƒå°†ä» TEE è·å–çš„æˆæƒè¯·æ±‚ï¼Œé€šè¿‡ç½‘ç»œå‘é€ç»™&lt;strong&gt;æˆæƒæœåŠ¡å™¨ (License Server)&lt;/strong&gt;ã€‚æœåŠ¡å™¨åœ¨éªŒè¯è¯·æ±‚çš„åˆæ³•æ€§åï¼Œä¼šå›ä¼ ä¸€ä¸ªåŠ å¯†çš„æˆæƒï¼ˆå…¶ä¸­åŒ…å«äº†ç”¨è®¾å¤‡å…¬é’¥åŠ å¯†çš„ Content Keyï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-æˆæƒå¤„ç†ä¸å¯†é’¥æå–-æ­¥éª¤-9-10"&gt;&lt;strong&gt;3. æˆæƒå¤„ç†ä¸å¯†é’¥æå– (æ­¥éª¤ 9-10)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;(9)&lt;/strong&gt; æµè§ˆå™¨å°†ä»æœåŠ¡å™¨è·å–çš„åŠ å¯†æˆæƒï¼Œé€šè¿‡ &lt;code&gt;MediaDRM&lt;/code&gt; API ä¼ é€’ä¸‹å»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(10)&lt;/strong&gt; åŠ å¯†çš„æˆæƒæœ€ç»ˆè¢«é€è¾¾ &lt;strong&gt;TEE&lt;/strong&gt;ã€‚åœ¨ TEE å†…éƒ¨ï¼ŒWidevine L1 æ¨¡å—ä¼šä½¿ç”¨å…¶å”¯ä¸€çš„è®¾å¤‡ç§é’¥æ¥è§£å¯†æˆæƒï¼Œä»è€Œå®‰å…¨åœ°æå–å‡º &lt;strong&gt;Content Key&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(Note)&lt;/strong&gt; æ­£å¦‚å›¾ä¸­æ³¨é‡Šæ‰€ç¤ºï¼Œ&lt;strong&gt;Content Key ä»æ­¤æ­¥éª¤å¼€å§‹ï¼Œæ°¸è¿œä¸ä¼šç¦»å¼€ TEE çš„å®‰å…¨ç¯å¢ƒ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="4-å®‰å…¨è§£å¯†ä¸æ¸²æŸ“-æ­¥éª¤-11-14"&gt;&lt;strong&gt;4. å®‰å…¨è§£å¯†ä¸æ¸²æŸ“ (æ­¥éª¤ 11-14)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;(11)&lt;/strong&gt; &lt;code&gt;MediaDRM&lt;/code&gt; å°†ä¸€ä¸ªæŒ‡å‘ TEE å†…éƒ¨å®‰å…¨ä¼šè¯çš„&lt;strong&gt;å¥æŸ„ (handle)&lt;/strong&gt;ï¼Œè¿åŒåŠ å¯†çš„è§†é¢‘æµï¼Œä¸€èµ·æä¾›ç»™ &lt;strong&gt;&lt;code&gt;MediaCodec&lt;/code&gt;&lt;/strong&gt;ï¼ˆAndroid çš„åª’ä½“ç¼–è§£ç å™¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(12)&lt;/strong&gt; &lt;code&gt;MediaCodec&lt;/code&gt; ä¸ TEE ååŒå·¥ä½œã€‚åŠ å¯†çš„è§†é¢‘å¸§è¢«é€å…¥ TEE è¿›è¡Œç¡¬ä»¶çº§åˆ«çš„è§£å¯†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(Note)&lt;/strong&gt; å›¾ä¸­æ³¨é‡Šå†æ¬¡å¼ºè°ƒï¼Œ&lt;strong&gt;è§£å¯†åçš„æ˜æ–‡è§†é¢‘å¸§ä¼šé€šè¿‡ä¸€ä¸ªå®‰å…¨è·¯å¾„ (Secure Path) ç›´æ¥ä¼ è¾“&lt;/strong&gt;ï¼Œå®Œå…¨ç»•è¿‡äº†æµè§ˆå™¨å’Œ Android çš„åº”ç”¨ç¨‹åºå±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(13-14)&lt;/strong&gt; è¿™äº›æ˜æ–‡å¸§è¢«ç›´æ¥å‘é€åˆ° &lt;strong&gt;GPU / Display&lt;/strong&gt; ç¡¬ä»¶è¿›è¡Œæ¸²æŸ“ï¼Œæœ€ç»ˆç”¨æˆ·åœ¨å±å¹•ä¸Šçœ‹åˆ°æ’­æ”¾çš„ç”»é¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="æ ¸å¿ƒå®‰å…¨åŸåˆ™æ€»ç»“"&gt;&lt;strong&gt;æ ¸å¿ƒå®‰å…¨åŸåˆ™æ€»ç»“&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;è¿™ä»½æ—¶åºå›¾å®Œç¾åœ°å±•ç¤ºäº† Widevine L1 çš„æ ¸å¿ƒå®‰å…¨åŸåˆ™ï¼š&lt;/p&gt;</description></item><item><title>OEM Dynamic Theme Engine: A Multi-brand, Multi-user Technical Solution</title><link>https://ethen-cao.github.io/ethenslab/explore-ai/oem-dynamic-theme-engine/</link><pubDate>Fri, 08 Aug 2025 19:49:26 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/oem-dynamic-theme-engine/</guid><description>&lt;h1 id="oem-å¤šå“ç‰Œå¤šä½¿ç”¨è€…å‹•æ…‹ä¸»é¡Œå¼•æ“æŠ€è¡“æ–¹æ¡ˆ"&gt;OEM å¤šå“ç‰Œå¤šä½¿ç”¨è€…å‹•æ…‹ä¸»é¡Œå¼•æ“æŠ€è¡“æ–¹æ¡ˆ&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ç‰ˆæœ¬&lt;/th&gt;
&lt;th style="text-align: left"&gt;æ—¥æœŸ&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä½œè€…&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä¿®è¨‚èªªæ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;2.18&lt;/td&gt;
&lt;td style="text-align: left"&gt;2025-08-09&lt;/td&gt;
&lt;td style="text-align: left"&gt;Gemini&lt;/td&gt;
&lt;td style="text-align: left"&gt;åœ¨é™„éŒ„ä¸­æ–°å¢äº†â€œ7.3 TMS éƒ¨ç½²æ¨¡å¼â€çš„æ¶æ§‹æ±ºç­–åˆ†æã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;2.19&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;2025-08-09&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;Gemini&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æ ¹æ“šä½¿ç”¨è€…æä¾›çš„åœ–è¡¨ï¼Œåœ¨ 7.3 ç« ç¯€ä¸­æ–°å¢äº† TMS éƒ¨ç½²æ¨¡å¼çš„ PlantUML å°æ¯”åœ–ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="1-æ–¹æ¡ˆæ¦‚è¿°-executive-summary"&gt;1. æ–¹æ¡ˆæ¦‚è¿° (Executive Summary)&lt;/h2&gt;
&lt;p&gt;æœ¬æ–¹æ¡ˆæ—¨åœ¨ç‚º OEM å» å•†è¨­è¨ˆä¸€å¥—ä¼æ¥­ç´šçš„ã€åŠŸèƒ½å®Œå‚™çš„ Android å‹•æ…‹ä¸»é¡Œå¼•æ“ã€‚è©²å¼•æ“ä¸åƒ…èƒ½æ»¿è¶³å¤šå“ç‰Œã€å¤š SKU çš„å‡ºå» é è¨­é¢¨æ ¼å·®ç•°åŒ–ï¼Œæ›´èƒ½é€éåŠŸèƒ½å¼·å¤§çš„&lt;strong&gt;ä¸»é¡Œå•†åº—&lt;/strong&gt;ï¼Œç‚ºä½¿ç”¨è€…æä¾›åŒ…æ‹¬ä¸»é¡Œé è¦½ã€å€‹æ€§åŒ–å¾®èª¿ã€è·¨è£ç½®åŒæ­¥åœ¨å…§çš„å…¨æ–¹ä½å€‹æ€§åŒ–é«”é©—ã€‚&lt;/p&gt;
&lt;p&gt;æ–¹æ¡ˆæ ¸å¿ƒæ˜¯è‡ªç ”ä¸€å€‹åŸ·è¡Œæ–¼ system_server çš„&lt;strong&gt;ä¸»é¡Œç®¡ç†æœå‹™ (ThemeManagerService, TMS)&lt;/strong&gt;ï¼Œå®ƒä½œç‚ºä¸»é¡Œç”Ÿæ…‹çš„å¤§è…¦ï¼Œè² è²¬ç®¡ç†ä¸»é¡ŒåŒ…çš„ç”Ÿå‘½é€±æœŸã€è™•ç†å¤šä½¿ç”¨è€…ç’°å¢ƒä¸‹çš„æ¬Šé™èˆ‡è³‡æ–™éš”é›¢ã€ä¸¦å‘ä¸Šå±¤çš„&lt;strong&gt;ä¸»é¡Œå•†åº—æ‡‰ç”¨&lt;/strong&gt;æä¾›ç©©å®šçš„ AIDL ä»‹é¢ã€‚&lt;/p&gt;
&lt;p&gt;æœ€çµ‚ç›®æ¨™æ˜¯æ‰“é€ ä¸€å€‹ç©©å®šã€é«˜æ•ˆã€å®‰å…¨ä¸”å¯æ“´å±•çš„ä¸»é¡Œå¹³å°ï¼Œä¸åƒ…èƒ½å¼·åŒ– OEM å“ç‰Œå½¢è±¡ï¼Œæ›´èƒ½æ§‹å»ºä¸€å€‹é–‹æ”¾çš„ç¬¬ä¸‰æ–¹ä¸»é¡Œç”Ÿæ…‹ï¼Œæå‡ä½¿ç”¨è€…é«”é©—èˆ‡é»æ€§ã€‚&lt;/p&gt;
&lt;h2 id="2-æ ¸å¿ƒéœ€æ±‚èˆ‡ç›®æ¨™"&gt;2. æ ¸å¿ƒéœ€æ±‚èˆ‡ç›®æ¨™&lt;/h2&gt;
&lt;p&gt;æœ¬æ–¹æ¡ˆæ—¨åœ¨æ»¿è¶³ä»¥ä¸‹ 14 é …æ ¸å¿ƒéœ€æ±‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ç·¨è™Ÿ&lt;/th&gt;
&lt;th style="text-align: left"&gt;éœ€æ±‚æè¿°&lt;/th&gt;
&lt;th style="text-align: left"&gt;é—œéµç›®æ¨™&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;1&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¤šå“ç‰Œé è¨­ä¸»é¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¯¦ç¾ä¸åŒç”¢å“ç·šå‡ºå» æ™‚æ“æœ‰ç¨ç‰¹ã€å›ºå®šçš„å“ç‰Œè¦–è¦ºè­˜åˆ¥ (VI)ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;2&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å‹•æ…‹ä¸»é¡Œåˆ‡æ›&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…è¨±ä½¿ç”¨è€…åœ¨ä¸é‡å•Ÿè¨­å‚™çš„æƒ…æ³ä¸‹ï¼Œä¸€éµä¸‹è¼‰ã€å®‰è£ã€æ‡‰ç”¨ã€åˆªé™¤ä¸»é¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;3&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å…¨åŸŸæ·±åº¦ç¾åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸»é¡Œæ•ˆæœéœ€è¦†è“‹ç³»çµ±æ¡†æ¶ã€SystemUIã€å•Ÿå‹•å™¨ç­‰å¤šå€‹æ ¸å¿ƒæ‡‰ç”¨ï¼Œä¿è­‰é«”é©—ä¸€è‡´æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;4&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¤šä½¿ç”¨è€…è³‡æ–™éš”é›¢&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;åœ¨å¤šä½¿ç”¨è€…æ¨¡å¼ä¸‹ï¼Œæ¯å€‹ä½¿ç”¨è€…çš„ä¸»é¡Œé¸æ“‡å’Œç§æœ‰ä¸»é¡Œåˆ—è¡¨æ‡‰ç›¸äº’ç¨ç«‹ï¼Œäº’ä¸å½±éŸ¿ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;5&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ç‰ˆæœ¬ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¯æ´ä¸»é¡Œçš„å¹³æ»‘å‡ç´šèˆ‡å®‰å…¨å›æ»¾ï¼Œé¿å…å› ç‰ˆæœ¬å•é¡Œå°è‡´ç³»çµ±ä¸ç©©å®šã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;6&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ç¬¬ä¸‰æ–¹ç”Ÿæ…‹&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å»ºç«‹æ¨™æº–åŒ–çš„ä¸»é¡ŒåŒ…é–‹ç™¼è¦ç¯„ï¼Œå…è¨±ç¬¬ä¸‰æ–¹é–‹ç™¼è€…åƒèˆ‡ä¸»é¡Œè£½ä½œèˆ‡åˆ†ç™¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;7&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æ€§èƒ½å„ªåŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸»é¡Œåˆ‡æ›æ‡‰ä¿è­‰æµæš¢å¿«é€Ÿï¼Œé¿å…ç³»çµ±å¡é “å’Œè€—é›»éå¿«ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;8&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å®‰å…¨èˆ‡æ¬Šé™æ§åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç¢ºä¿ä¸»é¡ŒåŒ…ä¾†æºå¯ä¿¡ï¼Œé˜²æ­¢æƒ¡æ„ä¸»é¡Œç ´å£ç³»çµ±å®‰å…¨æˆ–æ´©éœ²ä½¿ç”¨è€…éš±ç§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;9&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å€‹æ€§åŒ–ä¸»é¡Œå®šè£½&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¯æ´ä½¿ç”¨è€…å°ä¸»é¡Œé€²è¡Œå€‹æ€§åŒ–å®šè£½ï¼Œå¦‚èª¿æ•´é¡è‰²ã€å­—é«”ã€åœ–ç¤ºæ¨£å¼ç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;10&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;è·¨è£ç½®åŒæ­¥&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¯æ´ä½¿ç”¨è€…è·¨è£ç½®åŒæ­¥ä¸»é¡Œè¨­å®šï¼Œå¯¦ç¾ç„¡ç¸«é«”é©—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;11&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸»é¡Œé è¦½åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä½¿ç”¨è€…å¯åœ¨æ‡‰ç”¨å‰é è¦½ä¸»é¡Œæ•ˆæœï¼Œæå‡é¸æ“‡é«”é©—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;12&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸»é¡Œç›¸å®¹æ€§æª¢æ¸¬&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;è‡ªå‹•æª¢æ¸¬ä¸»é¡Œèˆ‡ç³»çµ±ç‰ˆæœ¬ã€æ‡‰ç”¨ç›¸å®¹æ€§ï¼Œé¿å…ä¸»é¡Œå°è‡´åŠŸèƒ½ç•°å¸¸ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;13&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¤šèªè¨€æ”¯æ´&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸»é¡Œç®¡ç†ä»‹é¢åŠä¸»é¡ŒåŒ…æ”¯æ´å¤šèªè¨€ï¼Œæ»¿è¶³å…¨çƒä½¿ç”¨è€…éœ€æ±‚ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;14&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸»é¡Œæ¢å¾©é è¨­è¨­å®š&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æä¾›ä¸€éµæ¢å¾©ç³»çµ±é è¨­ä¸»é¡Œçš„åŠŸèƒ½ï¼Œæ–¹ä¾¿ä½¿ç”¨è€…å¿«é€Ÿå›é€€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="3-ç³»çµ±æ¶æ§‹-system-architecture"&gt;3. ç³»çµ±æ¶æ§‹ (System Architecture)&lt;/h2&gt;
&lt;p&gt;æ•´é«”æ¶æ§‹ä»¥è‡ªç ”çš„ TMS ç‚ºæ ¸å¿ƒï¼Œå”åŒç³»çµ±åŸç”Ÿæœå‹™ï¼Œå‘ä¸Šå±¤æ‡‰ç”¨æä¾›èƒ½åŠ›ã€‚&lt;/p&gt;</description></item><item><title>Android DRM æ¡†æ¶</title><link>https://ethen-cao.github.io/ethenslab/android-dev/media/android-drm/</link><pubDate>Fri, 08 Aug 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/media/android-drm/</guid><description>&lt;h2 id="widevine-overview"&gt;Widevine Overview&lt;/h2&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/Widevine_architect.png" alt="" /&gt;&lt;/p&gt;
&lt;p&gt;è¿™å¼ å›¾æ˜¯ &lt;strong&gt;Widevine DRMï¼ˆæ•°å­—ç‰ˆæƒç®¡ç†ï¼‰è§†é¢‘æ’­æ”¾æµç¨‹&lt;/strong&gt; çš„æ•´ä½“æ¶æ„å›¾ï¼Œå±•ç¤ºäº†ä»å†…å®¹æ‰“åŒ…ã€åˆ†å‘åˆ°ç»ˆç«¯è®¾å¤‡è§£å¯†æ’­æ”¾çš„å®Œæ•´é“¾è·¯ã€‚åˆ†æ­¥éª¤è§£è¯»ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="1-å†…å®¹å‡†å¤‡ä¸åˆ†å‘"&gt;1. &lt;strong&gt;å†…å®¹å‡†å¤‡ä¸åˆ†å‘&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Source Mediaï¼ˆåŸå§‹åª’ä½“å†…å®¹ï¼‰&lt;/strong&gt;
è¿™æ˜¯æœªç»åŠ å¯†çš„éŸ³è§†é¢‘æºæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Shaka Packagerï¼ˆæ‰“åŒ…å™¨ï¼‰&lt;/strong&gt;
å°†åŸå§‹åª’ä½“æ–‡ä»¶è¿›è¡Œ &lt;strong&gt;åŠ å¯†å’Œåˆ†ç‰‡&lt;/strong&gt;ï¼Œå¹¶æ‰“åŒ…æˆ &lt;strong&gt;DASH Presentationï¼ˆè‡ªé€‚åº”æµåª’ä½“æ ¼å¼ï¼‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DASH Presentation&lt;/strong&gt;
æ˜¯æœ€ç»ˆçš„åª’ä½“æè¿°æ–‡ä»¶ï¼ˆå¦‚ MPDï¼‰ï¼Œé‡Œé¢åŒ…å«åˆ†ç‰‡ä¿¡æ¯ã€ç ç‡ä¿¡æ¯å’ŒåŠ å¯†æ ‡è®°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰&lt;/strong&gt;
DASH æ–‡ä»¶å’ŒåŠ å¯†åçš„åª’ä½“åˆ†ç‰‡ä¼šè¢«æ”¾åˆ° CDN ä¸Šï¼Œä¾›ç»ˆç«¯æ’­æ”¾å™¨è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="2-æˆæƒä¸å¯†é’¥æœåŠ¡"&gt;2. &lt;strong&gt;æˆæƒä¸å¯†é’¥æœåŠ¡&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;License Serviceï¼ˆè®¸å¯è¯æœåŠ¡ï¼‰&lt;/strong&gt;
ç®¡ç†å†…å®¹å¯†é’¥ï¼ˆKIDã€CEKï¼‰ï¼Œå¹¶æ ¹æ®ç»ˆç«¯è¯·æ±‚ç­¾å‘æ’­æ”¾è®¸å¯è¯ï¼ˆLicenseï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;License Proxy&lt;/strong&gt;
å……å½“ä¸­é—´å±‚ï¼Œæ¥æ”¶ç»ˆç«¯çš„ License è¯·æ±‚å¹¶è½¬å‘ç»™ License Serviceï¼Œå†æŠŠç»“æœè¿”å›ç»™ç»ˆç«¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="3-è®¾å¤‡å®‰å…¨ä¸å¯†é’¥ä¿æŠ¤"&gt;3. &lt;strong&gt;è®¾å¤‡å®‰å…¨ä¸å¯†é’¥ä¿æŠ¤&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OEMï¼ˆè®¾å¤‡åˆ¶é€ å•†ï¼‰&lt;/strong&gt;
åœ¨è®¾å¤‡ä¸­å®ç° &lt;strong&gt;OEMCrypto HAL&lt;/strong&gt;ï¼Œå¹¶æä¾›ç¡¬ä»¶å®‰å…¨ç¯å¢ƒï¼ˆTEEã€Secure OSï¼‰ã€‚
è®¾å¤‡å‡ºå‚æ—¶ä¼šå­˜æœ‰ &lt;strong&gt;Lockboxï¼ˆKeyboxesï¼‰&lt;/strong&gt;ï¼Œè¿™æ˜¯è®¾å¤‡çš„å®‰å…¨èº«ä»½å‡­è¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keysith (Provisioning)&lt;/strong&gt;
ç”¨äºè®¾å¤‡é¦–æ¬¡æ¿€æ´»æ—¶çš„ &lt;strong&gt;è®¾å¤‡è®¤è¯ä¸å¯†é’¥é…ç½®&lt;/strong&gt;ï¼Œä¿è¯ç»ˆç«¯èƒ½å®‰å…¨æ¥æ”¶ DRM å¯†é’¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="4-ç»ˆç«¯æ’­æ”¾æµç¨‹"&gt;4. &lt;strong&gt;ç»ˆç«¯æ’­æ”¾æµç¨‹&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Media Player&lt;/strong&gt;
æ’­æ”¾å™¨è§£æ DASH MPDï¼Œä» CDN æ‹‰å–åŠ å¯†çš„åª’ä½“åˆ†ç‰‡ã€‚
æ’­æ”¾å™¨æ£€æµ‹åˆ°å†…å®¹åŠ å¯†åï¼Œä¼šé€šè¿‡ &lt;strong&gt;CDMï¼ˆContent Decryption Moduleï¼‰&lt;/strong&gt; è¯·æ±‚è§£å¯†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CDM&lt;/strong&gt;
å†…å®¹è§£å¯†æ¨¡å—ï¼Œè´Ÿè´£ï¼š&lt;/p&gt;</description></item><item><title>Android MediaSession ç®¡ç†ä¸è·¯ç”±æœºåˆ¶</title><link>https://ethen-cao.github.io/ethenslab/android-dev/media/android.media/</link><pubDate>Fri, 08 Aug 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/media/android.media/</guid><description>&lt;h2 id="1-æ¦‚è¿°"&gt;1. æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;åœ¨ Android ç³»ç»Ÿä¸­ï¼Œ&lt;strong&gt;MediaSessionService&lt;/strong&gt; è´Ÿè´£ç®¡ç†æ‰€æœ‰çš„åª’ä½“ä¼šè¯ï¼Œå¹¶å†³å®šå“ªä¸ªåº”ç”¨åº”å½“æ¥æ”¶åª’ä½“æŒ‰é”®äº‹ä»¶ï¼ˆå¦‚è€³æœºçº¿æ§çš„æ’­æ”¾/æš‚åœï¼‰ã€‚è¿™ä¸€å†³ç­–æœºåˆ¶å¹¶éä»…ä»…ä¾èµ–åº”ç”¨è‡ªèº«çš„çŠ¶æ€ä¸ŠæŠ¥ï¼Œè€Œæ˜¯æ·±åº¦ç»“åˆäº† &lt;strong&gt;AudioService&lt;/strong&gt; çš„ç‰©ç†å‘å£°çŠ¶æ€ï¼Œå®ç°äº†â€œæ‰€å¬å³æ‰€å¾—â€çš„æ§åˆ¶ä½“éªŒã€‚&lt;/p&gt;
&lt;h2 id="2-æ ¸å¿ƒç»„ä»¶äº¤äº’"&gt;2. æ ¸å¿ƒç»„ä»¶äº¤äº’&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;AudioService &amp;amp; AudioPlayerStateMonitor (APSM)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;ä½œä¸ºâ€œäº‹å®çš„æ¥æºâ€ã€‚APSM ç›‘å¬åº•å±‚ &lt;code&gt;AudioTrack&lt;/code&gt; çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;ç»´æŠ¤ä¸€ä¸ª &lt;strong&gt;UID å†å²é˜Ÿåˆ— (&lt;code&gt;mSortedAudioPlaybackClientUids&lt;/code&gt;)&lt;/strong&gt;ã€‚è¿™ä¸ªé˜Ÿåˆ—æŒ‰ç…§â€œæœ€åå¼€å§‹æ’­æ”¾çš„æ—¶é—´â€å€’åºæ’åˆ—ã€‚å³ä½¿åº”ç”¨æš‚åœæ’­æ”¾ï¼Œåªè¦å®ƒæœªè¢«åç»­åº”ç”¨æŒ¤å‡ºæˆ–è¢«æ¸…ç†ï¼Œå®ƒä¾ç„¶ä¿ç•™åœ¨é˜Ÿåˆ—ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MediaSessionService (MSS)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;ä½œä¸ºç³»ç»ŸæœåŠ¡çš„ä¸­æ¢ï¼Œåè°ƒ Audio å’Œ Media ç»„ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MediaSessionStack&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;ä½œä¸ºâ€œå†³ç­–å¤§è„‘â€ã€‚å®ƒæ ¹æ® APSM æä¾›çš„ UID é˜Ÿåˆ—ï¼Œåœ¨å·²æ³¨å†Œçš„ Session ä¸­æŸ¥æ‰¾åŒ¹é…é¡¹ï¼Œç¡®å®š &lt;strong&gt;MediaButtonSession&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="3-mediabuttonsession-çš„é€‰æ‹©é€»è¾‘"&gt;3. MediaButtonSession çš„é€‰æ‹©é€»è¾‘&lt;/h2&gt;
&lt;p&gt;ç³»ç»Ÿé€šè¿‡ &lt;code&gt;MediaSessionStack.updateMediaButtonSessionIfNeeded()&lt;/code&gt; æ–¹æ³•é€‰æ‹©æ¥æ”¶æŒ‰é”®çš„ç›®æ ‡ã€‚é€‰æ‹©ä¼˜å…ˆçº§å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Audio é©±åŠ¨ (æœ€é«˜ä¼˜å…ˆçº§)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;ç³»ç»Ÿä¼˜å…ˆæŸ¥çœ‹ APSM æä¾›çš„éŸ³é¢‘ UID åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­£åœ¨å‘å£°çš„åº”ç”¨&lt;/strong&gt;: å¦‚æœåˆ—è¡¨é¦–ä½çš„åº”ç”¨æ­£åœ¨å‘å£° (&lt;code&gt;isActive=true&lt;/code&gt;)ï¼Œä¸”æ‹¥æœ‰ Sessionï¼Œå®ƒç›´æ¥æˆä¸º MediaButtonSessionã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†å²æ´»è·ƒçš„åº”ç”¨ (ç²˜æ€§æœºåˆ¶)&lt;/strong&gt;: å¦‚æœåˆ—è¡¨é¦–ä½çš„åº”ç”¨æš‚åœäº† (&lt;code&gt;isActive=false&lt;/code&gt;)ï¼Œä½†å®ƒæ˜¯åˆ—è¡¨ä¸­ä»…å­˜çš„æˆ–æœ€æ–°çš„è®°å½•ï¼Œä¸”æ‹¥æœ‰ Sessionï¼Œå®ƒä¾ç„¶ä¿æŒä¸º MediaButtonSessionã€‚è¿™ç¡®ä¿äº†ç”¨æˆ·æš‚åœéŸ³ä¹åï¼ŒæŒ‰è€³æœºé”®èƒ½æ¢å¤è¯¥åº”ç”¨çš„æ’­æ”¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Stack å†å²å…œåº• (ä½ä¼˜å…ˆçº§)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;åªæœ‰å½“ APSM çš„éŸ³é¢‘åˆ—è¡¨ä¸ºç©ºï¼ˆæ‰€æœ‰è®°å½•éƒ½è¢«æ¸…ç†ï¼‰æ—¶ï¼ŒStack æ‰ä¼šæ ¹æ® Session è‡ªèº«çš„ &lt;code&gt;PlaybackState&lt;/code&gt; æˆ– &lt;code&gt;Active&lt;/code&gt; çŠ¶æ€æ¥é€‰æ‹©æœ€è¿‘çš„ä¼šè¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="4-å…¸å‹åœºæ™¯æµç¨‹è§£æ"&gt;4. å…¸å‹åœºæ™¯æµç¨‹è§£æ&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹æµç¨‹æè¿°äº†ç”¨æˆ·ä» App A åˆ‡æ¢åˆ° App B å¹¶è¿›è¡Œæ’­æ”¾æ§åˆ¶çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚
&lt;img src="https://ethen-cao.github.io/ethenslab/images/android-MediaSessionService-updateMediaSession.png" alt="" /&gt;&lt;/p&gt;</description></item><item><title>Android Theme</title><link>https://ethen-cao.github.io/ethenslab/android-dev/resource/android-theme/</link><pubDate>Fri, 08 Aug 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/resource/android-theme/</guid><description>&lt;h2 id="ç®€ä»‹"&gt;ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;Androidçš„&lt;strong&gt;Themeï¼ˆä¸»é¢˜ï¼‰&lt;/strong&gt;ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€ç»„é¢„å®šä¹‰çš„è§†è§‰æ ·å¼å’Œå±æ€§é›†åˆï¼Œåº”ç”¨äºæ•´ä¸ªåº”ç”¨æˆ–ç•Œé¢ï¼Œå†³å®šç•Œé¢å…ƒç´ çš„é¢œè‰²ã€å­—ä½“ã€æ§ä»¶æ ·å¼ã€é—´è·ã€èƒŒæ™¯ç­‰å¤–è§‚è¡¨ç°ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="è¯¦ç»†è§£é‡Š"&gt;è¯¦ç»†è§£é‡Š&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;ï¼šç»Ÿä¸€ç®¡ç†åº”ç”¨ç•Œé¢é£æ ¼ï¼Œä¿æŒæ•´ä½“è§†è§‰ä¸€è‡´æ€§ï¼Œé¿å…åœ¨æ¯ä¸ªæ§ä»¶ä¸Šå•ç‹¬è®¾ç½®æ ·å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…å®¹&lt;/strong&gt;ï¼šåŒ…å«é¢œè‰²ï¼ˆprimary colorã€accent colorç­‰ï¼‰ã€æ–‡å­—æ ·å¼ã€æŒ‰é’®æ ·å¼ã€æ§ä»¶é»˜è®¤èƒŒæ™¯ã€åŠ¨ç”»ã€é—´è·ã€å›¾æ ‡ç­‰å¤šç§å±æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»§æ‰¿&lt;/strong&gt;ï¼šThemeæ˜¯åŸºäº&lt;code&gt;style&lt;/code&gt;æ„å»ºçš„ï¼Œä¸”æ”¯æŒç»§æ‰¿ï¼Œå¸¸è§æœ‰ç³»ç»Ÿé»˜è®¤ä¸»é¢˜ï¼ˆå¦‚&lt;code&gt;Theme.Holo&lt;/code&gt;ã€&lt;code&gt;Theme.MaterialComponents&lt;/code&gt;ï¼‰ï¼Œå¼€å‘è€…å¯ç»§æ‰¿è¿™äº›ä¸»é¢˜è‡ªå®šä¹‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨èŒƒå›´&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€&lt;/strong&gt;ï¼šåœ¨&lt;code&gt;AndroidManifest.xml&lt;/code&gt;ä¸­é€šè¿‡&lt;code&gt;application&lt;/code&gt;æ ‡ç­¾çš„&lt;code&gt;android:theme&lt;/code&gt;å±æ€§è®¾ç½®ï¼Œå½±å“æ•´ä¸ªAppã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±€éƒ¨&lt;/strong&gt;ï¼šå¯åœ¨&lt;code&gt;Activity&lt;/code&gt;æˆ–&lt;code&gt;View&lt;/code&gt;ä¸­å•ç‹¬è®¾ç½®ï¼Œè¦†ç›–å…¨å±€ä¸»é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="ä¸¾ä¾‹"&gt;ä¸¾ä¾‹&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-xml" data-lang="xml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&amp;lt;!-- åº”ç”¨ä¸»é¢˜ --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;style&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;name=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;AppTheme&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;parent=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Theme.MaterialComponents.DayNight.NoActionBar&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;item&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;name=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;colorPrimary&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt;@color/my_primary_color&lt;span style="color:#f92672"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;item&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;name=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;colorAccent&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt;@color/my_accent_color&lt;span style="color:#f92672"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;&amp;lt;!-- æ›´å¤šè‡ªå®šä¹‰å±æ€§ --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨&lt;code&gt;AndroidManifest.xml&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-xml" data-lang="xml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;application&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;android:theme=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;@style/AppTheme&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;...&lt;/span&gt;&lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id="ä¸»é¢˜ä¸æ ·å¼çš„åŒºåˆ«"&gt;ä¸»é¢˜ä¸æ ·å¼çš„åŒºåˆ«&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ·å¼ï¼ˆStyleï¼‰&lt;/strong&gt;ï¼šä½œç”¨äºå•ä¸ªViewæ§ä»¶çš„å¤–è§‚å®šä¹‰ï¼ˆå¦‚æŒ‰é’®é¢œè‰²ã€å­—ä½“å¤§å°ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»é¢˜ï¼ˆThemeï¼‰&lt;/strong&gt;ï¼šæ˜¯ä½œç”¨äºæ•´ä¸ªç•Œé¢æˆ–åº”ç”¨çš„æ ·å¼é›†åˆï¼ŒåŒ…å«å¤§é‡æ ·å¼å±æ€§ï¼Œèƒ½æ§åˆ¶å…¨å±€æ§ä»¶é»˜è®¤è¡Œä¸ºå’Œå¤–è§‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="ä¸»é¢˜çš„æ¼”è¿›"&gt;ä¸»é¢˜çš„æ¼”è¿›&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Theme.Holo&lt;/strong&gt;ï¼šAndroid 3.x å¼•å…¥çš„è¾ƒæ—©ç°ä»£ä¸»é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Theme.AppCompat&lt;/strong&gt;ï¼šæ”¯æŒæ—§ç‰ˆæœ¬Androidçš„å…¼å®¹åº“ä¸»é¢˜ï¼Œå¹¿æ³›ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Theme.MaterialComponents&lt;/strong&gt;ï¼šå®ç°Material Designè§„èŒƒï¼Œé€‚åˆAndroid 5.0åŠä»¥ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Theme.Material3&lt;/strong&gt;ï¼šæœ€æ–°Material Youè®¾è®¡ï¼Œæ”¯æŒåŠ¨æ€è‰²å½©ç­‰æ–°ç‰¹æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;Androidä¸»é¢˜æ¼”è¿›å’Œç»“æ„çš„å›¾å‚è€ƒå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/theme.png" alt="Androidä¸»é¢˜æ¼”è¿›" /&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="å¹³å°ä¸»é¢˜"&gt;å¹³å°ä¸»é¢˜&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;å¹³å°ä¸»é¢˜ï¼ˆPlatform Themeï¼‰&lt;/strong&gt;ï¼ŒæŒ‡çš„æ˜¯ Android æ“ä½œç³»ç»Ÿè‡ªèº«æä¾›çš„ã€å†…ç½®åœ¨ç³»ç»Ÿæ¡†æ¶ä¸­çš„ä¸»é¢˜æ ·å¼é›†åˆã€‚å®ƒä»¬æ˜¯ Android ç³»ç»Ÿä»ä¸€å¼€å§‹å°±å¸¦æœ‰çš„åŸºç¡€è§†è§‰é£æ ¼ï¼Œå®šä¹‰äº†ç³»ç»Ÿé»˜è®¤çš„ç•Œé¢å¤–è§‚å’Œæ§ä»¶æ ·å¼ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id="è¯¦ç»†è¯´æ˜"&gt;è¯¦ç»†è¯´æ˜&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”±è°æä¾›&lt;/strong&gt;ï¼šç”± Android ç³»ç»Ÿå¹³å°ï¼ˆFrameworkï¼‰è‡ªå¸¦ï¼Œéšç€ç³»ç»Ÿç‰ˆæœ¬å‡çº§è€Œæ¼”è¿›å’Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;ï¼šä¸ºæ‰€æœ‰åº”ç”¨å’Œç³»ç»Ÿç•Œé¢æä¾›é»˜è®¤çš„è§†è§‰é£æ ¼åŸºå‡†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ…å«äº†ä¸€ç³»åˆ—åŸºç¡€æ ·å¼å±æ€§ï¼Œä¾‹å¦‚é¢œè‰²ã€å­—ä½“ã€æ§ä»¶æ ·å¼ã€èƒŒæ™¯ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨é»˜è®¤ç»§æ‰¿å¹³å°ä¸»é¢˜ï¼ˆå¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šä¸»é¢˜ï¼‰ï¼Œä¿è¯äº†ä¸åŒåº”ç”¨ç•Œé¢é£æ ¼çš„ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;li&gt;æ˜¯æ‰€æœ‰å…¼å®¹åº“ä¸»é¢˜ï¼ˆå¦‚ AppCompatï¼‰å’Œç¬¬ä¸‰æ–¹ä¸»é¢˜çš„åŸºåº•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id="å¸¸è§çš„å¹³å°ä¸»é¢˜"&gt;å¸¸è§çš„å¹³å°ä¸»é¢˜&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ä¸»é¢˜åç§°&lt;/th&gt;
&lt;th&gt;é€‚ç”¨APIç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Theme&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;API 1+&lt;/td&gt;
&lt;td&gt;æœ€åŸºç¡€çš„ç³»ç»Ÿä¸»é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Theme.Holo&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;API 11ï¼ˆAndroid 3.0ï¼‰åˆ°API 20&lt;/td&gt;
&lt;td&gt;ç°ä»£åŒ–è“è‰²è°ƒä¸»é¢˜ï¼Œé¦–æ¬¡å¼•å…¥è¾ƒç»Ÿä¸€çš„è§†è§‰é£æ ¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Theme.Material&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;API 21ï¼ˆAndroid 5.0ï¼‰åŠä»¥å&lt;/td&gt;
&lt;td&gt;å®ç° Google Material Designè§„èŒƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Theme.DeviceDefault&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;API 14+&lt;/td&gt;
&lt;td&gt;æ ¹æ®è®¾å¤‡å®šåˆ¶çš„é»˜è®¤ä¸»é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h4 id="ä¸ºä»€ä¹ˆè¦ç”¨å¹³å°ä¸»é¢˜"&gt;ä¸ºä»€ä¹ˆè¦ç”¨å¹³å°ä¸»é¢˜ï¼Ÿ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¼å®¹æ€§&lt;/strong&gt;ï¼šç³»ç»Ÿæä¾›çš„ä¸»é¢˜ä¿è¯åº”ç”¨åœ¨ä¸åŒAndroidç‰ˆæœ¬ä¸Šçš„åŸºæœ¬ä¸€è‡´æ€§å’Œå…¼å®¹æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ï¼šç³»ç»Ÿä¸»é¢˜ç»è¿‡ä¼˜åŒ–ï¼Œèƒ½ä¿è¯ç•Œé¢æµç•…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•æ€§&lt;/strong&gt;ï¼šå¼€å‘è€…å¯ä»¥åŸºäºå¹³å°ä¸»é¢˜è¿›ä¸€æ­¥è‡ªå®šä¹‰è‡ªå·±çš„ä¸»é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id="å¹³å°ä¸»é¢˜ä¸appcompatä¸»é¢˜çš„å…³ç³»"&gt;å¹³å°ä¸»é¢˜ä¸AppCompatä¸»é¢˜çš„å…³ç³»&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;AppCompatæ˜¯ Google æ”¯æŒåº“æä¾›çš„å…¼å®¹æ–¹æ¡ˆï¼Œå…è®¸åœ¨æ—§ç‰ˆæœ¬Androidï¼ˆæ¯”å¦‚API 14ä»¥ä¸‹ï¼‰ä¹Ÿèƒ½ä½¿ç”¨ç°ä»£é£æ ¼çš„æ§ä»¶å’Œä¸»é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;AppCompatä¸»é¢˜æ˜¯åŸºäºå¹³å°ä¸»é¢˜ï¼ˆHolo æˆ– Materialï¼‰åšäº†äºŒæ¬¡å°è£…å’Œå¢å¼ºï¼Œå®ç°æ›´å¹¿æ³›çš„å…¼å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;å¹³å°ä¸»é¢˜æ¼”è¿›ï¼š&lt;/p&gt;</description></item><item><title>ä½¿ç”¨AndroidStudioè°ƒè¯•AOSP</title><link>https://ethen-cao.github.io/ethenslab/android-dev/debug/using-androidstudio-to-debug-aosp/</link><pubDate>Fri, 08 Aug 2025 11:36:11 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/debug/using-androidstudio-to-debug-aosp/</guid><description>&lt;h2 id="è°ƒè¯•javaè¿›ç¨‹"&gt;è°ƒè¯•Javaè¿›ç¨‹&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨ Android Studio ä¸­è°ƒè¯• AOSP (Android Open Source Project) è¿›ç¨‹ï¼Œå°¤å…¶æ˜¯åƒ system_server è¿™æ ·çš„ç³»ç»Ÿè¿›ç¨‹ã€‚è°ƒè¯• AOSP ä¸æ™®é€šåº”ç”¨è°ƒè¯•æœ‰æ‰€ä¸åŒï¼Œéœ€è¦å€ŸåŠ© JDWP åè®®å’Œ adb ç«¯å£è½¬å‘ã€‚&lt;/p&gt;
&lt;h3 id="å‰ç½®æ¡ä»¶"&gt;å‰ç½®æ¡ä»¶&lt;/h3&gt;
&lt;p&gt;ç¯å¢ƒå‡†å¤‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€å°å¯ä»¥åˆ·å…¥ AOSP çš„è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨&lt;/li&gt;
&lt;li&gt;å·²ç¼–è¯‘å¥½çš„ AOSPï¼ˆæ¨è userdebug æˆ– eng æ„å»ºï¼‰&lt;/li&gt;
&lt;li&gt;PC ä¸Šå®‰è£… Android Studioï¼ˆæœ€æ–°ç‰ˆï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æƒé™è¦æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®¾å¤‡å¿…é¡»æ”¯æŒ adb root&lt;/li&gt;
&lt;li&gt;è®¾å¤‡éœ€è¦æ‰“å¼€è°ƒè¯•å±æ€§ï¼Œä¾‹å¦‚ï¼š
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;adb root
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;adb shell setprop persist.system_server.debuggable &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;adb shell stop
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;adb shell start
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;ä¸Šè¿°å‘½ä»¤è®© system_server åœ¨å¯åŠ¨æ—¶æ”¯æŒè°ƒè¯•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="è°ƒè¯•åŸç†"&gt;è°ƒè¯•åŸç†&lt;/h3&gt;
&lt;p&gt;Android ä½¿ç”¨ JDWP (Java Debug Wire Protocol) è¿›è¡Œ Java è¿›ç¨‹è°ƒè¯•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;system_server å†…éƒ¨ï¼šåŒ…å«ä¸€ä¸ª JDWP Listener çº¿ç¨‹ï¼Œè´Ÿè´£æ¥æ”¶è°ƒè¯•å‘½ä»¤å¹¶æ‰§è¡Œï¼ˆæŒ‚èµ·çº¿ç¨‹ã€è¿”å›å †æ ˆã€å•æ­¥æ‰§è¡Œç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;adbï¼šæä¾› adb forward åŠŸèƒ½ï¼Œå°† PC æœ¬åœ°ç«¯å£ä¸è®¾å¤‡è¿›ç¨‹çš„ JDWP é€šé“è¿æ¥èµ·æ¥ã€‚&lt;/li&gt;
&lt;li&gt;Android Studioï¼šä½œä¸ºè°ƒè¯•å™¨ï¼Œé€šè¿‡ JDWP åè®®ä¸ system_server é€šä¿¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ•°æ®æµç¤ºæ„ï¼š&lt;/p&gt;</description></item><item><title>Technical Design for Seamless Full Screen and Split Screen Switching in AutoNavi Map</title><link>https://ethen-cao.github.io/ethenslab/explore-ai/technical-design-for-seamless-full-screen-and-split-screen-switching-in-autonavi-map/</link><pubDate>Mon, 04 Aug 2025 09:49:58 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/technical-design-for-seamless-full-screen-and-split-screen-switching-in-autonavi-map/</guid><description>&lt;h2 id="éœ€æ±‚èƒŒæ™¯"&gt;éœ€æ±‚èƒŒæ™¯&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;æ ¸å¿ƒåŠŸèƒ½
åŸºäº Android å¹³å° åŠ é«˜å¾·AutoSDKï¼Œå¼€å‘ä¸€ä¸ªè½¦è½½åœ°å›¾åº”ç”¨ã€‚è¯¥åº”ç”¨éœ€å…·å¤‡ä¸¤ç§æ ¸å¿ƒæ˜¾ç¤ºå½¢æ€ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å…¨å±æ¨¡å¼: åœ°å›¾å æ®æ•´ä¸ªå±å¹•ï¼Œæä¾›æ²‰æµ¸å¼å¯¼èˆªä½“éªŒã€‚&lt;/li&gt;
&lt;li&gt;åˆ†å±æ¨¡å¼: å±å¹•å·¦ä¾§çº¦1/3åŒºåŸŸæ˜¾ç¤ºè½¦è¾†ä¿¡æ¯é¢æ¿ï¼ˆå¦‚è½¦æ¨¡ã€è½¬å‘ç¯çŠ¶æ€ç­‰ï¼‰ï¼Œå³ä¾§çº¦2/3åŒºåŸŸæ˜¾ç¤ºåœ°å›¾ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;äº¤äº’è¦æ±‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;åº”ç”¨ç•Œé¢ä¸‹æ–¹å­˜åœ¨ä¸€ä¸ªå¸¸é©»çš„Dockæ ï¼Œæ ä¸Šæœ‰ä¸€ä¸ªâ€œåœ°å›¾â€æŒ‰é’®ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·é€šè¿‡åå¤ç‚¹å‡»æ­¤æŒ‰é’®ï¼Œå¯ä»¥åœ¨â€œå…¨å±æ¨¡å¼â€ä¸â€œåˆ†å±æ¨¡å¼â€ä¹‹é—´å¾ªç¯åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;è´¨é‡è¦æ±‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;â€œä¸æ»‘â€è¿‡æ¸¡: ä¸¤ç§æ¨¡å¼ä¹‹é—´çš„åˆ‡æ¢è¿‡ç¨‹å¿…é¡»æ˜¯æµç•…çš„åŠ¨ç”»ï¼Œä¸èƒ½æœ‰ä»»ä½•è§†è§‰ä¸Šçš„ä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;â€œä¸‰æ— â€æ ‡å‡†: åˆ‡æ¢åŠ¨ç”»è¿‡ç¨‹ä¸­ï¼Œä¸¥ç¦å‡ºç°ä»»ä½•é»‘å±ã€é—ªçƒæˆ–å¡é¡¿æ‰å¸§ç°è±¡ï¼Œä»¥ç¡®ä¿é«˜ç«¯ã€æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æŠ€æœ¯æŒ‘æˆ˜ä¸é€‰å‹"&gt;æŠ€æœ¯æŒ‘æˆ˜ä¸é€‰å‹&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;ä¸»è¦æŒ‘æˆ˜
åœ¨Androidå¹³å°ä¸Šï¼Œå¯¹ä¸€ä¸ªæ­£åœ¨è¿›è¡Œå®æ—¶ã€å¤æ‚å†…å®¹æ¸²æŸ“çš„è§†å›¾ï¼ˆå¦‚åœ°å›¾ï¼‰è¿›è¡Œå°ºå¯¸å’Œä½ç½®çš„å˜æ›´ï¼Œæ˜¯ä¸€é¡¹æå…·æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ã€‚ä¼ ç»Ÿçš„è§†å›¾åŠ¨ç”»æˆ–ç›´æ¥æ”¹å˜çª—å£å°ºå¯¸çš„æ–¹æ¡ˆï¼Œå¾€å¾€ä¼šè§¦å‘åº•å±‚çš„Windowé‡ç»˜æˆ–Surfaceé‡å»ºï¼Œè¿™ä¸ªè¿‡ç¨‹è€—æ—¶è¾ƒé•¿ï¼Œææ˜“å¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;é—ªçƒ/é»‘å±: åœ¨æ—§çš„Surfaceè¢«é”€æ¯ã€æ–°çš„Surfaceå°šæœªå®Œå…¨æ¸²æŸ“å†…å®¹çš„çŸ­æš‚é—´éš™ï¼Œå±å¹•ä¼šå‡ºç°èƒŒæ™¯è‰²æˆ–é»‘è‰²ï¼Œé€ æˆè§†è§‰é—ªçƒã€‚&lt;/li&gt;
&lt;li&gt;å¡é¡¿: å¦‚æœå¸ƒå±€è®¡ç®—å’Œè§†å›¾é‡ç»˜çš„è€—æ—¶è¶…è¿‡äº†Androidç³»ç»Ÿçš„ä¸€å¸§æ¸²æŸ“æ—¶é—´ï¼ˆçº¦16.6msï¼‰ï¼Œå°±ä¼šå¯¼è‡´æ‰å¸§ï¼ŒåŠ¨ç”»çœ‹èµ·æ¥å°±ä¼šå¡é¡¿ã€ä¸è¿è´¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;æ ¸å¿ƒæ–¹æ¡ˆé€‰å‹
ä¸ºäº†å…‹æœä¸Šè¿°æŒ‘æˆ˜ï¼Œæˆ‘ä»¬é€‰æ‹©é‡‡ç”¨Androidå®˜æ–¹æ¨èçš„ã€ä¸“ä¸ºå¤æ‚UIåŠ¨ç”»è®¾è®¡çš„ç°ä»£æŠ€æœ¯æ ˆï¼šMotionLayout + TextureViewã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;MotionLayoutï¼šä½œä¸ºConstraintLayoutçš„å­ç±»ï¼Œå®ƒä¸“ä¸ºåŠ¨ç”»è€Œç”Ÿã€‚å®ƒå…è®¸æˆ‘ä»¬ä»¥å£°æ˜å¼çš„æ–¹å¼åœ¨XMLä¸­å®šä¹‰å¤šä¸ªå¸ƒå±€çŠ¶æ€ï¼Œå¹¶ç”±ç³»ç»Ÿåœ¨åº•å±‚é«˜æ•ˆåœ°è®¡ç®—å’Œæ‰§è¡ŒçŠ¶æ€ä¹‹é—´çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œæ€§èƒ½æé«˜ä¸”èƒ½è½»æ¾å¤„ç†å¤šè§†å›¾è”åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;TextureViewï¼šé«˜å¾·SDKé»˜è®¤å¯èƒ½ä½¿ç”¨SurfaceViewæ¸²æŸ“ï¼Œå®ƒæ‹¥æœ‰ç‹¬ç«‹çš„ç»˜å›¾è¡¨é¢ï¼Œä¼šâ€œæ‰“ç©¿â€åº”ç”¨çª—å£ï¼Œä¸Androidçš„å¸¸è§„è§†å›¾åŠ¨ç”»ä½“ç³»ä¸å…¼å®¹ï¼Œæ˜¯é—ªçƒçš„ä¸»è¦æ ¹æºã€‚é€šè¿‡AMapOptionså¼ºåˆ¶SDKä½¿ç”¨TextureViewï¼Œåœ°å›¾å†…å®¹å°†è¢«æ¸²æŸ“åˆ°ä¸€ä¸ªæ ‡å‡†çš„å›¾å½¢çº¹ç†ä¸Šï¼Œå¯ä»¥åƒæ™®é€šViewä¸€æ ·æ— ç¼å‚ä¸åˆ°MotionLayoutçš„åŠ¨ç”»ä½“ç³»ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="è¯¦ç»†å®ç°æ–¹æ¡ˆ"&gt;è¯¦ç»†å®ç°æ–¹æ¡ˆ&lt;/h2&gt;
&lt;h3 id="å¼ºåˆ¶textureviewå¹¶åˆå§‹åŒ–sdk"&gt;å¼ºåˆ¶TextureViewå¹¶åˆå§‹åŒ–SDK&lt;/h3&gt;
&lt;p&gt;MainActivity.kt&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;MainActivity&lt;/span&gt; : AppCompatActivity() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; lateinit &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; motionLayout: MotionLayout
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; lateinit &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; mapView: TextureMapView
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; lateinit &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; mapContainer: CardView
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; lateinit &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; carModelPanel: LinearLayout
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; lateinit &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; toggleButton: FloatingActionButton
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; isFullScreen &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; override fun &lt;span style="color:#a6e22e"&gt;onCreate&lt;/span&gt;(savedInstanceState: Bundle&lt;span style="color:#f92672"&gt;?&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;super&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;onCreate&lt;/span&gt;(savedInstanceState)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// è®¾ç½®åŒ…å«MotionLayoutçš„ä¸»å¸ƒå±€æ–‡ä»¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; setContentView(R.&lt;span style="color:#a6e22e"&gt;layout&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;activity_main_split&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; supportActionBar&lt;span style="color:#f92672"&gt;?&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;hide&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; MapsInitializer.&lt;span style="color:#a6e22e"&gt;updatePrivacyAgree&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;,&lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; MapsInitializer.&lt;span style="color:#a6e22e"&gt;updatePrivacyShow&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;,&lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;,&lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// åˆå§‹åŒ–è§†å›¾&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; motionLayout &lt;span style="color:#f92672"&gt;=&lt;/span&gt; findViewById(R.&lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;motion_layout_main&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mapContainer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; findViewById(R.&lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;map_container_card&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; carModelPanel &lt;span style="color:#f92672"&gt;=&lt;/span&gt; findViewById(R.&lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;car_model_panel&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; toggleButton &lt;span style="color:#f92672"&gt;=&lt;/span&gt; findViewById(R.&lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;fab_toggle_map&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// 1. Create the options object&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; val aMapOptions &lt;span style="color:#f92672"&gt;=&lt;/span&gt; AMapOptions()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// 2. CRITICAL: Force the use of TextureView&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;//aMapOptions.useTextureView(true)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// 3. Pass the options into the MapView constructor&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mapView &lt;span style="color:#f92672"&gt;=&lt;/span&gt; TextureMapView(&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// 4. Add the MapView to its container&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; val mapContainer: CardView &lt;span style="color:#f92672"&gt;=&lt;/span&gt; findViewById(R.&lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;map_container_card&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mapContainer.&lt;span style="color:#a6e22e"&gt;addView&lt;/span&gt;(mapView)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// 5. Forward the lifecycle event&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mapView.&lt;span style="color:#a6e22e"&gt;onCreate&lt;/span&gt;(savedInstanceState)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// --- æ§åˆ¶åŠ¨ç”»çš„æ ¸å¿ƒé€»è¾‘ ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; toggleButton.&lt;span style="color:#a6e22e"&gt;setOnClickListener&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (isFullScreen) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å¦‚æœå½“å‰æ˜¯å…¨å±ï¼Œåˆ™è¿‡æ¸¡åˆ°åˆ†å±çŠ¶æ€&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; motionLayout.&lt;span style="color:#a6e22e"&gt;transitionToEnd&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; } &lt;span style="color:#66d9ef"&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å¦‚æœå½“å‰æ˜¯åˆ†å±ï¼Œåˆ™è¿‡æ¸¡å›å…¨å±çŠ¶æ€&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; motionLayout.&lt;span style="color:#a6e22e"&gt;transitionToStart&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; isFullScreen &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#f92672"&gt;!&lt;/span&gt;isFullScreen
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// --- ä¸¥æ ¼ç®¡ç†é«˜å¾·SDKçš„ç”Ÿå‘½å‘¨æœŸ ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// è¿™æ˜¯ç¡®ä¿åœ°å›¾æ­£å¸¸æ˜¾ç¤ºã€é¿å…å†…å­˜æ³„æ¼çš„å¿…è¦æ­¥éª¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; override fun &lt;span style="color:#a6e22e"&gt;onResume&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;super&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;onResume&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mapView.&lt;span style="color:#a6e22e"&gt;onResume&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; override fun &lt;span style="color:#a6e22e"&gt;onPause&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;super&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;onPause&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mapView.&lt;span style="color:#a6e22e"&gt;onPause&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; override fun &lt;span style="color:#a6e22e"&gt;onDestroy&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;super&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;onDestroy&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mapView.&lt;span style="color:#a6e22e"&gt;onDestroy&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; override fun &lt;span style="color:#a6e22e"&gt;onSaveInstanceState&lt;/span&gt;(outState: Bundle) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;super&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;onSaveInstanceState&lt;/span&gt;(outState)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mapView.&lt;span style="color:#a6e22e"&gt;onSaveInstanceState&lt;/span&gt;(outState)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="å¸ƒå±€å®ç°-motionlayout"&gt;å¸ƒå±€å®ç° (MotionLayout)&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä½¿ç”¨MotionLayoutä½œä¸ºæ ¹å¸ƒå±€ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½åŒºï¼šè½¦æ¨¡é¢æ¿å’Œåœ°å›¾å®¹å™¨ã€‚&lt;/p&gt;</description></item><item><title>é«˜é€š Gunyah Virtio-blkå®ç°æœºåˆ¶</title><link>https://ethen-cao.github.io/ethenslab/gunyah/gunyah-virtio-blk/</link><pubDate>Mon, 04 Aug 2025 09:49:58 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/gunyah/gunyah-virtio-blk/</guid><description>&lt;h4 id="1-æ¦‚è¿°"&gt;1. æ¦‚è¿°&lt;/h4&gt;
&lt;p&gt;æœ¬å›¾å±•ç¤ºäº†åœ¨ Android è™šæ‹ŸåŒ–åœºæ™¯ä¸‹ï¼ŒGuest OSï¼ˆAndroid è™šæ‹Ÿæœºï¼‰å¦‚ä½•é€šè¿‡ &lt;strong&gt;Virtio-blk&lt;/strong&gt; åè®®é«˜æ•ˆåœ°è®¿é—® Host ä¾§çš„ç‰©ç†å­˜å‚¨è®¾å¤‡ã€‚è¯¥æ¶æ„é‡‡ç”¨ &lt;strong&gt;Userspace Backend&lt;/strong&gt; æ¨¡å¼ï¼Œå³è™šæ‹Ÿç£ç›˜çš„åç«¯å¤„ç†é€»è¾‘é›†æˆåœ¨ VMMï¼ˆæ­¤å¤„ä¸º &lt;code&gt;qcrosvm&lt;/code&gt;ï¼‰çš„ç”¨æˆ·æ€è¿›ç¨‹ä¸­ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme plain
skinparam componentStyle rectangle
skinparam shadowing false
top to bottom direction
legend right
&amp;lt;color:#1F77B4&amp;gt;â”â” Shared Memory / Data Planeï¼ˆå…±äº«å†…å­˜ï¼Œéæ•°æ®æµï¼‰&amp;lt;/color&amp;gt;
&amp;lt;color:#FF7F0E&amp;gt;â”â” Control Planeï¼ˆkick / irq / çŠ¶æ€æ¨è¿›ï¼‰&amp;lt;/color&amp;gt;
endlegend
&amp;#39; =======================
&amp;#39; Guest
&amp;#39; =======================
frame &amp;#34;Android Guest (VM)&amp;#34; as G #E3F2FD {
component &amp;#34;Android App&amp;#34; as App
component &amp;#34;VFS / FS&amp;#34; as FS
component &amp;#34;Block Layer&amp;#34; as BL
component &amp;#34;virtio-blk\n(frontend driver)&amp;#34; as FE
App --&amp;gt; FS
FS --&amp;gt; BL
BL --&amp;gt; FE : submit block request
}
&amp;#39; =======================
&amp;#39; Shared Memory (Guest-owned, Host-mapped)
&amp;#39; =======================
frame &amp;#34;Guest RAM (Shared Memory)&amp;#34; as RAM #ECEFF1 {
component &amp;#34;Virtqueue\n- Descriptor Table\n- Avail Ring\n- Used Ring&amp;#34; as VQ
component &amp;#34;Guest Data Buffers\n(Block I/O payload)&amp;#34; as BUF
}
&amp;#39; =======================
&amp;#39; Host
&amp;#39; =======================
frame &amp;#34;Linux Host&amp;#34; as H #E8F5E9 {
frame &amp;#34;User Space&amp;#34; as USER {
component &amp;#34;qcrosvm\n(VMM + virtio-blk backend)&amp;#34; as BE
}
frame &amp;#34;Linux Kernel&amp;#34; as KERNEL {
component &amp;#34;Host Block Layer / FS&amp;#34; as HBLK
}
}
&amp;#39; =======================
&amp;#39; Hardware
&amp;#39; =======================
frame &amp;#34;Hardware&amp;#34; as HW {
component &amp;#34;Physical Block Device\n(eMMC / UFS / NVMe)&amp;#34; as DISK
}
&amp;#39; =======================
&amp;#39; Hypervisor (mechanism only)
&amp;#39; =======================
rectangle &amp;#34;Gunyah Hypervisor\n(Memory Mapping, eventfd, irqfd)&amp;#34; as HV #F5F5F5
&amp;#39; =======================
&amp;#39; Data Plane (shared memory access, NOT data flow)
&amp;#39; =======================
FE ..[#1F77B4]..&amp;gt; VQ : access
FE ..[#1F77B4]..&amp;gt; BUF : access
BE ..[#1F77B4]..&amp;gt; VQ : access
BE ..[#1F77B4]..&amp;gt; BUF : access
&amp;#39; =======================
&amp;#39; Control Plane
&amp;#39; =======================
FE -[#FF7F0E]-&amp;gt; HV : QueueNotify (kick)
HV -[#FF7F0E]-&amp;gt; BE : eventfd wakeup
BE -[#FF7F0E]-&amp;gt; HV : inject IRQ (irqfd)
HV -[#FF7F0E]-&amp;gt; FE : virtual interrupt
&amp;#39; =======================
&amp;#39; Backend I/O Path
&amp;#39; =======================
BE --&amp;gt; HBLK : read / write
HBLK --&amp;gt; DISK
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-æ ¸å¿ƒç»„ä»¶ä¸è§’è‰²"&gt;2. æ ¸å¿ƒç»„ä»¶ä¸è§’è‰²&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Guest (Android VM):&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>é«˜é€š Gunyah è™šæ‹ŸåŒ–å¹³å°è®¾å¤‡æ ‘ (Device Tree) å…¨è§£ï¼šä»æºç åˆ° Boot Image</title><link>https://ethen-cao.github.io/ethenslab/gunyah/gunyah_devicetree/</link><pubDate>Mon, 04 Aug 2025 09:49:58 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/gunyah/gunyah_devicetree/</guid><description>&lt;p&gt;åœ¨åŸºäº Gunyah Hypervisor çš„é«˜é€šæ±½è½¦å¹³å°ï¼ˆå¦‚ SA8797Pï¼‰ä¸­ï¼Œè®¾å¤‡æ ‘ï¼ˆDevice Treeï¼‰æ‰®æ¼”ç€åŒé‡è§’è‰²ï¼šå®ƒä¸ä»…æè¿°äº† Linux Host çš„ç‰©ç†ç¡¬ä»¶ï¼Œè¿˜å……å½“äº† Hypervisor çš„â€œèµ„æºæˆæƒåˆçº¦â€ï¼Œå®šä¹‰äº†è™šæ‹Ÿæœºï¼ˆVMï¼‰å¯ä»¥è®¿é—®å“ªäº›å†…å­˜å’Œè™šæ‹Ÿè®¾å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å°†æ·±å…¥è§£æå…¶æ–‡ä»¶ç»“æ„ã€ç¼–è¯‘é…ç½®ã€æ„å»ºæµç¨‹ä»¥åŠæ‰“åŒ…æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id="1-æºç ç»“æ„ä¸æ–‡ä»¶è·¯å¾„"&gt;1. æºç ç»“æ„ä¸æ–‡ä»¶è·¯å¾„&lt;/h2&gt;
&lt;p&gt;åœ¨ Yocto é¡¹ç›®ä¸­ï¼Œè®¾å¤‡æ ‘æºç é€šå¸¸ç‹¬ç«‹äºå†…æ ¸æºç ç®¡ç†ï¼Œä½äº &lt;code&gt;vendor/qcom/opensource/base-devicetree&lt;/code&gt; ç›®å½•ä¸‹ã€‚&lt;/p&gt;
&lt;h3 id="å…³é”®æ–‡ä»¶ç±»å‹ä¸è·¯å¾„"&gt;å…³é”®æ–‡ä»¶ç±»å‹ä¸è·¯å¾„&lt;/h3&gt;
&lt;p&gt;æ‰€æœ‰æ ¸å¿ƒæ–‡ä»¶ä½äº &lt;code&gt;arch/arm64/boot/dts/qcom/&lt;/code&gt; ç›®å½•ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SoC åŸºç¡€å®šä¹‰ (&lt;code&gt;.dtsi&lt;/code&gt;)&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sa8797p.dtsi&lt;/code&gt;&lt;/strong&gt;: å®šä¹‰äº†èŠ¯ç‰‡çº§çš„ç¡¬ä»¶ï¼Œå¦‚ CPUã€ä¸­æ–­æ§åˆ¶å™¨ (GIC)ã€æ€»çº¿ã€æ—¶é’Ÿç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sa8x97p.dtsi&lt;/code&gt;&lt;/strong&gt;: ç³»åˆ—é€šç”¨çš„å®šä¹‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è™šæ‹Ÿæœºèµ„æºå®šä¹‰ (&amp;ldquo;The Contract&amp;rdquo;)&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sa8797p-vms.dtsi&lt;/code&gt;&lt;/strong&gt;: &lt;strong&gt;è¿™æ˜¯é…ç½®è™šæ‹Ÿè®¾å¤‡çš„æ ¸å¿ƒæ–‡ä»¶&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒå®šä¹‰äº† &lt;code&gt;auto_vm&lt;/code&gt; (Android Guest) çš„èµ„æºï¼ŒåŒ…æ‹¬ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;reserved-memory&lt;/code&gt;&lt;/strong&gt;: ä¸º Virtio ç¯å½¢ç¼“å†²åŒºï¼ˆRing Buffersï¼‰é¢„ç•™çš„ç‰©ç†å†…å­˜ï¼ˆå¸¦æœ‰ &lt;code&gt;gunyah-label&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;virtio-backends&lt;/code&gt;&lt;/strong&gt;: å®šä¹‰ Host å†…æ ¸å¯è§çš„åç«¯é€»è¾‘è®¾å¤‡ï¼ˆå¸¦æœ‰ &lt;code&gt;qcom,label&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;gh-secure-vm-loader&lt;/code&gt;&lt;/strong&gt;: å°†ä¸Šè¿°èµ„æºç»‘å®šåˆ°ç‰¹å®šçš„ VMIDã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¡¹ç›®çº§è¦†ç›– (Overlay) (&lt;code&gt;.dtso&lt;/code&gt;)&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sa8797p-overlay.dtso&lt;/code&gt;&lt;/strong&gt;: é€šç”¨çš„ Overlayå…¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sa8797p-voyah-common-overlay.dtso&lt;/code&gt;&lt;/strong&gt;: &lt;strong&gt;ç‰¹å®šé¡¹ç›®ï¼ˆVoyahï¼‰çš„æ‰©å±•é…ç½®&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;æœ€ä½³å®è·µ&lt;/em&gt;ï¼šå½“éœ€è¦æ·»åŠ æ–°è®¾å¤‡ï¼ˆå¦‚ &lt;code&gt;virtio-fs&lt;/code&gt;ï¼‰æ—¶ï¼Œæ¨èä¿®æ”¹æ­¤æ–‡ä»¶ï¼Œä»¥åˆ©ç”¨å…¶è¦†ç›–æœºåˆ¶ï¼Œé¿å…ç ´ååŸºç¡€å¹³å°å®šä¹‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¿çº§é¡¶å±‚å®šä¹‰ (&lt;code&gt;.dts&lt;/code&gt;)&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sa8797p-voyah-v20.dts&lt;/code&gt;&lt;/strong&gt;: é’ˆå¯¹å…·ä½“ç¡¬ä»¶æ¿å¡çš„é¡¶å±‚æè¿°æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="2-ç¼–è¯‘é…ç½®-bitbake-recipe"&gt;2. ç¼–è¯‘é…ç½® (Bitbake Recipe)&lt;/h2&gt;
&lt;p&gt;Yocto æ„å»ºç³»ç»Ÿé€šè¿‡ Recipe æ¥ç®¡ç†ç¼–è¯‘è¿‡ç¨‹ã€‚&lt;/p&gt;</description></item><item><title>DFMEA Introduction</title><link>https://ethen-cao.github.io/ethenslab/ivi-solution/dfmea/dfmea-introduction/</link><pubDate>Sun, 03 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/ivi-solution/dfmea/dfmea-introduction/</guid><description>&lt;h2 id="ä»€ä¹ˆæ˜¯dfmea"&gt;ä»€ä¹ˆæ˜¯DFMEA&lt;/h2&gt;
&lt;p&gt;DFMEA çš„å…¨ç§°æ˜¯ è®¾è®¡å¤±æ•ˆæ¨¡å¼ä¸å½±å“åˆ†æ (Design Failure Mode and Effects Analysis)ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒæ˜¯ä¸€å¥—ç³»ç»ŸåŒ–ã€ç»“æ„åŒ–çš„åˆ†æå·¥å…·ï¼Œä¸»è¦åº”ç”¨åœ¨äº§å“çš„è®¾è®¡å’Œå¼€å‘é˜¶æ®µã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯**ã€Œäº‹å‰é¢„é˜²ï¼Œè€Œéäº‹åè¡¥æ•‘ã€**ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒDFMEA å°±æ˜¯ç”±ä¸€ç¾¤è·¨èŒèƒ½çš„ä¸“å®¶å›¢é˜Ÿï¼ˆé€šå¸¸ç”±è®¾è®¡å·¥ç¨‹å¸ˆé¢†å¯¼ï¼‰ï¼Œåœ¨äº§å“è¿˜å¤„åœ¨å›¾çº¸ä¸Šæˆ–ç”µè„‘æ¨¡å‹ä¸­æ—¶ï¼Œå°±ä¸»åŠ¨å»é¢„æµ‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¤±æ•ˆæ¨¡å¼ (Failure Mode - FM): è¿™ä¸ªè®¾è®¡æœªæ¥å¯èƒ½ä¼šåœ¨å“ªäº›åœ°æ–¹å‡ºé—®é¢˜ï¼Ÿå®ƒå¦‚ä½•å¤±æ•ˆï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤±æ•ˆå½±å“ (Failure Effect - FE): å¦‚æœçœŸçš„å‡ºé—®é¢˜äº†ï¼Œä¼šå¯¹é¡¾å®¢ã€ç³»ç»Ÿæˆ–æ³•è§„é€ æˆä»€ä¹ˆä¸å¥½çš„åæœï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤±æ•ˆåŸå›  (Failure Cause - FC): ç©¶ç«Ÿæ˜¯ä»€ä¹ˆåŸå› ä¼šå¯¼è‡´è¿™äº›é—®é¢˜å‘ç”Ÿï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨æ‰¾å‡ºè¿™äº›æ½œåœ¨é£é™©åï¼Œå›¢é˜Ÿä¼šè¯„ä¼°å…¶ä¸¥é‡ç¨‹åº¦ï¼Œå¹¶é‡‡å–æ”¹è¿›è¡ŒåŠ¨ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆé™¤æˆ–é™ä½è¿™äº›è®¾è®¡ç¼ºé™·ï¼Œä»¥ç¡®ä¿æœ€ç»ˆäº§å“çš„è´¨é‡ã€å¯é æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;h2 id="dfmea-çš„ç›®çš„ä¸å¥½å¤„"&gt;DFMEA çš„ç›®çš„ä¸å¥½å¤„&lt;/h2&gt;
&lt;p&gt;å®æ–½DFMEAçš„ä¸»è¦ç›®çš„å’Œå¥½å¤„åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æé«˜äº§å“è´¨é‡ä¸å¯é æ€§ï¼š åœ¨è®¾è®¡é˜¶æ®µå°±è¯†åˆ«å¹¶æ¶ˆé™¤æ½œåœ¨çš„ç¼ºé™·ï¼Œä»è€Œå‡å°‘äº§å“ä¸Šå¸‚åå‘ç”Ÿæ•…éšœçš„æœºç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é™ä½å¼€å‘æˆæœ¬ä¸é£é™©ï¼š åœ¨å¼€å‘æ—©æœŸä¿®æ­£è®¾è®¡é”™è¯¯çš„æˆæœ¬ï¼Œè¿œä½äºäº§å“æŠ•äº§åç”šè‡³äº¤ä»˜å®¢æˆ·åè¿›è¡Œä¿®æ”¹ã€å¬å›çš„æˆæœ¬ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼©çŸ­å¼€å‘å‘¨æœŸï¼š å‡å°‘åæœŸçš„è®¾è®¡å˜æ›´å’Œåå¤è¯•éªŒï¼Œå¯ä»¥æ›´é¡ºç•…åœ°æ¨è¿›å¼€å‘æµç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æå‡å®¢æˆ·æ»¡æ„åº¦ï¼š æä¾›æ›´å¯é ã€æ›´å®‰å…¨çš„äº§å“ï¼Œç›´æ¥æå‡å“ç‰Œå£°èª‰å’Œå®¢æˆ·æ»¡æ„åº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å»ºç«‹çŸ¥è¯†åº“ï¼š DFMEAçš„åˆ†æè¿‡ç¨‹å’Œç»“æœä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œæˆä¸ºå…¬å¸å®è´µçš„çŸ¥è¯†èµ„äº§ï¼Œä¸ºæœªæ¥æ–°äº§å“çš„å¼€å‘æä¾›å‚è€ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="dfmea-çš„æ ¸å¿ƒåˆ†ææµç¨‹"&gt;DFMEA çš„æ ¸å¿ƒåˆ†ææµç¨‹&lt;/h2&gt;
&lt;p&gt;æ ¹æ®æœ€æ–°çš„AIAG &amp;amp; VDA FMEAæ ‡å‡†ï¼ŒDFMEAé€šå¸¸éµå¾ªä¸€ä¸ªç³»ç»ŸåŒ–çš„â€œä¸ƒæ­¥æ³•â€æµç¨‹ï¼š&lt;/p&gt;
&lt;h3 id="ç¬¬ä¸€æ­¥è§„åˆ’ä¸å‡†å¤‡-planning-and-preparation"&gt;ç¬¬ä¸€æ­¥ï¼šè§„åˆ’ä¸å‡†å¤‡ (Planning and Preparation)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®šä¹‰èŒƒå›´ï¼š æ˜ç¡®è¦åˆ†æçš„æ˜¯æ•´ä¸ªç³»ç»Ÿã€æŸä¸ªå­ç³»ç»Ÿï¼Œè¿˜æ˜¯ä¸€ä¸ªé›¶ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;æˆç«‹å›¢é˜Ÿï¼š ç»„å»ºä¸€ä¸ªè·¨èŒèƒ½å›¢é˜Ÿï¼Œæˆå‘˜åº”åŒ…å«è®¾è®¡ã€åˆ¶é€ ã€å“è´¨ã€æµ‹è¯•ç­‰é¢†åŸŸçš„ä¸“å®¶ã€‚&lt;/li&gt;
&lt;li&gt;ç¡®å®šåˆ†æå·¥å…·ä¸æ–¹æ³•ï¼š è§„åˆ’æ•´ä¸ªDFMEAæ´»åŠ¨çš„æ—¶é—´è¡¨å’Œæ‰€éœ€èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;DFMEAç¬¬ä¸€æ­¥ï¼Œå³è§„åˆ’ä¸å‡†å¤‡ (Planning and Preparation)ï¼Œå…¶ç›®çš„æ˜¯ä¸ºæ•´ä¸ªFMEAæ´»åŠ¨è®¾å®šæ¸…æ™°çš„èŒƒå›´ã€ç›®æ ‡å’Œè®¡åˆ’ã€‚è¦åšå¥½è¿™ä¸€æ­¥ï¼Œå›¢é˜Ÿéœ€è¦æ”¶é›†å¹¶å®¡æŸ¥ä¸€ç³»åˆ—å…³é”®çš„è¾“å…¥èµ„æ–™ã€‚
å¯ä»¥å°†è¿™äº›è¾“å…¥èµ„æ–™çœ‹ä½œæ˜¯å¼€å¯ä¸€æ¬¡æˆåŠŸFMEAåˆ†æçš„â€œåŸææ–™â€ã€‚å®ƒä»¬ä¸»è¦å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ å¤§ç±»ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;éœ€æ±‚ä¸è§„æ ¼ç±»æ–‡æ¡£
è¿™æ˜¯æœ€æ ¸å¿ƒçš„è¾“å…¥ï¼Œå®ƒå®šä¹‰äº†è®¾è®¡çš„ç›®æ ‡å’Œçº¦æŸã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åˆ©ç›Šç›¸å…³è€…éœ€æ±‚è§„æ ¼ä¹¦ (STKRS / L1éœ€æ±‚):å³åœ¨ SYS.1 é˜¶æ®µçš„è¾“å‡ºã€‚åŒ…å«äº†å®¢æˆ·çš„åŸå§‹æœŸæœ›ã€ç”¨æˆ·åœºæ™¯ã€ä¸šåŠ¡ç›®æ ‡ç­‰ã€‚å®ƒå›ç­”äº†â€œå®¢æˆ·æƒ³è¦ä»€ä¹ˆï¼Ÿâ€ã€‚&lt;/p&gt;</description></item><item><title>Gradle Asm Bytecode Transformation Plugin Principles Explained</title><link>https://ethen-cao.github.io/ethenslab/explore-ai/gradle-asm-bytecode-transformation-plugin-principles-explained/</link><pubDate>Sun, 03 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/gradle-asm-bytecode-transformation-plugin-principles-explained/</guid><description>&lt;h1 id="gradle-asm-å­—èŠ‚ç è½¬æ¢æ’ä»¶åŸç†è§£æ"&gt;Gradle ASM å­—èŠ‚ç è½¬æ¢æ’ä»¶åŸç†è§£æ&lt;/h1&gt;
&lt;h2 id="å¼•è¨€é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"&gt;å¼•è¨€ï¼šé—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;é—®é¢˜ï¼šåœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨ä¸€äº›åœ¨é«˜ç‰ˆæœ¬ API ä¸­æ‰å‡ºç°çš„æ–°æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œjava.io.InputStream.readAllBytes() æ–¹æ³•æ˜¯åœ¨ Java 9 ä¸­å¼•å…¥çš„ï¼Œå¯¹åº”åˆ° Android å¹³å°åˆ™æ˜¯åœ¨ API Level 33 (Android 13) ä¸­æ‰å¯ç”¨ã€‚å½“ä¸€ä¸ªåº”ç”¨è®¾ç½®çš„ minSdk ä½äº 33 æ—¶ï¼Œå¦‚æœåœ¨ä»£ç ä¸­ç›´æ¥è°ƒç”¨æ­¤æ–¹æ³•ï¼Œåº”ç”¨åœ¨ä½ç‰ˆæœ¬ Android è®¾å¤‡ä¸Šè¿è¡Œæ—¶ä¼šå› ä¸ºæ‰¾ä¸åˆ°è¯¥æ–¹æ³•è€ŒæŠ›å‡º NoSuchMethodError å¼‚å¸¸ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼šä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œåœ¨åº”ç”¨æ‰“åŒ…ä¹‹å‰ï¼Œè‡ªåŠ¨å°†è¿™äº›æ–° API çš„è°ƒç”¨æ›¿æ¢ä¸ºæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ã€èƒ½åœ¨æ‰€æœ‰ç‰ˆæœ¬ä¸Šè¿è¡Œçš„å…¼å®¹æ€§ä»£ç ã€‚è¿™ä¸ªè¿‡ç¨‹é€šå¸¸è¢«ç§°ä¸ºâ€œAPI è„±ç³– (API Desugaring)â€ã€‚è™½ç„¶ Android çš„æ„å»ºå·¥å…·é“¾å†…ç½®äº†éƒ¨åˆ†è„±ç³–åŠŸèƒ½ï¼Œä½†å®ƒå¹¶ä¸æ¶µç›–æ‰€æœ‰æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é‡‡ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ Gradle æ’ä»¶ï¼Œå®ƒåˆ©ç”¨ Android Gradle æ’ä»¶ (AGP) æä¾›çš„è½¬æ¢ API å’Œ ASM å­—èŠ‚ç æ“ä½œæ¡†æ¶ï¼Œåœ¨ç¼–è¯‘æœŸç›´æ¥ä¿®æ”¹ç”Ÿæˆçš„ .class æ–‡ä»¶ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³ API çš„å…¼å®¹æ€§é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="æ ¸å¿ƒæ¦‚å¿µ"&gt;æ ¸å¿ƒæ¦‚å¿µ&lt;/h2&gt;
&lt;p&gt;è¦ç†è§£è¿™ä¸ªæ’ä»¶ï¼Œé¦–å…ˆéœ€è¦äº†è§£å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Java å­—èŠ‚ç  (.class æ–‡ä»¶)ï¼šJava ç¼–è¯‘å™¨ (javac) å¹¶ä¸ç›´æ¥ç”Ÿæˆæœºå™¨ç ï¼Œè€Œæ˜¯å°† .java æºä»£ç ç¼–è¯‘æˆä¸€ç§å¹³å°æ— å…³çš„ä¸­é—´æŒ‡ä»¤é›†ï¼Œå³ Java å­—èŠ‚ç ï¼Œå¹¶ä¿å­˜åœ¨ .class æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Android è¿è¡Œæ—¶ (ART)ï¼šAndroid è®¾å¤‡ä¸ç›´æ¥è¿è¡Œ Java å­—èŠ‚ç ï¼Œè€Œæ˜¯è¿è¡Œç»è¿‡ä¼˜åŒ–çš„ DEX (Dalvik Executable) æ ¼å¼çš„å­—èŠ‚ç ã€‚åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªåä¸º D8 çš„å·¥å…·ä¼šå°†æ‰€æœ‰çš„ .class æ–‡ä»¶å’Œä¾èµ–åº“è½¬æ¢å¹¶åˆå¹¶æˆä¸€ä¸ªæˆ–å¤šä¸ª classes.dex æ–‡ä»¶ã€‚&lt;/p&gt;</description></item><item><title>OEM å¤šå“ç‰Œå¤šç”¨æˆ·åŠ¨æ€ä¸»é¢˜å¼•æ“ â€” è½¯ä»¶æ¶æ„è®¾è®¡æ–‡æ¡£</title><link>https://ethen-cao.github.io/ethenslab/explore-ai/oem-dynamic-theme-engine-sw-architecture-design-doc/</link><pubDate>Sun, 03 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/oem-dynamic-theme-engine-sw-architecture-design-doc/</guid><description>&lt;h1 id="ç‰ˆæœ¬å†å²"&gt;ç‰ˆæœ¬å†å²&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;ç‰ˆæœ¬&lt;/strong&gt;ï¼š1.0
&lt;strong&gt;æ—¥æœŸ&lt;/strong&gt;ï¼š2025-08-08
&lt;strong&gt;ä½œè€…&lt;/strong&gt;ï¼šAssistant (åŸºäºæ‚¨æä¾›çš„éœ€æ±‚ä¸è®¾è®¡ç¨¿)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç›®æ ‡ï¼šåŸºäºæ‚¨ç»™å®šçš„ 14 é¡¹æ ¸å¿ƒéœ€æ±‚ï¼Œæä¾›ä¸€ä»½å¯æ‰§è¡Œçš„è½¯ä»¶æ¶æ„è®¾è®¡ï¼ŒåŒ…å«æ¶æ„å†³ç­–ã€æ¨¡å—åˆ’åˆ†ã€æ¥å£å®šä¹‰ã€æ•°æ®æ¨¡å‹ã€éƒ¨ç½²/å®‰å…¨/æ€§èƒ½è¦ç‚¹ã€æ›¿ä»£æ–¹æ¡ˆæ¯”è¾ƒä¸é£é™©ç¼“è§£æªæ–½ã€‚æœ¬æ–‡æ¡£å‡å®šç›®æ ‡è®¾å¤‡ä¸ºé‡äº§ Android è®¾å¤‡ï¼ˆä¸å¯è·å– platform ç§é’¥ï¼‰ï¼Œæ”¯æŒå¤šå“ç‰Œã€å¤šç”¨æˆ·ã€ä¸»é¢˜å•†åº—ã€äº‘åŒæ­¥ã€ä¸ªæ€§åŒ–å¾®è°ƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h1 id="ç›®å½•"&gt;ç›®å½•&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;æ¦‚è¿°&lt;/li&gt;
&lt;li&gt;éœ€æ±‚æ˜ å°„ï¼ˆä¸ä¼˜å…ˆçº§ï¼‰&lt;/li&gt;
&lt;li&gt;æ€»ä½“æ¶æ„ï¼ˆä¸¤å¥—å¯é€‰éƒ¨ç½²ï¼šA. framework TMSï¼›B. App-integrated TMSï¼‰&lt;/li&gt;
&lt;li&gt;ç»„ä»¶è®¾è®¡ä¸èŒè´£&lt;/li&gt;
&lt;li&gt;ä¸»é¢˜åŒ…è§„èŒƒä¸å®‰è£…æµç¨‹ï¼ˆmanifestã€æ ¡éªŒã€ç­¾åï¼‰&lt;/li&gt;
&lt;li&gt;ä¸ªæ€§åŒ–å®šåˆ¶å®ç°ï¼ˆæ¨èæ–¹æ¡ˆï¼‰&lt;/li&gt;
&lt;li&gt;AIDL / API è®¾è®¡ï¼ˆsystem_server æ–¹æ¡ˆï¼‰ä¸ App APIï¼ˆApp-integrated æ–¹æ¡ˆï¼‰&lt;/li&gt;
&lt;li&gt;æ•°æ®æ¨¡å‹ï¼ˆThemeDBï¼‰ä¸åŒæ­¥ç­–ç•¥&lt;/li&gt;
&lt;li&gt;å®‰å…¨ä¸æƒé™æ–¹æ¡ˆ&lt;/li&gt;
&lt;li&gt;æ€§èƒ½ä¼˜åŒ–è¦ç‚¹ä¸è¿›ç¨‹/åˆ·æ–°ç­–ç•¥&lt;/li&gt;
&lt;li&gt;æµ‹è¯•è®¡åˆ’ä¸ä¸Šçº¿éªŒè¯è¦ç‚¹&lt;/li&gt;
&lt;li&gt;æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”ä¸å†³ç­–ç†ç”±ï¼ˆå«â€œåŠ¨æ€ç”Ÿæˆ RRO APKâ€ç»“è®ºï¼‰&lt;/li&gt;
&lt;li&gt;é£é™©æ¸…å•ä¸ç¼“è§£æªæ–½&lt;/li&gt;
&lt;li&gt;è¿­ä»£è·¯çº¿å›¾ï¼ˆçŸ­ä¸­é•¿æœŸå»ºè®®ï¼‰
é™„å½•ï¼šPlantUML ç¤ºä¾‹ï¼ˆå®‰è£…/åº”ç”¨åºåˆ—ï¼‰ä¸ç¤ºä¾‹ AIDLã€è¡¨ç»“æ„&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id="1-æ¦‚è¿°"&gt;1. æ¦‚è¿°&lt;/h1&gt;
&lt;p&gt;æœ¬æ¶æ„æ—¨åœ¨å®ç°ä¸€ä¸ªä¼ä¸šçº§ã€å¯æ‰©å±•çš„ä¸»é¢˜å¼•æ“ï¼Œæ»¡è¶³ OEM çš„å¤šå“ç‰Œé¢„ç½®éœ€æ±‚ã€è¿è¡Œæ—¶ä¸»é¢˜åˆ‡æ¢ã€ä¸ªæ€§åŒ–å¾®è°ƒã€äº‘ç«¯åŒæ­¥ä¸å¤šç”¨æˆ·éš”ç¦»ã€‚è®¾è®¡åŸåˆ™ï¼š&lt;strong&gt;å®‰å…¨ä¼˜å…ˆ â†’ ç¨³å®šæ€§ â†’ å¯ç»´æŠ¤æ€§ â†’ å…¼é¡¾è¿­ä»£é€Ÿåº¦&lt;/strong&gt;ã€‚åœ¨å…³é”®ç‚¹ï¼ˆTMS æ”¾ç½®ã€ä¸ªæ€§åŒ–å¦‚ä½•å®ç°ï¼‰æä¾›ä¸¤æ¡å¯é€‰è·¯å¾„å¹¶ç»™å‡ºæ¨èã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="2-éœ€æ±‚æ˜ å°„ä¼˜å…ˆçº§"&gt;2. éœ€æ±‚æ˜ å°„ï¼ˆä¼˜å…ˆçº§ï¼‰&lt;/h1&gt;
&lt;p&gt;å°†åŸå§‹ 14 é¡¹éœ€æ±‚æŒ‰ä¼˜å…ˆçº§åˆ†ä¸ºå¿…éœ€/å¼ºçƒˆæœŸæœ›/å¯é€‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¿…éœ€ï¼ˆMï¼‰&lt;/strong&gt;ï¼šå¤šå“ç‰Œé¢„è®¾ï¼ˆ1ï¼‰ï¼ŒåŠ¨æ€ä¸»é¢˜åˆ‡æ¢ï¼ˆ2ï¼‰ï¼Œå…¨å±€æ·±åº¦ç¾åŒ–ï¼ˆ3ï¼‰ï¼Œå¤šç”¨æˆ·éš”ç¦»ï¼ˆ4ï¼‰ï¼Œå®‰å…¨ä¸æƒé™æ§åˆ¶ï¼ˆ8ï¼‰ï¼Œå…¼å®¹æ€§æ£€æµ‹ä¸æ¢å¤é»˜è®¤ï¼ˆ12/14ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼ºçƒˆæœŸæœ›ï¼ˆHï¼‰&lt;/strong&gt;ï¼šç‰ˆæœ¬ç®¡ç†ï¼ˆ5ï¼‰ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼ˆ7ï¼‰ï¼Œä¸»é¢˜é¢„è§ˆï¼ˆ11ï¼‰ï¼Œä¸»é¢˜åŒ…è§„èŒƒï¼ˆ6ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯é€‰/å¢å¼ºï¼ˆLï¼‰&lt;/strong&gt;ï¼šä¸ªæ€§åŒ–å®šåˆ¶ï¼ˆ9ï¼‰ï¼Œè·¨è®¾å¤‡åŒæ­¥ï¼ˆ10ï¼‰ï¼Œå¤šè¯­è¨€ï¼ˆ13ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¶æ„è®¾è®¡å°†ä¼˜å…ˆä¿è¯ M/H çº§éœ€æ±‚å®ç°ï¼Œå¹¶å¯¹ L çº§ç»™å‡ºå®ç”¨å¯è½åœ°æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="3-æ€»ä½“æ¶æ„ä¸¤ç§éƒ¨ç½²é€‰å‹"&gt;3. æ€»ä½“æ¶æ„ï¼ˆä¸¤ç§éƒ¨ç½²é€‰å‹ï¼‰&lt;/h1&gt;
&lt;h2 id="æ¦‚è§ˆ"&gt;æ¦‚è§ˆ&lt;/h2&gt;
&lt;p&gt;ä¸»è¦å‚ä¸æ–¹ï¼š&lt;strong&gt;ä¸»é¢˜å•†åº— App (StoreApp)&lt;/strong&gt;ã€&lt;strong&gt;ThemeManagerService (TMS)&lt;/strong&gt;ã€&lt;strong&gt;OverlayManagerService (OMS)&lt;/strong&gt;ã€&lt;strong&gt;PackageManagerService (PMS)&lt;/strong&gt;ã€&lt;strong&gt;AssetManager&lt;/strong&gt;ã€&lt;strong&gt;ThemeDB&lt;/strong&gt; ä¸ &lt;strong&gt;OEM äº‘æœåŠ¡&lt;/strong&gt;ï¼ˆServer / AccountServerï¼‰ã€‚&lt;/p&gt;</description></item><item><title>QNX ScreenåŸºç¡€åŸç†ä¸æµç¨‹</title><link>https://ethen-cao.github.io/ethenslab/qnx/qnx-screen/</link><pubDate>Sun, 03 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/qnx/qnx-screen/</guid><description>&lt;h2 id="qnxå›¾å½¢æ ˆ"&gt;QNXå›¾å½¢æ ˆ&lt;/h2&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/qnx-screen-overview.png" alt="screen_post_window" /&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ª QNX åº”ç”¨ç¨‹åºä»æ— åˆ°æœ‰ï¼Œå®Œæˆä¸€å¸§ (frame) çª—å£æ¸²æŸ“å¹¶æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„å®Œæ•´è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæ ¸å¿ƒé˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡†å¤‡ä¸æ¸²æŸ“é˜¶æ®µ&lt;/strong&gt;ï¼šåº”ç”¨ç¨‹åºè·å–ç»˜å›¾ç©ºé—´ (Buffer)ï¼Œå¹¶ä½¿ç”¨ GPU å°†å†…å®¹ç»˜åˆ¶åˆ°è¿™ä¸ªç©ºé—´ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æäº¤ä¸æ˜¾ç¤ºé˜¶æ®µ&lt;/strong&gt;ï¼šåº”ç”¨ç¨‹åºé€šçŸ¥ç³»ç»Ÿç»˜åˆ¶å®Œæˆï¼Œç”±ç³»ç»Ÿå’Œç¡¬ä»¶æ¥æ‰‹ï¼Œå°†å†…å®¹å‘ˆç°åœ¨å±å¹•ä¸Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ç¬¬ä¸€é˜¶æ®µå‡†å¤‡ä¸æ¸²æŸ“-steps-1-6"&gt;ç¬¬ä¸€é˜¶æ®µï¼šå‡†å¤‡ä¸æ¸²æŸ“ (Steps 1-6)&lt;/h3&gt;
&lt;h4 id="æ­¥éª¤-1--2è¯·æ±‚å¹¶è·å–çª—å£ç¼“å†²åŒº-buffer"&gt;&lt;strong&gt;æ­¥éª¤ 1 &amp;amp; 2ï¼šè¯·æ±‚å¹¶è·å–çª—å£ç¼“å†²åŒº (Buffer)&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œè€…&lt;/strong&gt;ï¼š&lt;code&gt;QNX Application&lt;/code&gt;, &lt;code&gt;QNX Screen&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”® API&lt;/strong&gt;ï¼š&lt;code&gt;screen_create_window_buffers()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ HMI ç•Œé¢ï¼‰é¦–å…ˆéœ€è¦ä¸€å—â€œç”»å¸ƒâ€æ¥è¿›è¡Œç»˜åˆ¶ã€‚å®ƒä¼šè°ƒç”¨ QNX Screen æä¾›çš„ APIï¼Œè¯·æ±‚åˆ›å»ºä¸€ä¸ªçª—å£ä»¥åŠä¸ä¹‹å…³è”çš„ä¸€ç»„ï¼ˆé€šå¸¸æ˜¯ä¸¤ä¸ªæˆ–ä¸‰ä¸ªï¼Œç”¨äºå®ç°åŒç¼“å†²/ä¸‰ç¼“å†²æŠ€æœ¯ï¼‰å›¾å½¢ç¼“å†²åŒº (Framebuffers)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;QNX Screen&lt;/code&gt; ä½œä¸ºçª—å£ç³»ç»Ÿç®¡ç†è€…ï¼Œå¹¶ä¸ä¼šè‡ªå·±åˆ†é…è¿™å—ç‰¹æ®Šçš„å†…å­˜ã€‚å®ƒä¼šé€šè¿‡ IPC (è¿›ç¨‹é—´é€šä¿¡) &lt;strong&gt;è¯·æ±‚&lt;/strong&gt; &lt;code&gt;Display/GPU Driver&lt;/code&gt; (èµ„æºç®¡ç†å™¨) æ¥åˆ†é…ã€‚é©±åŠ¨ç¨‹åºä¼šåˆ†é…ä¸€å—ç¬¦åˆç¡¬ä»¶è¦æ±‚ï¼ˆä¾‹å¦‚ç‰©ç†ä¸Šè¿ç»­ï¼‰çš„å…±äº«å†…å­˜ï¼Œå¹¶å°†å…¶å¥æŸ„ (handle) è¿”å›ç»™ &lt;code&gt;Screen&lt;/code&gt;ã€‚æœ€åï¼Œ&lt;code&gt;Screen&lt;/code&gt; å†å°†ä»£è¡¨è¿™äº› Buffer çš„å¥æŸ„è¿”å›ç»™åº”ç”¨ç¨‹åºã€‚è‡³æ­¤ï¼Œåº”ç”¨ç¨‹åºæ‹¥æœ‰äº†å¯ä»¥åœ¨ä¸Šé¢ä½œç”»çš„â€œç”»å¸ƒâ€ã€‚&lt;/p&gt;
&lt;h4 id="æ­¥éª¤-3--4æäº¤ç»˜å›¾æŒ‡ä»¤"&gt;&lt;strong&gt;æ­¥éª¤ 3 &amp;amp; 4ï¼šæäº¤ç»˜å›¾æŒ‡ä»¤&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œè€…&lt;/strong&gt;ï¼š&lt;code&gt;QNX Application&lt;/code&gt;, &lt;code&gt;Graphics API (OpenGL ES + EGL)&lt;/code&gt;, &lt;code&gt;GPU Driver&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”® API/æœºåˆ¶&lt;/strong&gt;ï¼š&lt;code&gt;eglSwapBuffers()&lt;/code&gt;, QNX IPC (&lt;code&gt;msg&lt;/code&gt;/&lt;code&gt;devctl&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºä½¿ç”¨åƒ OpenGL ES è¿™æ ·çš„æ ‡å‡†å›¾å½¢ API æ¥æè¿°è¦ç»˜åˆ¶çš„å†…å®¹ï¼ˆä¾‹å¦‚æŒ‰é’®ã€ä»ªè¡¨ç›˜ã€3D æ¨¡å‹ç­‰ï¼‰ã€‚è¿™äº› API è°ƒç”¨å®šä¹‰äº†å›¾å…ƒçš„å½¢çŠ¶ã€çº¹ç†å’Œé¢œè‰²ã€‚&lt;/p&gt;</description></item><item><title>æ™ºèƒ½åº§èˆ±è½¯ä»¶å¼€å‘ CI/CD æµç¨‹æŠ€æœ¯è¯´æ˜æ–‡æ¡£</title><link>https://ethen-cao.github.io/ethenslab/others/ci-cd/</link><pubDate>Sun, 03 Aug 2025 17:17:50 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/others/ci-cd/</guid><description>&lt;h2 id="1-æ¦‚è¿°"&gt;&lt;strong&gt;1. æ¦‚è¿°&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡æ¡£æ—¨åœ¨è¯¦ç»†é˜è¿°æ™ºèƒ½åº§èˆ±è½¯ä»¶å¼€å‘ä»ä»£ç ä¸‹è½½åˆ°æœ€ç»ˆOTAï¼ˆOver-the-Airï¼‰å‘å¸ƒçš„ç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–æµç¨‹ã€‚è¯¥æµç¨‹åŸºäºè¡Œä¸šä¸»æµçš„ DevOps å’Œ CI/CD å®è·µï¼Œæ—¨åœ¨é€šè¿‡é«˜åº¦è‡ªåŠ¨åŒ–ã€ä¸¥æ ¼çš„è´¨é‡é—¨ç¦å’Œæ¸…æ™°çš„å‘å¸ƒè·¯å¾„ï¼Œç¡®ä¿è½¯ä»¶å¼€å‘çš„æ•æ·æ€§ã€é«˜è´¨é‡å’Œå¯è¿½æº¯æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒç»„ä»¶:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬æ§åˆ¶ä¸ä»£ç å®¡æŸ¥&lt;/strong&gt;: Git, Repo, Gerrit&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒç»­é›†æˆ/æŒç»­äº¤ä»˜ (CI/CD)&lt;/strong&gt;: Jenkins&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´¨é‡ç®¡ç†&lt;/strong&gt;: SonarQube&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ¶å“åº“ç®¡ç†&lt;/strong&gt;: JFrog Artifactory&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ‹è¯•å¹³å°&lt;/strong&gt;: HIL (ç¡¬ä»¶åœ¨ç¯) / SIL (è½¯ä»¶åœ¨ç¯)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½²ä¸å‘å¸ƒ&lt;/strong&gt;: OTA æœåŠ¡å™¨, TSP (è½¦è½½ä¿¡æ¯æœåŠ¡æä¾›å•†) æœåŠ¡å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="2-è¯¦ç»†æµç¨‹ä¸æŠ€æœ¯å®ç°åŸç†"&gt;&lt;strong&gt;2. è¯¦ç»†æµç¨‹ä¸æŠ€æœ¯å®ç°åŸç†&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/Intelligent-cabin-software-development-and-release-process.png" alt="" /&gt;&lt;/p&gt;
&lt;h3 id="é˜¶æ®µ-1--2-å¼€å‘è€…å·¥ä½œæµ"&gt;&lt;strong&gt;é˜¶æ®µ 1 &amp;amp; 2: å¼€å‘è€…å·¥ä½œæµ&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;æ­¤é˜¶æ®µæ˜¯æ‰€æœ‰å¼€å‘çš„èµ·ç‚¹ï¼Œæ ¸å¿ƒæ˜¯ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªé«˜æ•ˆã€è§„èŒƒçš„æœ¬åœ°å¼€å‘ç¯å¢ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;[00] &lt;code&gt;repo init&lt;/code&gt; è·å–é¡¹ç›®æ¸…å•&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯åŸç†&lt;/strong&gt;: &lt;code&gt;repo&lt;/code&gt; æ˜¯ Google ä¸ºç®¡ç† Android è¿™ç±»åŒ…å«æ•°ç™¾ä¸ª Git ä»“åº“çš„è¶…å¤§å‹é¡¹ç›®è€Œå¼€å‘çš„å·¥å…·ã€‚&lt;code&gt;repo init&lt;/code&gt; å‘½ä»¤çš„æ ¸å¿ƒæ˜¯å…‹éš†ä¸€ä¸ªç‰¹æ®Šçš„ &lt;strong&gt;Manifest ä»“åº“&lt;/strong&gt;ã€‚è¯¥ä»“åº“åŒ…å«ä¸€ä¸ª &lt;code&gt;manifest.xml&lt;/code&gt; æ–‡ä»¶ï¼Œæ­¤ XML æ–‡ä»¶ä»¥å£°æ˜å¼çš„æ–¹å¼å®šä¹‰äº†æ•´ä¸ªæ™ºèƒ½åº§èˆ±é¡¹ç›®ç”±å“ªäº› Git ä»“åº“ï¼ˆ&lt;code&gt;&amp;lt;project&amp;gt;&lt;/code&gt;ï¼‰ã€åœ¨å“ªä¸ªè·¯å¾„ï¼ˆ&lt;code&gt;path&lt;/code&gt;ï¼‰ã€ä»¥åŠä½¿ç”¨å“ªä¸ªåˆ†æ”¯æˆ– Tagï¼ˆ&lt;code&gt;revision&lt;/code&gt;ï¼‰ç»„æˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;[01] &lt;code&gt;repo sync&lt;/code&gt; åŒæ­¥æ‰€æœ‰æºç &lt;/strong&gt;:&lt;/p&gt;</description></item><item><title>WindowManagerService è§£æ</title><link>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/windowmanagerservice/</link><pubDate>Tue, 29 Jul 2025 10:22:54 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/windowmanager/windowmanagerservice/</guid><description>&lt;h2 id="windowmanagerservice-æ¦‚è¿°"&gt;WindowManagerService æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;WindowManagerServiceï¼ˆç®€ç§°WMSï¼‰æ˜¯Androidç³»ç»Ÿä¸­è´Ÿè´£çª—å£ï¼ˆWindowï¼‰ç®¡ç†çš„æ ¸å¿ƒç³»ç»ŸæœåŠ¡ã€‚å®ƒæ˜¯å±å¹•ä¸Šæ‰€æœ‰å¯è§å…ƒç´ çš„â€œæ€»ç®¡å®¶â€ï¼Œå†³å®šäº†æ‰€æœ‰çª—å£çš„å¤–è§‚ã€è¡Œä¸ºå’Œäº¤äº’æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸ºAndroidæ¡†æ¶å±‚ï¼ˆFramework Layerï¼‰çš„å…³é”®éƒ¨åˆ†ï¼ŒWMSéšç³»ç»Ÿå¯åŠ¨ï¼Œå¹¶ç¨³å®šè¿è¡Œåœ¨æƒé™æé«˜çš„ system_server è¿›ç¨‹ä¸­ã€‚è¿™ä¸ªä½ç½®èµ‹äºˆäº†å®ƒç®¡ç†æ‰€æœ‰åº”ç”¨çª—å£å’Œç³»ç»Ÿçª—å£çš„æœ€é«˜æƒé™ã€‚&lt;/p&gt;
&lt;p&gt;WMSçš„è§’è‰²åƒä¸€ä¸ªâ€œæ€»æŒ‡æŒ¥â€ï¼Œå®ƒå¹¶ä¸äº²è‡ªæ‰§è¡Œæ‰€æœ‰åº•å±‚æ“ä½œï¼Œè€Œæ˜¯åè°ƒç³»ç»Ÿä¸­çš„å¤šä¸ªç»„ä»¶æ¥å…±åŒå®Œæˆå¯¹çª—å£çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚å…¶æ ¸å¿ƒä½œç”¨åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;çª—å£çš„åˆ›å»ºä¸ç®¡ç† (Creation &amp;amp; Management): ä¸ ActivityManagerService (AMS) ååŒå·¥ä½œã€‚å½“AMSå†³å®šè¦æ˜¾ç¤ºæŸä¸ªActivityæ—¶ï¼ŒWMSè´Ÿè´£ä¸ºå…¶åˆ›å»ºå’Œç®¡ç†å¯¹åº”çš„çª—å£å®ä¾‹ï¼ˆWindowStateï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¸ƒå±€ä¸è®¡ç®— (Layout &amp;amp; Calculation): é€šè¿‡è‡ªé¡¶å‘ä¸‹çš„éå†ï¼Œç²¾ç¡®è®¡ç®—å‡ºæ¯ä¸ªçª—å£åœ¨å±å¹•ä¸Šçš„æœ€ç»ˆä½ç½®å’Œå°ºå¯¸ï¼ˆFrameï¼‰ï¼Œä»è€Œé€‚é…ä¸åŒå°ºå¯¸çš„å±å¹•ä»¥åŠåˆ†å±ã€å°çª—ç­‰å„ç§æ˜¾ç¤ºæ¨¡å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å±‚çº§ä¸Zåº (Layer &amp;amp; Z-Order): ç»´æŠ¤æ‰€æœ‰çª—å£çš„å‰åå †å é¡ºåºï¼ˆZ-Orderï¼‰ï¼Œå†³å®šå“ªä¸ªçª—å£æ˜¾ç¤ºåœ¨æœ€ä¸Šå±‚ï¼Œå“ªä¸ªçª—å£è¢«é®æŒ¡ï¼Œç¡®ä¿ç•Œé¢å…ƒç´ ä»¥æ­£ç¡®çš„æ¬¡åºå‘ˆç°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»˜åˆ¶ä¸åˆæˆ (Drawing &amp;amp; Composition): WMSè‡ªèº«ä¸è´Ÿè´£ç»˜åˆ¶çª—å£å†…å®¹ã€‚å®ƒç®¡ç†çª—å£çš„ç»˜å›¾è¡¨é¢ï¼ˆSurfaceï¼‰ï¼Œå¹¶å°†æ‰€æœ‰çª—å£çš„å…ƒæ•°æ®ï¼ˆä½ç½®ã€å±‚çº§ã€é€æ˜åº¦ç­‰ï¼‰ç»Ÿä¸€æäº¤ç»™ SurfaceFlingerï¼Œç”±åè€…å®Œæˆæœ€ç»ˆçš„ç”»é¢åˆæˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çª—å£åŠ¨ç”» (Window Animation): è´Ÿè´£å®ç°çª—å£åˆ‡æ¢ã€åº”ç”¨å¯åŠ¨/é€€å‡ºã€è°ƒæ•´å¤§å°ç­‰è¿‡ç¨‹ä¸­çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œä¸ºç”¨æˆ·æä¾›æµç•…çš„è§†è§‰ä½“éªŒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¾“å…¥äº‹ä»¶åˆ†å‘ (Input Event Dispatching): ä½œä¸ºè¾“å…¥ç³»ç»Ÿçš„å…³é”®ä¸€ç¯ï¼ŒWMSæ¥æ”¶åŸå§‹çš„è§¦æ‘¸ã€æŒ‰é”®ç­‰äº‹ä»¶ï¼Œå‡†ç¡®åˆ¤æ–­äº‹ä»¶åº”è¯¥ç”±å“ªä¸ªçª—å£æ¥æ”¶ï¼Œå¹¶äº¤ç”± InputDispatcher è¿›è¡Œç²¾ç¡®æŠ•é€’ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="çª—å£çš„åˆ›å»ºä¸ç®¡ç†"&gt;çª—å£çš„åˆ›å»ºä¸ç®¡ç†&lt;/h2&gt;
&lt;p&gt;çª—å£çš„åˆ›å»ºè¯·æ±‚æ€»æ˜¯ç”±åº”ç”¨è¿›ç¨‹å‘èµ·çš„ï¼ŒWMS åˆ™æ˜¯è¯·æ±‚çš„å“åº”è€…å’Œæ‰§è¡Œè€…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://ethen-cao.github.io/ethenslab/images/windowstate-creation.png" alt="WindowState åˆ›å»ºæ—¶åºç¤ºæ„å›¾" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§¦å‘æµç¨‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åº”ç”¨å±‚è°ƒç”¨ï¼šå½“ä¸€ä¸ª Activity çš„ onResume() å›è°ƒè¢«è§¦å‘ï¼Œå‡†å¤‡å˜å¾—å¯è§æ—¶ï¼Œå…¶å†…éƒ¨çš„ PhoneWindow ä¼šé€šè¿‡ WindowManager.addView() æ–¹æ³•å°†å®ƒçš„æ ¹è§†å›¾ï¼ˆDecorViewï¼‰æ·»åŠ åˆ°çª—å£ä¸­ã€‚è¿™ä¸ªè°ƒç”¨æ˜¯åº”ç”¨è¯·æ±‚æ˜¾ç¤ºUIçš„èµ·ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;ViewRootImpl çš„æ¡¥æ¢ä½œç”¨ï¼šaddView() çš„è°ƒç”¨ä¼šåˆ›å»ºä¸€ä¸ªåä¸º ViewRootImpl çš„å…³é”®å¯¹è±¡ã€‚ViewRootImpl å……å½“äº†åº”ç”¨UIå’ŒWMSä¹‹é—´çš„â€œä¿¡ä½¿â€å’Œâ€œæ¡¥æ¢â€ã€‚&lt;/li&gt;
&lt;li&gt;Binder IPC è°ƒç”¨ï¼šViewRootImpl é€šè¿‡ä¸€ä¸ªåä¸º IWindowSession çš„ Binder æ¥å£ï¼Œå‘ WMS å‘èµ·ä¸€ä¸ªè¿œç¨‹è°ƒç”¨ï¼Œé€šå¸¸æ˜¯ addToDisplay()ã€‚è¿™ä¸ªè°ƒç”¨ä¼šæºå¸¦ä¸¤ä¸ªæ ¸å¿ƒä¿¡æ¯ï¼š
&lt;ul&gt;
&lt;li&gt;Window Token: ä¸€ä¸ªå”¯ä¸€çš„ Binder ä»¤ç‰Œï¼Œç”¨äºå°†è¿™ä¸ªçª—å£ä¸ AMS ä¸­çš„ ActivityRecord å…³è”èµ·æ¥ï¼ŒWMSæ®æ­¤çŸ¥é“è¿™ä¸ªçª—å£å±äºå“ªä¸ªActivityã€‚
&lt;img src="https://ethen-cao.github.io/ethenslab/images/windowtoken-creation-transport.png" alt="WindowTokenåˆ›å»ºä¸ä½¿ç”¨ç¤ºæ„å›¾" /&gt;&lt;/li&gt;
&lt;li&gt;WindowManager.LayoutParams: ä¸€ä¸ªåŒ…å«äº†çª—å£æ‰€æœ‰æœŸæœ›å±æ€§çš„å‚æ•°é›†ï¼Œå¦‚çª—å£çš„ç±»å‹ï¼ˆåº”ç”¨çª—å£ã€ç³»ç»Ÿçª—å£ï¼‰ã€å°ºå¯¸ï¼ˆMATCH_PARENTç­‰ï¼‰ã€æ ‡å¿—ï¼ˆFLAG_NOT_FOCUSABLEç­‰ï¼‰å’Œ gravityã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;WMS çš„å“åº”åŠ¨ä½œ&lt;/strong&gt;ï¼š&lt;/p&gt;</description></item><item><title>crash_dumpæµç¨‹</title><link>https://ethen-cao.github.io/ethenslab/android-dev/perf--stability/native_crash_process/</link><pubDate>Mon, 29 Jul 2024 10:00:00 +0800</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/perf--stability/native_crash_process/</guid><description>&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†ä»ä¿¡å·æ•è·ã€&lt;code&gt;crash_dump&lt;/code&gt; ä»‹å…¥ã€Tombstone ç”Ÿæˆã€é€šçŸ¥ AMS åˆ°æœ€åæ—¥å¿—è¾“å‡ºçš„äº¤äº’ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h3 id="native-process-crash-å¤„ç†æ—¶åºå›¾"&gt;Native Process Crash å¤„ç†æ—¶åºå›¾&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme plain
autonumber
participant &amp;#34;Native Process\n(Crasher)&amp;#34; as P
participant &amp;#34;Signal Handler\n(debuggerd_handler)&amp;#34; as SH
participant &amp;#34;Pseudothread\n(In Crasher)&amp;#34; as PT
participant &amp;#34;crash_dump\n(Debuggerd)&amp;#34; as CD
participant &amp;#34;tombstoned\n(Daemon)&amp;#34; as T
participant &amp;#34;AMS\n(ActivityManager)&amp;#34; as AMS
participant &amp;#34;Logcat\n(liblog)&amp;#34; as LOG
participant &amp;#34;Init\n(PID 1)&amp;#34; as INIT
== 1. å´©æºƒè§¦å‘ä¸æ‹¦æˆª ==
P -&amp;gt; P: å‘ç”Ÿå¼‚å¸¸ (e.g., SIGSEGV)
activate P
P -&amp;gt; SH: è§¦å‘ debuggerd_signal_handler
activate SH
SH -&amp;gt; SH: pthread_mutex_lock \né˜²æ­¢å¤šçº¿ç¨‹åŒæ—¶dump
SH -&amp;gt; LOG: log_signal_summary (Fatal signal...)
note right of SH
ä¸ºäº†ä¸æ±¡æŸ“åŸè¿›ç¨‹æ–‡ä»¶æè¿°ç¬¦ï¼Œ
debuggerd ä½¿ç”¨ clone åˆ›å»º
ä¸€ä¸ª Pseudothread æ¥å¤„ç†
end note
SH -&amp;gt; PT: clone() åˆ›å»ºä¼ªçº¿ç¨‹
activate PT
== 2. å¯åŠ¨ crash_dump ä¸æ¡æ‰‹ ==
PT -&amp;gt; CD: execle(&amp;#34;/apex/.../crash_dump64&amp;#34;)
activate CD
CD -&amp;gt; CD: è§£æå‚æ•° (PID, TID)
CD -&amp;gt; P: ptrace(PTRACE_SEIZE) é™„ç€ç›®æ ‡çº¿ç¨‹
note right of CD
crash_dump é€šè¿‡ç®¡é“ä¸
ç›®æ ‡è¿›ç¨‹æ¡æ‰‹
end note
CD -&amp;gt; PT: Write pipe (Handshake &amp;#39;\1&amp;#39;)
PT -&amp;gt; PT: read pipe
PT -&amp;gt; PT: create_vm_process() \n(Fork è¿›ç¨‹é•œåƒä¾›è¯»å–å†…å­˜)
PT -&amp;gt; CD: Write pipe (CrashInfo: siginfo, regs)
== 3. è¿æ¥ Tombstoned è·å–æ–‡ä»¶å¥æŸ„ ==
CD -&amp;gt; CD: ReadCrashInfo()
CD -&amp;gt; T: connect_tombstone_server()
activate T
T -&amp;gt; T: CrashQueue::get_output()
T -&amp;gt; T: openat() åˆ›å»ºä¸´æ—¶æ–‡ä»¶
T --&amp;gt; CD: è¿”å› Text FD å’Œ Proto FD
deactivate T
== 4. ç”Ÿæˆ Tombstone ä¸ Logcat ==
CD -&amp;gt; CD: unwinder.Initialize()
CD -&amp;gt; CD: engrave_tombstone()
group ç”Ÿæˆ Tombstone å†…å®¹
CD -&amp;gt; CD: è¯»å–å¯„å­˜å™¨ã€Memoryã€Maps
CD -&amp;gt; CD: Unwind Stack (å›æº¯å †æ ˆ)
CD -&amp;gt; T: Write to FD (å†™å…¥ç£ç›˜æ–‡ä»¶)
end
group è¾“å‡º Logcat
CD -&amp;gt; LOG: _LOG(..., &amp;#34;backtrace: ...&amp;#34;)
note right of LOG
libdebuggerd/utility.cpp ä¸­çš„ _LOG
å°† tombstone å†…å®¹æ‘˜è¦å†™å…¥ logcat
end note
end
== 5. é€šçŸ¥ AMS (DropBox) ==
CD -&amp;gt; AMS: activity_manager_notify()
activate AMS
note right of AMS
è¿æ¥ /data/system/ndebugsocket
å‘é€ PID, Signal, abort_msg
AMS å°†ç”Ÿæˆ DropBox æ¡ç›®
end note
CD -&amp;gt; AMS: write(socket, crash_info)
deactivate AMS
== 6. å®Œæˆä¸æ¸…ç† ==
CD -&amp;gt; T: notify_completion()
activate T
T -&amp;gt; T: rename_tombstone_fd() \n(é‡å‘½åä¸º tombstone_xx)
deactivate T
CD -&amp;gt; P: ptrace(DETACH)
deactivate CD
destroy CD
PT -&amp;gt; P: resend_signal() (é‡å‘ä¿¡å·è‡ªæ€)
deactivate PT
deactivate SH
deactivate P
destroy P
P -&amp;gt; INIT: SIGCHLD (è¿›ç¨‹æ­»äº¡)
INIT -&amp;gt; INIT: Process Reaping (å›æ”¶åƒµå°¸è¿›ç¨‹)
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="å…³é”®æµç¨‹ä»£ç ä¾æ®è§£æ"&gt;å…³é”®æµç¨‹ä»£ç ä¾æ®è§£æ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿¡å·æ‹¦æˆª (debuggerd_signal_handler)&lt;/strong&gt;&lt;/p&gt;</description></item><item><title/><link>https://ethen-cao.github.io/ethenslab/android-dev/display/hwc_setbrightness/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/display/hwc_setbrightness/</guid><description>&lt;div class="mermaid"&gt;graph TD
!theme plain
%% --- å®šä¹‰æ ·å¼ ---
classDef appLayer fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
classDef bufferLayer fill:#fff9c4,stroke:#fbc02d,stroke-width:2px;
classDef sfLayer fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px;
classDef halLayer fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px;
classDef hwLayer fill:#eeeeee,stroke:#616161,stroke-width:2px;
classDef decisionNode fill:#ffccbc,stroke:#bf360c,stroke-width:2px,stroke-dasharray: 5 5;
%% --- 1. åº”ç”¨å±‚ (Producers) ---
subgraph AppLayer [åº”ç”¨å±‚ (Producers)]
direction LR
App[App / Game]
SysUI[SystemUI / Launcher]
end
class App,SysUI appLayer;
%% --- 2. Buffer ä¼ è¾“å±‚ ---
subgraph BufferLayer [Buffer ä¼ è¾“æœºåˆ¶]
BQ[BufferQueue&lt;br/&gt;(Producer/Consumer)]
Gralloc[Gralloc&lt;br/&gt;(æ˜¾å­˜åˆ†é…)]
end
class BQ,Gralloc bufferLayer;
%% --- 3. SurfaceFlinger æ ¸å¿ƒå±‚ ---
subgraph SF_Core [SurfaceFlinger Native Process]
direction TB
Scheduler[Scheduler / VsyncModulator&lt;br/&gt;(å¿ƒè·³æ§åˆ¶)]
SF_Main[SurfaceFlinger Main Thread&lt;br/&gt;(äº‹åŠ¡å¤„ç† &amp; é”å®šå›¾å±‚)]
subgraph CE [CompositionEngine (åˆæˆå¼•æ“)]
Output[Output (Display)]
Planner[Planner / LayerStack]
Strategy[&lt;b&gt;chooseCompositionStrategy&lt;/b&gt;&lt;br/&gt;(å†³ç­–ä¸­å¿ƒ)]
end
RE[RenderEngine&lt;br/&gt;(SkiaGL / SkiaVK / Graphite)]
end
class Scheduler,SF_Main,Output,Planner,RE sfLayer;
class Strategy decisionNode;
%% --- 4. HAL ç¡¬ä»¶æŠ½è±¡å±‚ ---
subgraph HAL [ç¡¬ä»¶æŠ½è±¡å±‚ (HAL)]
HWC[HWComposer HAL&lt;br/&gt;(DRM/KMS)]
GPUDriver[GPU Driver&lt;br/&gt;(OpenGL/Vulkan)]
end
class HWC,GPUDriver halLayer;
%% --- 5. ç¡¬ä»¶å±‚ ---
subgraph Hardware [ç¡¬ä»¶å±‚]
GPU_HW[GPU ç¡¬ä»¶]
DPU_HW[DPU / Display Controller]
Panel[å±å¹•é¢æ¿]
end
class GPU_HW,DPU_HW,Panel hwLayer;
%% --- è¿æ¥å…³ç³» ---
%% ç”Ÿäº§é˜¶æ®µ
App --&gt;|1. QueueBuffer| BQ
SysUI --&gt;|1. QueueBuffer| BQ
BQ -.-&gt;|æŒ‡å‘| Gralloc
%% è§¦å‘é˜¶æ®µ
Display_Vsync(ç¡¬ä»¶ Vsync) -.-&gt; Scheduler
Scheduler --&gt;|2. OnFrameSignal| SF_Main
%% é€»è¾‘å¤„ç†
SF_Main --&gt;|3. AcquireBuffer| BQ
SF_Main --&gt;|4. è°ƒç”¨| CE
CE --&gt;|5. prepareFrame| Output
Output --&gt; Planner
Planner --&gt; Strategy
%% æ ¸å¿ƒå†³ç­–äº¤äº’ (è°ˆåˆ¤)
Strategy --&gt;|6. ValidateDisplay (èƒ½å¤„ç†å—?)| HWC
HWC --&gt;|7. è¿”å›åˆæˆç±»å‹ (Client/Device)| Strategy
%% æ‰§è¡Œè·¯å¾„ A: GPU åˆæˆ (Client Composition)
Strategy --"8a. éœ€è¦ GPU åˆæˆ (Client)"--&gt; RE
RE --&gt;|9. DrawLayers (Skia)| GPUDriver
GPUDriver --&gt; GPU_HW
GPU_HW --&gt;|10. è¾“å‡ºåˆæˆåçš„ Buffer| BQ_Target[Framebuffer Target]
BQ_Target --&gt; HWC
%% æ‰§è¡Œè·¯å¾„ B: ç¡¬ä»¶åˆæˆ (Device Composition)
Strategy --"8b. çº¯ç¡¬ä»¶åˆæˆ (Device Overlay)"--&gt; HWC
%% æœ€ç»ˆæäº¤
HWC --&gt;|11. PresentDisplay (Atomic Commit)| DPU_HW
DPU_HW --&gt;|12. æ‰«æè¾“å‡º| Panel
&lt;/div&gt;&lt;h3 id="äº®åº¦è°ƒèŠ‚å¤±è´¥å¼•å‘surfaceflingeråˆæˆç­–ç•¥é€‰æ‹©å¤±è´¥çš„æ—¶åºå›¾"&gt;äº®åº¦è°ƒèŠ‚å¤±è´¥å¼•å‘SurfaceFlingeråˆæˆç­–ç•¥é€‰æ‹©å¤±è´¥çš„æ—¶åºå›¾&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme plain
&amp;#39; skinparam MaxMessageSize 300
skinparam participantPadding 10
skinparam boxPadding 10
skinparam defaultFontName Monospaced
autonumber &amp;#34;&amp;lt;b&amp;gt;[0]&amp;lt;/b&amp;gt;&amp;#34;
title äº®åº¦è®¾ç½®å¤±è´¥å¯¼è‡´åˆæˆç­–ç•¥ä¸­æ­¢çš„å…¨é“¾è·¯æ—¶åºå›¾
box &amp;#34;SurfaceFlinger è¿›ç¨‹&amp;#34; #lightgreen
participant &amp;#34;CompositionEngine&amp;#34; as CE
participant &amp;#34;HWComposer&amp;#34; as SF_HWC
participant &amp;#34;AidlComposer\n(HAL Client)&amp;#34; as Client
participant &amp;#34;ComposerClientWriter&amp;#34; as Writer
end box
box &amp;#34;HWC Service è¿›ç¨‹ (Guest OS)&amp;#34; #LightGray
participant &amp;#34;AidlComposerClient\n(CommandEngine)&amp;#34; as Server
participant &amp;#34;ConcurrencyMgr\n(SettingsIntf)&amp;#34; as CM
participant &amp;#34;DisplayBuiltIn\n(SDM Logic)&amp;#34; as DBI
participant &amp;#34;DPUMultiCore\n(Mux)&amp;#34; as Mux
participant &amp;#34;HWPeripheralDRM\n(DAL)&amp;#34; as HW
end box
box &amp;#34;Kernel / FileSystem&amp;#34; #MistyRose
participant &amp;#34;/sys/class/backlight&amp;#34; as Sysfs
end box
== é˜¶æ®µ 0: æŒ‡ä»¤ç§¯å‹ (Client Side Batching) ==
note right of CE: SurfaceFlinger åœ¨ä¹‹å‰çš„é€»è¾‘ä¸­\nè°ƒç”¨äº† setDisplayBrightness
CE -&amp;gt; SF_HWC: setDisplayBrightness(...)
SF_HWC -&amp;gt; Client: setDisplayBrightness(...)
Client -&amp;gt; Writer: å†™å…¥æŒ‡ä»¤åˆ° Command Queue
note right of Writer: æ­¤æ—¶ Command Index 0 ç¼“å­˜äº†:\n1. OP: SetBrightness\n(å°šæœªå‘é€)
== é˜¶æ®µ 1: è§¦å‘ç­–ç•¥é€‰æ‹© (Frame Start) ==
CE -&amp;gt; CE: **chooseCompositionStrategy()**
CE -&amp;gt; SF_HWC: getDeviceCompositionChanges()
SF_HWC -&amp;gt; SF_HWC: check canSkipValidate (True)
SF_HWC -&amp;gt; Client: presentOrValidateDisplay()
note right of Writer: å°† Validate æŒ‡ä»¤è¿½åŠ åˆ° Command Queue (Index 0)\nç°åœ¨ Index 0 åŒ…å«: [SetBrightness, PresentOrValidate]
Client -&amp;gt; Server: **executeCommands()** (Binder IPC)
activate Server
== é˜¶æ®µ 2: æœåŠ¡ç«¯æ‰§è¡Œ (The Root Cause) ==
Server -&amp;gt; Server: è§£æ Command Queue\nåˆå§‹åŒ– mCommandIndex = 0
group #MistyRose HWC æœåŠ¡ç«¯å¾ªç¯ [å¤„ç† Index 0]
&amp;#39; --- æ­¥éª¤ A: äº®åº¦è®¾ç½® ---
note right of Server: **æ­¥éª¤ A: ä¼˜å…ˆæ‰§è¡Œäº®åº¦è®¾ç½®**
Server -&amp;gt; CM: SetDisplayBrightness(level)
CM -&amp;gt; DBI: SetPanelBrightness(brightness)
note right of DBI: è½¬æ¢ float ä¸º int level
DBI -&amp;gt; Mux: SetPanelBrightness(level)
Mux -&amp;gt; HW: SetPanelBrightness(level)
activate HW
HW -&amp;gt; HW: æ£€æŸ¥ enable_brightness_drm_prop
note right of HW: å±æ€§æœªå¼€å¯(false)ï¼Œèµ° Sysfs è·¯å¾„
HW -&amp;gt; Sysfs: open(&amp;#34;.../panel0-backlight/brightness&amp;#34;)
Sysfs --&amp;gt; HW: &amp;lt;color:red&amp;gt;âŒ å¤±è´¥ (ENOENT / No such file)&amp;lt;/color&amp;gt;
note right of HW
**æ•…éšœç‚¹**: è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ Guest OS
çœ‹ä¸åˆ°ç‰©ç†èƒŒå…‰èŠ‚ç‚¹
end note
HW --&amp;gt; Mux: è¿”å› kErrorFileDescriptor
deactivate HW
Mux --&amp;gt; DBI: è¿”å› Error
DBI --&amp;gt; CM: è¿”å› Error
CM --&amp;gt; Server: è¿”å› Error (kErrorBadConfig)
Server -&amp;gt; Server: writeError(Index=0, BadConfig)
note right of Server: &amp;lt;font color=red&amp;gt;&amp;lt;b&amp;gt;[Log 1] W SDM : executeSetDisplayBrightness...&amp;lt;/b&amp;gt;&amp;lt;/font&amp;gt;\nè®°å½•é”™è¯¯ï¼Œä½†**ä¸ä¸­æ–­**å¾ªç¯
&amp;#39; --- æ­¥éª¤ B: éªŒè¯ ---
note right of Server: **æ­¥éª¤ B: æ‰§è¡ŒåˆæˆéªŒè¯**
Server -&amp;gt; CM: CommitOrPrepare(...)
activate CM
CM --&amp;gt; Server: &amp;lt;font color=green&amp;gt;âœ… æˆåŠŸ (kErrorNone)&amp;lt;/font&amp;gt;
deactivate CM
Server -&amp;gt; Server: setPresentOrValidateResult(Validated)
end
Server --&amp;gt; Client: è¿”å› Binder Status OK\næ•°æ®åŒ…åŒ…å«:\n1. ErrorList: [{Index:0, Err:BadConfig}]\n2. ResultList: [{Index:0, Validated}]
deactivate Server
== é˜¶æ®µ 3: å®¢æˆ·ç«¯è¯¯åˆ¤ (The Misjudgment) ==
Client -&amp;gt; Client: è§£æè¿”å›æ•°æ®
group å®¢æˆ·ç«¯åˆ¤å†³é€»è¾‘ [AidlComposer::execute]
Client -&amp;gt; Client: æ£€æŸ¥ Index 0
note right of Client
**&amp;lt;color:red&amp;gt;è‡´å‘½è¯¯åˆ¤é€»è¾‘&amp;lt;/color&amp;gt;**:
1. å‘ç° Index 0 æœ‰ Error (å®é™…æºè‡ªäº®åº¦)
2. å‘ç° Index 0 åŒ…å« Validate æŒ‡ä»¤
3. **åˆ¤å®š: æ•´ä¸ª Validate å¤±è´¥**
end note
Client --&amp;gt; SF_HWC: è¿”å› **Error::BAD_CONFIG**
end
== é˜¶æ®µ 4: ç­–ç•¥ä¸­æ­¢ (Abort) ==
SF_HWC -&amp;gt; SF_HWC: RETURN_IF_HWC_ERROR_FOR(...)
note right of SF_HWC: &amp;lt;font color=red&amp;gt;&amp;lt;b&amp;gt;[Log 2] E HWComposer : getDeviceCompositionChanges... failed...&amp;lt;/b&amp;gt;&amp;lt;/font&amp;gt;
SF_HWC --&amp;gt; CE: è¿”å› **UNKNOWN_ERROR** (-2147483648)
CE -&amp;gt; CE: if (result != NO_ERROR)
note right of CE: &amp;lt;font color=red&amp;gt;&amp;lt;b&amp;gt;[Log 3] E CompositionEngine : chooseCompositionStrategy failed...&amp;lt;/b&amp;gt;&amp;lt;/font&amp;gt;
CE -&amp;gt; CE: return false
note right of CE: **æ”¾å¼ƒå½“å‰å¸§åˆæˆ**\n(SurfaceFlinger ä¸¢å¼ƒè¿™ä¸€å¸§)
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="è¯¦ç»†è¯´æ˜ä¸ºä»€ä¹ˆä¼šå¤±è´¥"&gt;è¯¦ç»†è¯´æ˜ï¼šä¸ºä»€ä¹ˆä¼šå¤±è´¥&lt;/h3&gt;
&lt;h4 id="1-æ ¹æœ¬åŸå› -root-cause"&gt;1. æ ¹æœ¬åŸå›  (Root Cause)&lt;/h4&gt;
&lt;p&gt;æ•…éšœå‘ç”Ÿåœ¨ &lt;strong&gt;é˜¶æ®µ 2&lt;/strong&gt; çš„åº•å±‚ &lt;code&gt;HWPeripheralDRM&lt;/code&gt; ä¸­ã€‚&lt;/p&gt;</description></item><item><title/><link>https://ethen-cao.github.io/ethenslab/android-dev/visualquerydetector/visualquerydetector/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ethen-cao.github.io/ethenslab/android-dev/visualquerydetector/visualquerydetector/</guid><description>&lt;h2 id="hotword-detectionçš„æµç¨‹"&gt;Hotword Detectionçš„æµç¨‹&lt;/h2&gt;
&lt;p&gt;åŸºäºæä¾›AOSPçš„ä»£ç ï¼Œä»¥â€œHi Googleâ€ä¸ºä¾‹ï¼Œè¯­éŸ³å”¤é†’ï¼ˆHotword Detectionï¼‰çš„å®Œæ•´æµç¨‹æ˜¯ä¸€ä¸ªè·¨è¿›ç¨‹ã€è·¨å±‚çº§çš„å¤æ‚åä½œè¿‡ç¨‹ã€‚å®ƒä¸»è¦æ¶‰åŠ&lt;strong&gt;åº•å±‚ç¡¬ä»¶è§¦å‘&lt;/strong&gt;ã€&lt;strong&gt;ç³»ç»ŸæœåŠ¡è·¯ç”±&lt;/strong&gt;ã€&lt;strong&gt;æ²™ç›’æœåŠ¡æ ¡éªŒ&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;ä¸Šå±‚åº”ç”¨å“åº”&lt;/strong&gt;å››ä¸ªå…³é”®é˜¶æ®µã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯åŸºäºä»£ç åˆ†æçš„æ—¶åºæµç¨‹ï¼š&lt;/p&gt;
&lt;h3 id="ç¬¬ä¸€é˜¶æ®µåº•å±‚ç¡¬ä»¶è§¦å‘ä¸ç³»ç»Ÿå±‚æ¥æ”¶-hardware-trigger--system-layer"&gt;ç¬¬ä¸€é˜¶æ®µï¼šåº•å±‚ç¡¬ä»¶è§¦å‘ä¸ç³»ç»Ÿå±‚æ¥æ”¶ (Hardware Trigger &amp;amp; System Layer)&lt;/h3&gt;
&lt;p&gt;å½“ç”¨æˆ·è¯´å‡ºâ€œHi Googleâ€æ—¶ï¼Œåº•å±‚ DSP èŠ¯ç‰‡ï¼ˆSoundTrigger HALï¼‰æ£€æµ‹åˆ°å£°å­¦ç‰¹å¾ï¼Œå¹¶å‘ç³»ç»Ÿå‘é€ä¸­æ–­ä¿¡å·ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;HAL å±‚å›è°ƒ&lt;/strong&gt;:
&lt;code&gt;SoundTriggerHw3Compat&lt;/code&gt;ï¼ˆæˆ–å…¶ä»–ç‰ˆæœ¬çš„ Compat å±‚ï¼‰æ”¶åˆ°é©±åŠ¨å±‚çš„å›è°ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç ä¸­ &lt;code&gt;ModelCallbackAdaper.recognitionCallback&lt;/code&gt; è¢«è°ƒç”¨ï¼Œå®ƒå°†åº•å±‚çš„äº‹ä»¶å°è£…ä¸º &lt;code&gt;RecognitionEventSys&lt;/code&gt; å¹¶å‘ä¸Šå±‚ä¼ é€’ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Middleware å±‚ä¼ é€’&lt;/strong&gt;:
äº‹ä»¶ç»è¿‡ &lt;code&gt;SoundTriggerMiddlewareImpl&lt;/code&gt; åŠä¸€ç³»åˆ—è£…é¥°å™¨ï¼ˆValidation, Logging, Permissionï¼‰ï¼Œæœ€ç»ˆåˆ°è¾¾ &lt;code&gt;SoundTriggerService&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SoundTriggerService å¤„ç†&lt;/strong&gt;:
&lt;code&gt;SoundTriggerService&lt;/code&gt; é€šè¿‡å…¶å†…éƒ¨çš„ &lt;code&gt;SoundTriggerHelper&lt;/code&gt; å¤„ç†è¯¥äº‹ä»¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SoundTriggerHelper&lt;/code&gt; çš„ &lt;code&gt;onRecognition&lt;/code&gt; æ–¹æ³•è¢«è§¦å‘ï¼Œè¯†åˆ«å‡ºè¿™æ˜¯ &lt;code&gt;KeyphraseRecognitionEvent&lt;/code&gt;ï¼ˆå…³é”®çŸ­è¯­è¯†åˆ«äº‹ä»¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç´§æ¥ç€è°ƒç”¨ &lt;code&gt;onKeyphraseRecognitionLocked&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å›è°ƒ VoiceInteractionManagerService (VIMS)&lt;/strong&gt;:
&lt;code&gt;SoundTriggerHelper&lt;/code&gt; è°ƒç”¨å®ƒæŒæœ‰çš„ &lt;code&gt;IRecognitionStatusCallback&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ VIMS çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™ä¸ªå›è°ƒå®é™…ä¸Šæ˜¯ &lt;code&gt;HotwordDetectionConnection&lt;/code&gt; å†…éƒ¨å®šä¹‰çš„ &lt;code&gt;SoundTriggerCallback&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ç¬¬äºŒé˜¶æ®µè·¯ç”±è‡³æ²™ç›’æœåŠ¡-routing-to-sandboxed-service"&gt;ç¬¬äºŒé˜¶æ®µï¼šè·¯ç”±è‡³æ²™ç›’æœåŠ¡ (Routing to Sandboxed Service)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;VoiceInteractionManagerService&lt;/code&gt; æ¥æ”¶åˆ°ç¡¬ä»¶äº‹ä»¶åï¼Œä¸ä¼šç›´æ¥å‘ç»™ Google Appï¼Œè€Œæ˜¯å…ˆè·¯ç”±ç»™è¿è¡Œåœ¨éš”ç¦»è¿›ç¨‹ä¸­çš„ &lt;code&gt;HotwordDetectionService&lt;/code&gt; è¿›è¡Œæ ¡éªŒã€‚&lt;/p&gt;</description></item><item><title/><link>https://ethen-cao.github.io/ethenslab/explore-ai/llm/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/llm/</guid><description>&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme plain
skinparam componentStyle rectangle
skinparam shadowing false
skinparam packageStyle rectangle
skinparam nodesep 60
skinparam ranksep 60
top to bottom direction
title On-device LLM on Android (KV Cache Architecture)
package &amp;#34;Application (Android)&amp;#34; {
[App / UI\n(Voice, Chat, Agent)]
[Prompt Builder]
[Stream UI / TTS]
[App / UI\n(Voice, Chat, Agent)] --&amp;gt; [Prompt Builder]
[Stream UI / TTS] --&amp;gt; [App / UI\n(Voice, Chat, Agent)]
}
package &amp;#34;LLM Service Layer\n(Android Service or in-app)&amp;#34; {
[Session Manager]
[Tokenizer]
[Inference Orchestrator\n(Prefill / Decode)]
[Sampler &amp;amp; Constraints]
[KV Cache Manager]
[Prompt Builder] --&amp;gt; [Tokenizer]
[Tokenizer] --&amp;gt; [Inference Orchestrator\n(Prefill / Decode)]
[Session Manager] --&amp;gt; [Inference Orchestrator\n(Prefill / Decode)]
[Inference Orchestrator\n(Prefill / Decode)] --&amp;gt; [Sampler &amp;amp; Constraints]
}
package &amp;#34;Model Runtime (Native)&amp;#34; {
[LLM Runtime]
}
package &amp;#34;Hardware / OS Resource&amp;#34; {
[Memory\n(DRAM / Native Heap)]
[Accelerator\n(NPU / DSP / GPU / CPU)]
}
&amp;#39; Layer-to-layer flow
[Inference Orchestrator\n(Prefill / Decode)] --&amp;gt; [LLM Runtime]
[LLM Runtime] --&amp;gt; [Memory\n(DRAM / Native Heap)]
[LLM Runtime] --&amp;gt; [Accelerator\n(NPU / DSP / GPU / CPU)]
[Sampler &amp;amp; Constraints] --&amp;gt; [Tokenizer]
[Tokenizer] --&amp;gt; [Stream UI / TTS]
note right of [KV Cache Manager]
KV Cache:
- owned by Service Layer
- per session
- per layer/head
- grows with context length
Policies:
- max context
- sliding window
- eviction
end note
note bottom of [Inference Orchestrator\n(Prefill / Decode)]
Prefill:
- consume prompt tokens
- build KV Cache
Decode:
- read KV Cache
- generate next token
- append KV
end note
@enduml
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title/><link>https://ethen-cao.github.io/ethenslab/explore-ai/qnn-achitecture/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ethen-cao.github.io/ethenslab/explore-ai/qnn-achitecture/</guid><description>&lt;h1 id="deep-dive-into-qualcomm-qnn-htp-architecture-fastrpc-and-the-side-load-mechanism"&gt;Deep Dive into Qualcomm QNN HTP: Architecture, FastRPC, and the Side-load Mechanism&lt;/h1&gt;
&lt;h2 id="libadsprpcso"&gt;libadsprpc.so&lt;/h2&gt;
&lt;h2 id="open_device_node"&gt;open_device_node&lt;/h2&gt;
&lt;h3 id="å‡½æ•°æ¦‚è§ˆ"&gt;å‡½æ•°æ¦‚è§ˆ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥&lt;/strong&gt;: &lt;code&gt;domain_id&lt;/code&gt; (å¦‚ ADSP, CDSP, SDSP çš„ ID)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;: &lt;code&gt;fd&lt;/code&gt; (File Descriptorï¼Œæ–‡ä»¶æè¿°ç¬¦)ã€‚å¦‚æœæˆåŠŸï¼Œè¿”å› &lt;code&gt;&amp;gt;0&lt;/code&gt; çš„æ•´æ•°ï¼›å¤±è´¥è¿”å›è´Ÿæ•°é”™è¯¯ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›®çš„&lt;/strong&gt;: æ‰“å¼€å†…æ ¸è®¾å¤‡èŠ‚ç‚¹ï¼ˆCharacter Device Nodeï¼‰ï¼Œå»ºç«‹é€šå¾€ DSP çš„ç‰©ç†é€šé“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="è¯¦ç»†å·¥ä½œæµç¨‹-step-by-step"&gt;è¯¦ç»†å·¥ä½œæµç¨‹ (Step-by-Step)&lt;/h3&gt;
&lt;h4 id="é˜¶æ®µä¸€è·¯å¾„å‡†å¤‡-path-preparation"&gt;&lt;strong&gt;é˜¶æ®µä¸€ï¼šè·¯å¾„å‡†å¤‡ (Path Preparation)&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;å‡½æ•°é¦–å…ˆæ ¹æ®ä¼ å…¥çš„ &lt;code&gt;domain_id&lt;/code&gt;ï¼Œå‡†å¤‡ä¸‰ä¸ªå€™é€‰çš„è®¾å¤‡èŠ‚ç‚¹è·¯å¾„ã€‚è¿™æ˜¯ä¸€ç§â€œå¹¿æ’’ç½‘â€çš„ç­–ç•¥ï¼Œä»¥é€‚åº”ä¸åŒè®¾å¤‡æˆ– Android ç‰ˆæœ¬çš„å‘½åå·®å¼‚ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨èŠ‚ç‚¹ (High Priority)&lt;/strong&gt;: &lt;code&gt;__ptr&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼š&lt;code&gt;/dev/adsprpc-smd-secure&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç”¨äºéœ€è¦ç­¾åè®¤è¯çš„å®‰å…¨è®¡ç®—åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹å®šåŸŸèŠ‚ç‚¹ (Medium Priority)&lt;/strong&gt;: &lt;code&gt;__ptr_00&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼š&lt;code&gt;/dev/adsprpc-smd-cdsp&lt;/code&gt; (é’ˆå¯¹ CDSP) æˆ– &lt;code&gt;/dev/adsprpc-smd-adsp&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤é€šç”¨èŠ‚ç‚¹ (Low Priority)&lt;/strong&gt;: &lt;code&gt;__ptr_01&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;é€šå¸¸æ˜¯ï¼š&lt;code&gt;/dev/adsprpc-smd&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è¿™æ˜¯æœ€å¤è€ä¸”æœ€é€šç”¨çš„èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="é˜¶æ®µäºŒç›´æ¥å°è¯•-the-direct-open-loop"&gt;&lt;strong&gt;é˜¶æ®µäºŒï¼šç›´æ¥å°è¯• (The Direct Open Loop)&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ä»£ç å°è¯•é€šè¿‡ Linux æ ‡å‡†ç³»ç»Ÿè°ƒç”¨ &lt;code&gt;open()&lt;/code&gt; ç›´æ¥æ‰“å¼€ä¸Šè¿°è·¯å¾„ã€‚è¿™æ˜¯**â€œä¹è§‚ç­–ç•¥â€**ï¼Œå‡è®¾å½“å‰è¿›ç¨‹æœ‰æƒé™è®¿é—®ã€‚&lt;/p&gt;</description></item><item><title/><link>https://ethen-cao.github.io/ethenslab/others/hdr/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ethen-cao.github.io/ethenslab/others/hdr/</guid><description>&lt;h1 id="æ™ºèƒ½åº§èˆ±å¤§å±-hdr-ä½“éªŒä¸å½±å“è°ƒç ”æŠ¥å‘Š"&gt;æ™ºèƒ½åº§èˆ±å¤§å± HDR ä½“éªŒä¸å½±å“è°ƒç ”æŠ¥å‘Š&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;ç³»ç»Ÿç¯å¢ƒï¼š&lt;/strong&gt; Android 16 (Automotive OS)
&lt;strong&gt;æ ¸å¿ƒè®®é¢˜ï¼š&lt;/strong&gt; å¼€å¯/å…³é—­ HDR å¯¹ç”¨æˆ·ä½“éªŒçš„å…¨æ–¹ä½å½±å“&lt;/p&gt;
&lt;h2 id="1-æ ¸å¿ƒç»“è®ºæ‘˜è¦"&gt;1. æ ¸å¿ƒç»“è®ºæ‘˜è¦&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸ä»…ä»…æ˜¯è§†é¢‘ï¼š&lt;/strong&gt; å¼€å¯ HDR &lt;strong&gt;ç»ä¸ä»…ä»…&lt;/strong&gt;å½±å“è§†é¢‘ä½“éªŒã€‚å®ƒå¯¹&lt;strong&gt;è½¦è½½åœ°å›¾å¯¼èˆªã€ADAS å¯è§†åŒ–ã€å€’è½¦å½±åƒï¼ˆå®‰å…¨ï¼‰ã€ä»¥åŠç³»ç»Ÿ UI çš„æ•´ä½“è´¨æ„Ÿ&lt;/strong&gt;éƒ½æœ‰å†³å®šæ€§å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Android 16 çš„å…³é”®ä½œç”¨ï¼š&lt;/strong&gt; Android 16 è¿›ä¸€æ­¥å®Œå–„äº†&lt;strong&gt;SDR è°ƒå…‰ï¼ˆSDR Dimmingï¼‰&lt;strong&gt;å’Œ&lt;/strong&gt;æ··åˆå†…å®¹æ¸²æŸ“&lt;/strong&gt;æœºåˆ¶ã€‚è¿™æ„å‘³ç€åœ¨å¼€å¯ HDR æ—¶ï¼Œç³»ç»Ÿèƒ½æ›´å®Œç¾åœ°å¤„ç†&amp;quot;é«˜äº®è§†é¢‘&amp;quot;ä¸&amp;quot;æ™®é€š UI æŒ‰é’®&amp;quot;å…±å­˜çš„ç”»é¢ï¼Œé¿å… UI è¿‡äº®åˆºçœ¼æˆ–è¿‡æš—çœ‹ä¸æ¸…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨ä¸èˆ’é€‚çš„åŒé‡åšå¼ˆï¼š&lt;/strong&gt; å¼€å¯ HDR èƒ½åœ¨å¤œé—´æä¾›æä½³çš„&amp;quot;çœŸé»‘&amp;quot;èƒŒæ™¯ï¼ˆé˜²å…‰æ±¡æŸ“ï¼‰ï¼Œä½†åœ¨å¼ºå…‰ä¸‹å¯¹æ•£çƒ­å’ŒåŠŸè€—æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="2-æ·±åº¦è§£æå¼€å¯-vs-å…³é—­-hdr-çš„å…·ä½“å½±å“"&gt;2. æ·±åº¦è§£æï¼šå¼€å¯ vs å…³é—­ HDR çš„å…·ä½“å½±å“&lt;/h2&gt;
&lt;h3 id="21-æ˜¯å¦åªå¯¹è§†é¢‘æœ‰å½±å“æ ¸å¿ƒè¯¯åŒºæ¾„æ¸…"&gt;2.1 æ˜¯å¦åªå¯¹è§†é¢‘æœ‰å½±å“ï¼Ÿï¼ˆæ ¸å¿ƒè¯¯åŒºæ¾„æ¸…ï¼‰&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ç­”æ¡ˆï¼šå¦ã€‚&lt;/strong&gt; HDR æ˜¯ä¸€é¡¹ç³»ç»Ÿçº§çš„æ˜¾ç¤ºèƒ½åŠ›ï¼Œå½±å“èŒƒå›´è¦†ç›–ä»¥ä¸‹å››å¤§é«˜é¢‘åœºæ™¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;åœºæ™¯&lt;/th&gt;
&lt;th style="text-align: left"&gt;å…³é—­ HDR (SDR æ¨¡å¼) çš„ç—›ç‚¹&lt;/th&gt;
&lt;th style="text-align: left"&gt;å¼€å¯ HDR çš„ä½“éªŒæå‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;åœ°å›¾å¯¼èˆª&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å»ºç­‘æ¨¡å‹å’Œè·¯é¢å¹³æ·¡æ— å¥‡ï¼›å¤œé—´æ¨¡å¼ä¸‹ï¼Œé»‘è‰²èƒŒæ™¯ä¸å¤Ÿæ·±é‚ƒï¼Œå¯¼è‡´è½¦å†…å³ä½¿åœ¨æ·±å¤œä¹Ÿæ³›ç€ç°å…‰ã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;é«˜å¯¹æ¯”åº¦æ¸²æŸ“è®©åœ°å›¾æ›´å…·ç«‹ä½“æ„Ÿï¼›&lt;strong&gt;å¤œé—´å¯¼èˆªèƒŒæ™¯çº¯é»‘&lt;/strong&gt;ï¼Œä¸è½¦å†…æš—ç¯å¢ƒèä¸ºä¸€ä½“ï¼Œå¤§å¹…é™ä½é©¾é©¶è§†è§‰å¹²æ‰°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å€’è½¦/ç¯è§†å½±åƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å®‰å…¨éšæ‚£ï¼š&lt;/strong&gt; å½“è½¦è¾†ä»æš—å¤„ï¼ˆåœ°åº“ï¼‰é©¶å‘äº®å¤„ï¼ˆå‡ºå£ï¼‰æ—¶ï¼Œæ‘„åƒå¤´é‡‡é›†çš„é«˜åŠ¨æ€ç”»é¢è¢«å‹ç¼©ï¼Œå¯¼è‡´&amp;quot;äº®å¤„è¿‡æ›&amp;quot;æˆ–&amp;quot;æš—å¤„æ­»é»‘&amp;quot;ï¼Œçœ‹ä¸æ¸…éšœç¢ç‰©ã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¯æŒ HDR çš„é“¾è·¯èƒ½å®Œæ•´è¿˜åŸæ‘„åƒå¤´é‡‡é›†çš„é«˜åŠ¨æ€ç”»é¢ï¼Œ&lt;strong&gt;åŒæ—¶çœ‹æ¸…&lt;/strong&gt;é˜´å½±é‡Œçš„æŸ±å­å’Œé˜³å…‰ä¸‹çš„è·¯äººã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ç³»ç»Ÿ UI ä¸å£çº¸&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;é‡‡ç”¨äº† Android 16 çš„ Ultra HDR å›¾ç‰‡æ ¼å¼ä½œä¸ºå£çº¸æ—¶ï¼Œåªèƒ½ä»¥æ™®é€š SDR æ˜¾ç¤ºï¼Œç¼ºä¹å…‰æ³½æ„Ÿã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;å£çº¸ä¸­çš„é˜³å…‰ã€é‡‘å±æè´¨ä¼šæœ‰&amp;quot;å‘å…‰&amp;quot;çš„çœŸå®è´¨æ„Ÿï¼›UI çš„é«˜å…‰åŠ¨æ•ˆæ›´ç»†è…»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;è½¦è½½æ¸¸æˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;3A å¤§ä½œï¼ˆå¦‚ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹äº‘æ¸¸æˆç‰ˆï¼‰ç”»é¢ç°æš—ï¼Œç¼ºä¹æ²‰æµ¸æ„Ÿã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;èƒ½å¤Ÿå‘ˆç°æ¸¸æˆå¼•æ“è®¾è®¡çš„å…‰å½±æ•ˆæœï¼Œç‰¹åˆ«æ˜¯ç«ç„°ã€é­”æ³•ç‰¹æ•ˆå’Œæ·±é‚ƒçš„é˜´å½±ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="22-è§†è§‰ä½“éªŒå¯¹æ¯”"&gt;2.2 è§†è§‰ä½“éªŒå¯¹æ¯”&lt;/h3&gt;
&lt;h4 id="å¼€å¯-hdr-high-dynamic-range"&gt;å¼€å¯ HDR (High Dynamic Range)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å³°å€¼äº®åº¦çˆ†å‘ï¼š&lt;/strong&gt; èƒ½å¤Ÿæ¿€å‘å±å¹•å±€éƒ¨è¾¾åˆ° 1000 nits ä»¥ä¸Šäº®åº¦ï¼ˆéœ€å±å¹•ç¡¬ä»¶æ”¯æŒï¼‰ï¼Œåœ¨æ­£åˆé˜³å…‰ç›´å°„ä¸‹ï¼Œå¯¼èˆªçº¿æ¡ä¾ç„¶æ¸…æ™°å¯è§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‰²å½©ä½“ç§¯ï¼ˆColor Volumeï¼‰ï¼š&lt;/strong&gt; ç»“åˆ 10-bit è‰²æ·±ï¼Œè‰²å½©è¿‡æ¸¡æ²¡æœ‰æ–­å±‚ï¼ˆBandingï¼‰ï¼Œå¤©ç©ºå’Œæ°´é¢çš„æ¸²æŸ“æ›´åŠ å¹³æ»‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çœŸå®æ„Ÿï¼š&lt;/strong&gt; åˆ©ç”¨ PQï¼ˆPerceptual Quantizerï¼‰æ›²çº¿ï¼Œè®©ç”»é¢äº®éƒ¨æ›´äº®ï¼Œæš—éƒ¨æ›´æš—ï¼Œç¬¦åˆäººçœ¼å¯¹çœŸå®ä¸–ç•Œçš„æ„ŸçŸ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å…³é—­-hdr-sdr---standard-dynamic-range"&gt;å…³é—­ HDR (SDR - Standard Dynamic Range)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº®åº¦å—é™ï¼š&lt;/strong&gt; å…¨å±€äº®åº¦é€šå¸¸è¢«é™åˆ¶åœ¨ 400-600 nitsï¼Œå¼ºå…‰ä¸‹å¯èƒ½çœ‹ä¸æ¸…å±å¹•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§†è§‰&amp;quot;å‘ç°&amp;quot;ï¼š&lt;/strong&gt; å°¤å…¶æ˜¯åœ¨ OLED æˆ– Mini LED å±å¹•ä¸Šè¿è¡Œ SDR å†…å®¹ï¼Œæ— æ³•å‘æŒ¥å±å¹•&amp;quot;çº¯é»‘ä¸å‘å…‰&amp;quot;çš„ç‰¹æ€§ï¼Œå¯¼è‡´å¤œé—´å±å¹•åƒè’™äº†ä¸€å±‚ç°é›¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="3-android-16-çš„æŠ€æœ¯ç‰¹æ€§ä¸ç³»ç»Ÿå½±å“"&gt;3. Android 16 çš„æŠ€æœ¯ç‰¹æ€§ä¸ç³»ç»Ÿå½±å“&lt;/h2&gt;
&lt;p&gt;åœ¨ Android 16 ä¸­ï¼ŒGoogle å¯¹ HDR çš„å¤„ç†é€»è¾‘è¿›è¡Œäº†æ˜¾è‘—ä¼˜åŒ–ï¼Œä¸»è¦ä½“ç°åœ¨&lt;strong&gt;æ··åˆå†…å®¹ç®¡ç†&lt;/strong&gt;ä¸Šã€‚&lt;/p&gt;</description></item><item><title/><link>https://ethen-cao.github.io/ethenslab/others/polaris-1.0-%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6-id-%E4%B8%8E%E6%B3%A8%E5%86%8C%E8%A1%A8%E8%A7%84%E8%8C%83/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ethen-cao.github.io/ethenslab/others/polaris-1.0-%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6-id-%E4%B8%8E%E6%B3%A8%E5%86%8C%E8%A1%A8%E8%A7%84%E8%8C%83/</guid><description>&lt;h1 id="polaris-10-å…¨å±€äº‹ä»¶-id-ä¸æ³¨å†Œè¡¨è§„èŒƒ"&gt;Polaris 1.0 å…¨å±€äº‹ä»¶ ID ä¸æ³¨å†Œè¡¨è§„èŒƒ&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Global Event ID &amp;amp; Registry Specification&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id="ç‰ˆæœ¬å†å²"&gt;ç‰ˆæœ¬å†å²&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–‡æ¡£ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;ä¿®æ”¹æ—¥æœŸ&lt;/th&gt;
&lt;th&gt;ä¿®æ”¹äºº&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;V1.0&lt;/td&gt;
&lt;td&gt;2025-12-XX&lt;/td&gt;
&lt;td&gt;[xxxåå­—]&lt;/td&gt;
&lt;td&gt;åˆå§‹å‘å¸ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="æ¦‚è¿°"&gt;æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†æ”¯æ’‘ Polaris 1.0 å®ç°â€œç«¯äº‘ä¸€ä½“â€çš„æ€§èƒ½ä¸ç¨³å®šæ€§ç›‘æ§ï¼Œè§£å†³è·¨ SoCï¼ˆAndroid/Linuxï¼‰ä¸ MCU çš„å¼‚æ„æ•°æ®æ²»ç†éš¾é¢˜ï¼Œå¹¶é€‚é…è½¦äº‘ SDK çš„æ¥å£é™åˆ¶ï¼Œæœ¬é¡¹ç›®é‡‡ç”¨ &lt;strong&gt;â€œæ³¨å†Œåˆ¶ + æ‰å¹³åŒ– IDâ€&lt;/strong&gt; çš„ç®¡ç†æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒåŸåˆ™ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ID å»è¯­ä¹‰åŒ–&lt;/strong&gt;ï¼šEventID ä»…ä½œä¸ºå”¯ä¸€ç´¢å¼•ï¼ˆKeyï¼‰ï¼Œä¸å†æ‰¿è½½å¤æ‚çš„ä¸šåŠ¡å«ä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰å…ƒæ•°æ®åŒ–&lt;/strong&gt;ï¼šæ‰€æœ‰çš„ä¸šåŠ¡å±æ€§ï¼ˆæ¨¡å—ã€ç­‰çº§ã€æ—¥å¿—ç­–ç•¥ï¼‰ç»Ÿä¸€åœ¨ã€Šå…¨å±€æ³¨å†Œè¡¨ã€‹ä¸­ç»´æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£å³ä»£ç &lt;/strong&gt;ï¼šæ³¨å†Œè¡¨æ˜¯å”¯ä¸€å¯ä¿¡æ¥æºï¼Œæ¨¡ç‰ˆä»£ç ä»¥åŠå¸¸é‡ç”±æ³¨å†Œè¡¨è‡ªåŠ¨ç”Ÿæˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="äº‹ä»¶-id-ç¼–ç è§„èŒƒ"&gt;äº‹ä»¶ ID ç¼–ç è§„èŒƒ&lt;/h2&gt;
&lt;p&gt;Polaris äº‹ä»¶ ID é‡‡ç”¨ &lt;strong&gt;10 ä½çº¯æ•°å­—&lt;/strong&gt; æ ¼å¼ï¼Œåˆ†ä¸ºä¸‰ä¸ªç‰©ç†æ®µã€‚&lt;/p&gt;
&lt;h3 id="id-ç»“æ„å…¬å¼"&gt;ID ç»“æ„å…¬å¼&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;[Prefix (3ä½)]&lt;/code&gt; + &lt;code&gt;[Scope (1ä½)]&lt;/code&gt; + &lt;code&gt;[Sequence (6ä½)]&lt;/code&gt;&lt;/p&gt;
&lt;h3 id="å­—æ®µå®šä¹‰"&gt;å­—æ®µå®šä¹‰&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ä½æ•°&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;å–å€¼å®šä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Prefix&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;ç‰©ç†ç³»ç»Ÿå½’å± (ç¡¬æ€§çº¦æŸï¼‰&lt;/td&gt;
&lt;td&gt;666: Android ç³»ç»Ÿ; 668: Linux Host ç³»ç»Ÿ; 685: MCU å­ç³»ç»Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Scope&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;ç®¡ç†åŸŸ (ID åˆ†é…æƒéš”ç¦»ï¼‰&lt;/td&gt;
&lt;td&gt;0: å¹³å°/ç³»ç»Ÿç»´æŠ¤; 1: ä¸šåŠ¡/åº”ç”¨ç»´æŠ¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Sequence&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;æµæ°´å· (å…¨å±€å”¯ä¸€ï¼‰&lt;/td&gt;
&lt;td&gt;000001 ~ 999999 æŒ‰ç”³è¯·é¡ºåºé€’å¢ï¼Œä¸åˆ†ç±»ï¼Œä¸å›é€€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="å…¨å±€äº‹ä»¶æ³¨å†Œè¡¨æ¨¡ç‰ˆ"&gt;å…¨å±€äº‹ä»¶æ³¨å†Œè¡¨æ¨¡ç‰ˆ&lt;/h2&gt;
&lt;p&gt;æœ¬æ³¨å†Œè¡¨å»ºè®®ä½¿ç”¨ &lt;strong&gt;Git æ‰˜ç®¡çš„ CSV æ–‡ä»¶&lt;/strong&gt; æˆ– &lt;strong&gt;åœ¨çº¿åä½œè¡¨æ ¼&lt;/strong&gt; ç»´æŠ¤ã€‚å®ƒæ˜¯ç”Ÿæˆ SDK ä»£ç çš„å”¯ä¸€ä¾æ®ã€‚&lt;/p&gt;</description></item><item><title/><link>https://ethen-cao.github.io/ethenslab/others/polaris-1.0-%E8%87%AA%E5%8A%A8%E5%8C%96%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E8%A7%84%E8%8C%83%E8%A6%81%E6%B1%82/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ethen-cao.github.io/ethenslab/others/polaris-1.0-%E8%87%AA%E5%8A%A8%E5%8C%96%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E8%A7%84%E8%8C%83%E8%A6%81%E6%B1%82/</guid><description>&lt;h1 id="polaris-10-è‡ªåŠ¨åŒ–ä»£ç ç”Ÿæˆè§„èŒƒè¦æ±‚"&gt;Polaris 1.0 è‡ªåŠ¨åŒ–ä»£ç ç”Ÿæˆè§„èŒƒè¦æ±‚&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Polaris Code Generation Specification&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;æ—¥æœŸ&lt;/th&gt;
&lt;th&gt;ä½œè€…&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;v1.0&lt;/td&gt;
&lt;td&gt;2025-12-XX&lt;/td&gt;
&lt;td&gt;Polaris Team&lt;/td&gt;
&lt;td&gt;åˆå§‹ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="1-ç›®æ ‡ä¸åŸåˆ™goals--principles"&gt;1. ç›®æ ‡ä¸åŸåˆ™ï¼ˆGoals &amp;amp; Principlesï¼‰&lt;/h2&gt;
&lt;h3 id="11-ç›®æ ‡"&gt;1.1 ç›®æ ‡&lt;/h3&gt;
&lt;p&gt;è‡ªåŠ¨åŒ–ä»£ç ç”Ÿæˆï¼ˆCodegenï¼‰ç”¨äºå°† &lt;strong&gt;å…¨å±€äº‹ä»¶æ³¨å†Œè¡¨&lt;/strong&gt; è½¬æ¢ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¼ºç±»å‹ã€å¯ç¼–è¯‘æ ¡éªŒçš„ SDK ä»£ç &lt;/li&gt;
&lt;li&gt;è·¨è¯­è¨€ä¸€è‡´ï¼ˆJava / C++ï¼‰&lt;/li&gt;
&lt;li&gt;å¯è¢« IDE ç²¾å‡†æç¤º&lt;/li&gt;
&lt;li&gt;åœ¨å¤§è§„æ¨¡äº‹ä»¶æ•°é‡ä¸‹ä¾ç„¶å¯ç»´æŠ¤&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="12-æ ¸å¿ƒè®¾è®¡åŸåˆ™å¼ºåˆ¶"&gt;1.2 æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼ˆå¼ºåˆ¶ï¼‰&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŸåˆ™&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»å‹å®‰å…¨ä¼˜å…ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»»ä½•å‚æ•°é”™è¯¯å¿…é¡»åœ¨&lt;strong&gt;ç¼–è¯‘æœŸæˆ–æ„é€ æœŸ&lt;/strong&gt;æš´éœ²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å»ä¸­å¿ƒåŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¦æ­¢ç”Ÿæˆé›†ä¸­å¼ God Classï¼ˆå¦‚ Reporter èšåˆç±»ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€äº‹ä»¶ä¸€ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ª Event å¿…é¡»ç”Ÿæˆç‹¬ç«‹çš„ Context ç±»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ„é€ å³åˆæ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ„é€ å‡½æ•°å¿…é¡»ä¿è¯å¿…å¡«å­—æ®µå®Œæ•´;å¯é€‰å­—æ®µæä¾›setteræ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿæˆä»£ç å¯åˆ å¯è£å‰ª&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœªä½¿ç”¨äº‹ä»¶å…è®¸è¢« R8 / Linker ç§»é™¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Core ç¨³å®šï¼ŒGenerated æ˜“å˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Core SDK ä¸å› æ–°å¢äº‹ä»¶è€Œå˜åŒ–&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="2-è¾“å…¥æºè§„èŒƒsource-of-truth"&gt;2. è¾“å…¥æºè§„èŒƒï¼ˆSource of Truthï¼‰&lt;/h2&gt;
&lt;h3 id="21-å”¯ä¸€è¾“å…¥æº"&gt;2.1 å”¯ä¸€è¾“å…¥æº&lt;/h3&gt;
&lt;p&gt;è‡ªåŠ¨åŒ–ç”Ÿæˆçš„&lt;strong&gt;å”¯ä¸€å¯ä¿¡è¾“å…¥æº&lt;/strong&gt;ä¸ºï¼š&lt;/p&gt;</description></item></channel></rss>